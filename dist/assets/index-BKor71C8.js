(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function fC(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Bp={exports:{}},Tu={};var ib;function dC(){if(ib)return Tu;ib=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:r,type:i,key:c,ref:a!==void 0?a:null,props:l}}return Tu.Fragment=e,Tu.jsx=t,Tu.jsxs=t,Tu}var sb;function mC(){return sb||(sb=1,Bp.exports=dC()),Bp.exports}var R=mC(),Fp={exports:{}},Ve={};var ab;function pC(){if(ab)return Ve;ab=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),b=Symbol.iterator;function V(I){return I===null||typeof I!="object"?null:(I=b&&I[b]||I["@@iterator"],typeof I=="function"?I:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,k={};function ie(I,H,Z){this.props=I,this.context=H,this.refs=k,this.updater=Z||B}ie.prototype.isReactComponent={},ie.prototype.setState=function(I,H){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,H,"setState")},ie.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function K(){}K.prototype=ie.prototype;function X(I,H,Z){this.props=I,this.context=H,this.refs=k,this.updater=Z||B}var ue=X.prototype=new K;ue.constructor=X,L(ue,ie.prototype),ue.isPureReactComponent=!0;var he=Array.isArray;function oe(){}var C={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function D(I,H,Z){var le=Z.ref;return{$$typeof:r,type:I,key:H,ref:le!==void 0?le:null,props:Z}}function P(I,H){return D(I.type,H,I.props)}function x(I){return typeof I=="object"&&I!==null&&I.$$typeof===r}function U(I){var H={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(Z){return H[Z]})}var N=/\/+/g;function Le(I,H){return typeof I=="object"&&I!==null&&I.key!=null?U(""+I.key):H.toString(36)}function ut(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(oe,oe):(I.status="pending",I.then(function(H){I.status==="pending"&&(I.status="fulfilled",I.value=H)},function(H){I.status==="pending"&&(I.status="rejected",I.reason=H)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function J(I,H,Z,le,Ee){var ve=typeof I;(ve==="undefined"||ve==="boolean")&&(I=null);var me=!1;if(I===null)me=!0;else switch(ve){case"bigint":case"string":case"number":me=!0;break;case"object":switch(I.$$typeof){case r:case e:me=!0;break;case _:return me=I._init,J(me(I._payload),H,Z,le,Ee)}}if(me)return Ee=Ee(I),me=le===""?"."+Le(I,0):le,he(Ee)?(Z="",me!=null&&(Z=me.replace(N,"$&/")+"/"),J(Ee,H,Z,"",function(Ce){return Ce})):Ee!=null&&(x(Ee)&&(Ee=P(Ee,Z+(Ee.key==null||I&&I.key===Ee.key?"":(""+Ee.key).replace(N,"$&/")+"/")+me)),H.push(Ee)),1;me=0;var Se=le===""?".":le+":";if(he(I))for(var ye=0;ye<I.length;ye++)le=I[ye],ve=Se+Le(le,ye),me+=J(le,H,Z,ve,Ee);else if(ye=V(I),typeof ye=="function")for(I=ye.call(I),ye=0;!(le=I.next()).done;)le=le.value,ve=Se+Le(le,ye++),me+=J(le,H,Z,ve,Ee);else if(ve==="object"){if(typeof I.then=="function")return J(ut(I),H,Z,le,Ee);throw H=String(I),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return me}function fe(I,H,Z){if(I==null)return I;var le=[],Ee=0;return J(I,le,"","",function(ve){return H.call(Z,ve,Ee++)}),le}function _e(I){if(I._status===-1){var H=I._result;H=H(),H.then(function(Z){(I._status===0||I._status===-1)&&(I._status=1,I._result=Z)},function(Z){(I._status===0||I._status===-1)&&(I._status=2,I._result=Z)}),I._status===-1&&(I._status=0,I._result=H)}if(I._status===1)return I._result.default;throw I._result}var re=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)},ee={map:fe,forEach:function(I,H,Z){fe(I,function(){H.apply(this,arguments)},Z)},count:function(I){var H=0;return fe(I,function(){H++}),H},toArray:function(I){return fe(I,function(H){return H})||[]},only:function(I){if(!x(I))throw Error("React.Children.only expected to receive a single React element child.");return I}};return Ve.Activity=T,Ve.Children=ee,Ve.Component=ie,Ve.Fragment=t,Ve.Profiler=a,Ve.PureComponent=X,Ve.StrictMode=i,Ve.Suspense=p,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(I){return C.H.useMemoCache(I)}},Ve.cache=function(I){return function(){return I.apply(null,arguments)}},Ve.cacheSignal=function(){return null},Ve.cloneElement=function(I,H,Z){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var le=L({},I.props),Ee=I.key;if(H!=null)for(ve in H.key!==void 0&&(Ee=""+H.key),H)!w.call(H,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&H.ref===void 0||(le[ve]=H[ve]);var ve=arguments.length-2;if(ve===1)le.children=Z;else if(1<ve){for(var me=Array(ve),Se=0;Se<ve;Se++)me[Se]=arguments[Se+2];le.children=me}return D(I.type,Ee,le)},Ve.createContext=function(I){return I={$$typeof:c,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:l,_context:I},I},Ve.createElement=function(I,H,Z){var le,Ee={},ve=null;if(H!=null)for(le in H.key!==void 0&&(ve=""+H.key),H)w.call(H,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(Ee[le]=H[le]);var me=arguments.length-2;if(me===1)Ee.children=Z;else if(1<me){for(var Se=Array(me),ye=0;ye<me;ye++)Se[ye]=arguments[ye+2];Ee.children=Se}if(I&&I.defaultProps)for(le in me=I.defaultProps,me)Ee[le]===void 0&&(Ee[le]=me[le]);return D(I,ve,Ee)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(I){return{$$typeof:d,render:I}},Ve.isValidElement=x,Ve.lazy=function(I){return{$$typeof:_,_payload:{_status:-1,_result:I},_init:_e}},Ve.memo=function(I,H){return{$$typeof:g,type:I,compare:H===void 0?null:H}},Ve.startTransition=function(I){var H=C.T,Z={};C.T=Z;try{var le=I(),Ee=C.S;Ee!==null&&Ee(Z,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(oe,re)}catch(ve){re(ve)}finally{H!==null&&Z.types!==null&&(H.types=Z.types),C.T=H}},Ve.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Ve.use=function(I){return C.H.use(I)},Ve.useActionState=function(I,H,Z){return C.H.useActionState(I,H,Z)},Ve.useCallback=function(I,H){return C.H.useCallback(I,H)},Ve.useContext=function(I){return C.H.useContext(I)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(I,H){return C.H.useDeferredValue(I,H)},Ve.useEffect=function(I,H){return C.H.useEffect(I,H)},Ve.useEffectEvent=function(I){return C.H.useEffectEvent(I)},Ve.useId=function(){return C.H.useId()},Ve.useImperativeHandle=function(I,H,Z){return C.H.useImperativeHandle(I,H,Z)},Ve.useInsertionEffect=function(I,H){return C.H.useInsertionEffect(I,H)},Ve.useLayoutEffect=function(I,H){return C.H.useLayoutEffect(I,H)},Ve.useMemo=function(I,H){return C.H.useMemo(I,H)},Ve.useOptimistic=function(I,H){return C.H.useOptimistic(I,H)},Ve.useReducer=function(I,H,Z){return C.H.useReducer(I,H,Z)},Ve.useRef=function(I){return C.H.useRef(I)},Ve.useState=function(I){return C.H.useState(I)},Ve.useSyncExternalStore=function(I,H,Z){return C.H.useSyncExternalStore(I,H,Z)},Ve.useTransition=function(){return C.H.useTransition()},Ve.version="19.2.3",Ve}var ob;function py(){return ob||(ob=1,Fp.exports=pC()),Fp.exports}var z=py(),qp={exports:{}},bu={},Hp={exports:{}},Gp={};var lb;function gC(){return lb||(lb=1,(function(r){function e(J,fe){var _e=J.length;J.push(fe);e:for(;0<_e;){var re=_e-1>>>1,ee=J[re];if(0<a(ee,fe))J[re]=fe,J[_e]=ee,_e=re;else break e}}function t(J){return J.length===0?null:J[0]}function i(J){if(J.length===0)return null;var fe=J[0],_e=J.pop();if(_e!==fe){J[0]=_e;e:for(var re=0,ee=J.length,I=ee>>>1;re<I;){var H=2*(re+1)-1,Z=J[H],le=H+1,Ee=J[le];if(0>a(Z,_e))le<ee&&0>a(Ee,Z)?(J[re]=Ee,J[le]=_e,re=le):(J[re]=Z,J[H]=_e,re=H);else if(le<ee&&0>a(Ee,_e))J[re]=Ee,J[le]=_e,re=le;else break e}}return fe}function a(J,fe){var _e=J.sortIndex-fe.sortIndex;return _e!==0?_e:J.id-fe.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();r.unstable_now=function(){return c.now()-d}}var p=[],g=[],_=1,T=null,b=3,V=!1,B=!1,L=!1,k=!1,ie=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function ue(J){for(var fe=t(g);fe!==null;){if(fe.callback===null)i(g);else if(fe.startTime<=J)i(g),fe.sortIndex=fe.expirationTime,e(p,fe);else break;fe=t(g)}}function he(J){if(L=!1,ue(J),!B)if(t(p)!==null)B=!0,oe||(oe=!0,U());else{var fe=t(g);fe!==null&&ut(he,fe.startTime-J)}}var oe=!1,C=-1,w=5,D=-1;function P(){return k?!0:!(r.unstable_now()-D<w)}function x(){if(k=!1,oe){var J=r.unstable_now();D=J;var fe=!0;try{e:{B=!1,L&&(L=!1,K(C),C=-1),V=!0;var _e=b;try{t:{for(ue(J),T=t(p);T!==null&&!(T.expirationTime>J&&P());){var re=T.callback;if(typeof re=="function"){T.callback=null,b=T.priorityLevel;var ee=re(T.expirationTime<=J);if(J=r.unstable_now(),typeof ee=="function"){T.callback=ee,ue(J),fe=!0;break t}T===t(p)&&i(p),ue(J)}else i(p);T=t(p)}if(T!==null)fe=!0;else{var I=t(g);I!==null&&ut(he,I.startTime-J),fe=!1}}break e}finally{T=null,b=_e,V=!1}fe=void 0}}finally{fe?U():oe=!1}}}var U;if(typeof X=="function")U=function(){X(x)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,Le=N.port2;N.port1.onmessage=x,U=function(){Le.postMessage(null)}}else U=function(){ie(x,0)};function ut(J,fe){C=ie(function(){J(r.unstable_now())},fe)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(J){J.callback=null},r.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<J?Math.floor(1e3/J):5},r.unstable_getCurrentPriorityLevel=function(){return b},r.unstable_next=function(J){switch(b){case 1:case 2:case 3:var fe=3;break;default:fe=b}var _e=b;b=fe;try{return J()}finally{b=_e}},r.unstable_requestPaint=function(){k=!0},r.unstable_runWithPriority=function(J,fe){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var _e=b;b=J;try{return fe()}finally{b=_e}},r.unstable_scheduleCallback=function(J,fe,_e){var re=r.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?re+_e:re):_e=re,J){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=_e+ee,J={id:_++,callback:fe,priorityLevel:J,startTime:_e,expirationTime:ee,sortIndex:-1},_e>re?(J.sortIndex=_e,e(g,J),t(p)===null&&J===t(g)&&(L?(K(C),C=-1):L=!0,ut(he,_e-re))):(J.sortIndex=ee,e(p,J),B||V||(B=!0,oe||(oe=!0,U()))),J},r.unstable_shouldYield=P,r.unstable_wrapCallback=function(J){var fe=b;return function(){var _e=b;b=fe;try{return J.apply(this,arguments)}finally{b=_e}}}})(Gp)),Gp}var ub;function yC(){return ub||(ub=1,Hp.exports=gC()),Hp.exports}var Kp={exports:{}},an={};var cb;function _C(){if(cb)return an;cb=1;var r=py();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(p,g,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:T==null?null:""+T,children:p,containerInfo:g,implementation:_}}var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return an.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,an.createPortal=function(p,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(p,g,null,_)},an.flushSync=function(p){var g=c.T,_=i.p;try{if(c.T=null,i.p=2,p)return p()}finally{c.T=g,i.p=_,i.d.f()}},an.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(p,g))},an.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},an.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var _=g.as,T=d(_,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,V=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?i.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:T,integrity:b,fetchPriority:V}):_==="script"&&i.d.X(p,{crossOrigin:T,integrity:b,fetchPriority:V,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},an.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=d(g.as,g.crossOrigin);i.d.M(p,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(p)},an.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,T=d(_,g.crossOrigin);i.d.L(p,_,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},an.preloadModule=function(p,g){if(typeof p=="string")if(g){var _=d(g.as,g.crossOrigin);i.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(p)},an.requestFormReset=function(p){i.d.r(p)},an.unstable_batchedUpdates=function(p,g){return p(g)},an.useFormState=function(p,g,_){return c.H.useFormState(p,g,_)},an.useFormStatus=function(){return c.H.useHostTransitionStatus()},an.version="19.2.3",an}var hb;function vC(){if(hb)return Kp.exports;hb=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Kp.exports=_C(),Kp.exports}var fb;function EC(){if(fb)return bu;fb=1;var r=yC(),e=py(),t=vC();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function d(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function p(n){if(l(n)!==n)throw Error(i(188))}function g(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(i(188));return s!==n?null:n}for(var o=n,u=s;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return p(f),n;if(m===u)return p(f),s;m=m.sibling}throw Error(i(188))}if(o.return!==u.return)o=f,u=m;else{for(var v=!1,S=f.child;S;){if(S===o){v=!0,o=f,u=m;break}if(S===u){v=!0,u=f,o=m;break}S=S.sibling}if(!v){for(S=m.child;S;){if(S===o){v=!0,o=m,u=f;break}if(S===u){v=!0,u=m,o=f;break}S=S.sibling}if(!v)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:s}function _(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=_(n),s!==null)return s;n=n.sibling}return null}var T=Object.assign,b=Symbol.for("react.element"),V=Symbol.for("react.transitional.element"),B=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),ie=Symbol.for("react.profiler"),K=Symbol.for("react.consumer"),X=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),x=Symbol.iterator;function U(n){return n===null||typeof n!="object"?null:(n=x&&n[x]||n["@@iterator"],typeof n=="function"?n:null)}var N=Symbol.for("react.client.reference");function Le(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===N?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case L:return"Fragment";case ie:return"Profiler";case k:return"StrictMode";case he:return"Suspense";case oe:return"SuspenseList";case D:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case B:return"Portal";case X:return n.displayName||"Context";case K:return(n._context.displayName||"Context")+".Consumer";case ue:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case C:return s=n.displayName||null,s!==null?s:Le(n.type)||"Memo";case w:s=n._payload,n=n._init;try{return Le(n(s))}catch{}}return null}var ut=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},re=[],ee=-1;function I(n){return{current:n}}function H(n){0>ee||(n.current=re[ee],re[ee]=null,ee--)}function Z(n,s){ee++,re[ee]=n.current,n.current=s}var le=I(null),Ee=I(null),ve=I(null),me=I(null);function Se(n,s){switch(Z(ve,s),Z(Ee,n),Z(le,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?RT(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=RT(s),n=CT(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}H(le),Z(le,n)}function ye(){H(le),H(Ee),H(ve)}function Ce(n){n.memoizedState!==null&&Z(me,n);var s=le.current,o=CT(s,n.type);s!==o&&(Z(Ee,n),Z(le,o))}function Ge(n){Ee.current===n&&(H(le),H(Ee)),me.current===n&&(H(me),yu._currentValue=_e)}var bt,Ft;function St(n){if(bt===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);bt=s&&s[1]||"",Ft=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+bt+n+Ft}var Ha=!1;function rr(n,s){if(!n||Ha)return"";Ha=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(W){var Y=W}Reflect.construct(n,[],ae)}else{try{ae.call()}catch(W){Y=W}n.call(ae.prototype)}}else{try{throw Error()}catch(W){Y=W}(ae=n())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(W){if(W&&Y&&typeof W.stack=="string")return[W.stack,Y.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),v=m[0],S=m[1];if(v&&S){var O=v.split(`
`),Q=S.split(`
`);for(f=u=0;u<O.length&&!O[u].includes("DetermineComponentFrameRoot");)u++;for(;f<Q.length&&!Q[f].includes("DetermineComponentFrameRoot");)f++;if(u===O.length||f===Q.length)for(u=O.length-1,f=Q.length-1;1<=u&&0<=f&&O[u]!==Q[f];)f--;for(;1<=u&&0<=f;u--,f--)if(O[u]!==Q[f]){if(u!==1||f!==1)do if(u--,f--,0>f||O[u]!==Q[f]){var ne=`
`+O[u].replace(" at new "," at ");return n.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",n.displayName)),ne}while(1<=u&&0<=f);break}}}finally{Ha=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?St(o):""}function Us(n,s){switch(n.tag){case 26:case 27:case 5:return St(n.type);case 16:return St("Lazy");case 13:return n.child!==s&&s!==null?St("Suspense Fallback"):St("Suspense");case 19:return St("SuspenseList");case 0:case 15:return rr(n.type,!1);case 11:return rr(n.type.render,!1);case 1:return rr(n.type,!0);case 31:return St("Activity");default:return""}}function vl(n){try{var s="",o=null;do s+=Us(n,o),o=n,n=n.return;while(n);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Dt=Object.prototype.hasOwnProperty,qt=r.unstable_scheduleCallback,Vi=r.unstable_cancelCallback,qd=r.unstable_shouldYield,Oc=r.unstable_requestPaint,hn=r.unstable_now,js=r.unstable_getCurrentPriorityLevel,El=r.unstable_ImmediatePriority,Tl=r.unstable_UserBlockingPriority,Pi=r.unstable_NormalPriority,Hd=r.unstable_LowPriority,Vc=r.unstable_IdlePriority,Pc=r.log,Mc=r.unstable_setDisableYieldValue,ir=null,Wt=null;function jn(n){if(typeof Pc=="function"&&Mc(n),Wt&&typeof Wt.setStrictMode=="function")try{Wt.setStrictMode(ir,n)}catch{}}var At=Math.clz32?Math.clz32:Lc,kc=Math.log,Ga=Math.LN2;function Lc(n){return n>>>=0,n===0?32:31-(kc(n)/Ga|0)|0}var Er=256,zs=262144,Nt=4194304;function Tr(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function br(n,s,o){var u=n.pendingLanes;if(u===0)return 0;var f=0,m=n.suspendedLanes,v=n.pingedLanes;n=n.warmLanes;var S=u&134217727;return S!==0?(u=S&~m,u!==0?f=Tr(u):(v&=S,v!==0?f=Tr(v):o||(o=S&~n,o!==0&&(f=Tr(o))))):(S=u&~m,S!==0?f=Tr(S):v!==0?f=Tr(v):o||(o=u&~n,o!==0&&(f=Tr(o)))),f===0?0:s!==0&&s!==f&&(s&m)===0&&(m=f&-f,o=s&-s,m>=o||m===32&&(o&4194048)!==0)?s:f}function sr(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function Gd(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Uc(){var n=Nt;return Nt<<=1,(Nt&62914560)===0&&(Nt=4194304),n}function Sr(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function Bs(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Kd(n,s,o,u,f,m){var v=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var S=n.entanglements,O=n.expirationTimes,Q=n.hiddenUpdates;for(o=v&~o;0<o;){var ne=31-At(o),ae=1<<ne;S[ne]=0,O[ne]=-1;var Y=Q[ne];if(Y!==null)for(Q[ne]=null,ne=0;ne<Y.length;ne++){var W=Y[ne];W!==null&&(W.lane&=-536870913)}o&=~ae}u!==0&&Fs(n,u,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(v&~s))}function Fs(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-At(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function bl(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var u=31-At(o),f=1<<u;f&s|n[u]&s&&(n[u]|=s),o&=~f}}function Sl(n,s){var o=s&-s;return o=(o&42)!==0?1:qs(o),(o&(n.suspendedLanes|s))!==0?0:o}function qs(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function ni(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function jc(){var n=fe.p;return n!==0?n:(n=window.event,n===void 0?32:WT(n.type))}function ar(n,s){var o=fe.p;try{return fe.p=n,s()}finally{fe.p=o}}var or=Math.random().toString(36).slice(2),xt="__reactFiber$"+or,Qt="__reactProps$"+or,Ar="__reactContainer$"+or,Ka="__reactEvents$"+or,Qd="__reactListeners$"+or,zc="__reactHandles$"+or,Bc="__reactResources$"+or,wr="__reactMarker$"+or;function Qa(n){delete n[xt],delete n[Qt],delete n[Ka],delete n[Qd],delete n[zc]}function Ir(n){var s=n[xt];if(s)return s;for(var o=n.parentNode;o;){if(s=o[Ar]||o[xt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=MT(n);n!==null;){if(o=n[xt])return o;n=MT(n)}return s}n=o,o=n.parentNode}return null}function zn(n){if(n=n[xt]||n[Ar]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function wn(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function Rr(n){var s=n[Bc];return s||(s=n[Bc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ot(n){n[wr]=!0}var Al=new Set,wl={};function Cr(n,s){Dr(n,s),Dr(n+"Capture",s)}function Dr(n,s){for(wl[n]=s,n=0;n<s.length;n++)Al.add(s[n])}var Il=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Rl={},Cl={};function Fc(n){return Dt.call(Cl,n)?!0:Dt.call(Rl,n)?!1:Il.test(n)?Cl[n]=!0:(Rl[n]=!0,!1)}function Ya(n,s,o){if(Fc(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function In(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function Vt(n,s,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+u)}}function Yt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Mi(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Dl(n,s,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,m=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(v){o=""+v,m.call(this,v)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Ze(n){if(!n._valueTracker){var s=Mi(n)?"checked":"value";n._valueTracker=Dl(n,s,""+n[s])}}function Hs(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return n&&(u=Mi(n)?n.checked?"true":"false":n.value),n=u,n!==o?(s.setValue(n),!0):!1}function Nr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Gs=/[\n"\\]/g;function yn(n){return n.replace(Gs,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function $a(n,s,o,u,f,m,v,S){n.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.type=v:n.removeAttribute("type"),s!=null?v==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+Yt(s)):n.value!==""+Yt(s)&&(n.value=""+Yt(s)):v!=="submit"&&v!=="reset"||n.removeAttribute("value"),s!=null?Nl(n,v,Yt(s)):o!=null?Nl(n,v,Yt(o)):u!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.name=""+Yt(S):n.removeAttribute("name")}function qc(n,s,o,u,f,m,v,S){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),s!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){Ze(n);return}o=o!=null?""+Yt(o):"",s=s!=null?""+Yt(s):o,S||s===n.value||(n.value=s),n.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=S?n.checked:!!u,n.defaultChecked=!!u,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.name=v),Ze(n)}function Nl(n,s,o){s==="number"&&Nr(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function ki(n,s,o,u){if(n=n.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=s.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&u&&(n[o].defaultSelected=!0)}else{for(o=""+Yt(o),s=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function Hc(n,s,o){if(s!=null&&(s=""+Yt(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+Yt(o):""}function Li(n,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(i(92));if(ut(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=Yt(s),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),Ze(n)}function _n(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var Gc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xl(n,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,o):typeof o!="number"||o===0||Gc.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function Ol(n,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&xl(n,f,u)}else for(var m in s)s.hasOwnProperty(m)&&xl(n,m,s[m])}function Xa(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ui=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wa(n){return Ui.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function lr(){}var Vl=null;function Bn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ji=null,xr=null;function Ks(n){var s=zn(n);if(s&&(n=s.stateNode)){var o=n[Qt]||null;e:switch(n=s.stateNode,s.type){case"input":if($a(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+yn(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==n&&u.form===n.form){var f=u[Qt]||null;if(!f)throw Error(i(90));$a(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===n.form&&Hs(u)}break e;case"textarea":Hc(n,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&ki(n,!!o.multiple,s,!1)}}}var Ja=!1;function zi(n,s,o){if(Ja)return n(s,o);Ja=!0;try{var u=n(s);return u}finally{if(Ja=!1,(ji!==null||xr!==null)&&(jh(),ji&&(s=ji,n=xr,xr=ji=null,Ks(s),n)))for(s=0;s<n.length;s++)Ks(n[s])}}function ur(n,s){var o=n.stateNode;if(o===null)return null;var u=o[Qt]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var Fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qs=!1;if(Fn)try{var st={};Object.defineProperty(st,"passive",{get:function(){Qs=!0}}),window.addEventListener("test",st,st),window.removeEventListener("test",st,st)}catch{Qs=!1}var Or=null,Pl=null,Ys=null;function Ml(){if(Ys)return Ys;var n,s=Pl,o=s.length,u,f="value"in Or?Or.value:Or.textContent,m=f.length;for(n=0;n<o&&s[n]===f[n];n++);var v=o-n;for(u=1;u<=v&&s[o-u]===f[m-u];u++);return Ys=f.slice(n,1<u?1-u:void 0)}function $s(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function ri(){return!0}function cr(){return!1}function Jt(n){function s(o,u,f,m,v){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(o=n[S],this[S]=o?o(m):m[S]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ri:cr,this.isPropagationStopped=cr,this}return T(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ri)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ri)},persist:function(){},isPersistent:ri}),s}var ii={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vr=Jt(ii),Bi=T({},ii,{view:0,detail:0}),kl=Jt(Bi),Fi,Za,Pr,eo=T({},Bi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qi,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Pr&&(Pr&&n.type==="mousemove"?(Fi=n.screenX-Pr.screenX,Za=n.screenY-Pr.screenY):Za=Fi=0,Pr=n),Fi)},movementY:function(n){return"movementY"in n?n.movementY:Za}}),Ll=Jt(eo),Xs=T({},eo,{dataTransfer:0}),Qc=Jt(Xs),Yc=T({},Bi,{relatedTarget:0}),Ws=Jt(Yc),Ul=T({},ii,{animationName:0,elapsedTime:0,pseudoElement:0}),$c=Jt(Ul),to=T({},ii,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Xc=Jt(to),Wc=T({},ii,{data:0}),Mr=Jt(Wc),Jc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function th(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=eh[n])?!!s[n]:!1}function qi(){return th}var fn=T({},Bi,{key:function(n){if(n.key){var s=Jc[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=$s(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Zc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qi,charCode:function(n){return n.type==="keypress"?$s(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?$s(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),nh=Jt(fn),rh=T({},eo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),si=Jt(rh),h=T({},Bi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qi}),y=Jt(h),E=T({},ii,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=Jt(E),q=T({},eo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),$=Jt(q),pe=T({},ii,{newState:0,oldState:0}),Pe=Jt(pe),wt=[9,13,27,32],Xe=Fn&&"CompositionEvent"in window,dt=null;Fn&&"documentMode"in document&&(dt=document.documentMode);var qn=Fn&&"TextEvent"in window&&!dt,kr=Fn&&(!Xe||dt&&8<dt&&11>=dt),hr=" ",fr=!1;function Js(n,s){switch(n){case"keyup":return wt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function no(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ro=!1;function kR(n,s){switch(n){case"compositionend":return no(s);case"keypress":return s.which!==32?null:(fr=!0,hr);case"textInput":return n=s.data,n===hr&&fr?null:n;default:return null}}function LR(n,s){if(ro)return n==="compositionend"||!Xe&&Js(n,s)?(n=Ml(),Ys=Pl=Or=null,ro=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return kr&&s.locale!=="ko"?null:s.data;default:return null}}var UR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function U_(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!UR[n.type]:s==="textarea"}function j_(n,s,o,u){ji?xr?xr.push(u):xr=[u]:ji=u,s=Kh(s,"onChange"),0<s.length&&(o=new Vr("onChange","change",null,o,u),n.push({event:o,listeners:s}))}var jl=null,zl=null;function jR(n){TT(n,0)}function ih(n){var s=wn(n);if(Hs(s))return n}function z_(n,s){if(n==="change")return s}var B_=!1;if(Fn){var Yd;if(Fn){var $d="oninput"in document;if(!$d){var F_=document.createElement("div");F_.setAttribute("oninput","return;"),$d=typeof F_.oninput=="function"}Yd=$d}else Yd=!1;B_=Yd&&(!document.documentMode||9<document.documentMode)}function q_(){jl&&(jl.detachEvent("onpropertychange",H_),zl=jl=null)}function H_(n){if(n.propertyName==="value"&&ih(zl)){var s=[];j_(s,zl,n,Bn(n)),zi(jR,s)}}function zR(n,s,o){n==="focusin"?(q_(),jl=s,zl=o,jl.attachEvent("onpropertychange",H_)):n==="focusout"&&q_()}function BR(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ih(zl)}function FR(n,s){if(n==="click")return ih(s)}function qR(n,s){if(n==="input"||n==="change")return ih(s)}function HR(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Rn=typeof Object.is=="function"?Object.is:HR;function Bl(n,s){if(Rn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!Dt.call(s,f)||!Rn(n[f],s[f]))return!1}return!0}function G_(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function K_(n,s){var o=G_(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=s&&u>=s)return{node:o,offset:s-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=G_(o)}}function Q_(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Q_(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Y_(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Nr(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=Nr(n.document)}return s}function Xd(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var GR=Fn&&"documentMode"in document&&11>=document.documentMode,io=null,Wd=null,Fl=null,Jd=!1;function $_(n,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Jd||io==null||io!==Nr(u)||(u=io,"selectionStart"in u&&Xd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Fl&&Bl(Fl,u)||(Fl=u,u=Kh(Wd,"onSelect"),0<u.length&&(s=new Vr("onSelect","select",null,s,o),n.push({event:s,listeners:u}),s.target=io)))}function Zs(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var so={animationend:Zs("Animation","AnimationEnd"),animationiteration:Zs("Animation","AnimationIteration"),animationstart:Zs("Animation","AnimationStart"),transitionrun:Zs("Transition","TransitionRun"),transitionstart:Zs("Transition","TransitionStart"),transitioncancel:Zs("Transition","TransitionCancel"),transitionend:Zs("Transition","TransitionEnd")},Zd={},X_={};Fn&&(X_=document.createElement("div").style,"AnimationEvent"in window||(delete so.animationend.animation,delete so.animationiteration.animation,delete so.animationstart.animation),"TransitionEvent"in window||delete so.transitionend.transition);function ea(n){if(Zd[n])return Zd[n];if(!so[n])return n;var s=so[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in X_)return Zd[n]=s[o];return n}var W_=ea("animationend"),J_=ea("animationiteration"),Z_=ea("animationstart"),KR=ea("transitionrun"),QR=ea("transitionstart"),YR=ea("transitioncancel"),ev=ea("transitionend"),tv=new Map,em="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");em.push("scrollEnd");function dr(n,s){tv.set(n,s),Cr(s,[n])}var sh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Hn=[],ao=0,tm=0;function ah(){for(var n=ao,s=tm=ao=0;s<n;){var o=Hn[s];Hn[s++]=null;var u=Hn[s];Hn[s++]=null;var f=Hn[s];Hn[s++]=null;var m=Hn[s];if(Hn[s++]=null,u!==null&&f!==null){var v=u.pending;v===null?f.next=f:(f.next=v.next,v.next=f),u.pending=f}m!==0&&nv(o,f,m)}}function oh(n,s,o,u){Hn[ao++]=n,Hn[ao++]=s,Hn[ao++]=o,Hn[ao++]=u,tm|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function nm(n,s,o,u){return oh(n,s,o,u),lh(n)}function ta(n,s){return oh(n,null,null,s),lh(n)}function nv(n,s,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var f=!1,m=n.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&s!==null&&(f=31-At(o),n=m.hiddenUpdates,u=n[f],u===null?n[f]=[s]:u.push(s),s.lane=o|536870912),m):null}function lh(n){if(50<cu)throw cu=0,hp=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var oo={};function $R(n,s,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(n,s,o,u){return new $R(n,s,o,u)}function rm(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ai(n,s){var o=n.alternate;return o===null?(o=Cn(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function rv(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function uh(n,s,o,u,f,m){var v=0;if(u=n,typeof n=="function")rm(n)&&(v=1);else if(typeof n=="string")v=eC(n,o,le.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case D:return n=Cn(31,o,s,f),n.elementType=D,n.lanes=m,n;case L:return na(o.children,f,m,s);case k:v=8,f|=24;break;case ie:return n=Cn(12,o,s,f|2),n.elementType=ie,n.lanes=m,n;case he:return n=Cn(13,o,s,f),n.elementType=he,n.lanes=m,n;case oe:return n=Cn(19,o,s,f),n.elementType=oe,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case X:v=10;break e;case K:v=9;break e;case ue:v=11;break e;case C:v=14;break e;case w:v=16,u=null;break e}v=29,o=Error(i(130,n===null?"null":typeof n,"")),u=null}return s=Cn(v,o,s,f),s.elementType=n,s.type=u,s.lanes=m,s}function na(n,s,o,u){return n=Cn(7,n,u,s),n.lanes=o,n}function im(n,s,o){return n=Cn(6,n,null,s),n.lanes=o,n}function iv(n){var s=Cn(18,null,null,0);return s.stateNode=n,s}function sm(n,s,o){return s=Cn(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var sv=new WeakMap;function Gn(n,s){if(typeof n=="object"&&n!==null){var o=sv.get(n);return o!==void 0?o:(s={value:n,source:s,stack:vl(s)},sv.set(n,s),s)}return{value:n,source:s,stack:vl(s)}}var lo=[],uo=0,ch=null,ql=0,Kn=[],Qn=0,Hi=null,Lr=1,Ur="";function oi(n,s){lo[uo++]=ql,lo[uo++]=ch,ch=n,ql=s}function av(n,s,o){Kn[Qn++]=Lr,Kn[Qn++]=Ur,Kn[Qn++]=Hi,Hi=n;var u=Lr;n=Ur;var f=32-At(u)-1;u&=~(1<<f),o+=1;var m=32-At(s)+f;if(30<m){var v=f-f%5;m=(u&(1<<v)-1).toString(32),u>>=v,f-=v,Lr=1<<32-At(s)+f|o<<f|u,Ur=m+n}else Lr=1<<m|o<<f|u,Ur=n}function am(n){n.return!==null&&(oi(n,1),av(n,1,0))}function om(n){for(;n===ch;)ch=lo[--uo],lo[uo]=null,ql=lo[--uo],lo[uo]=null;for(;n===Hi;)Hi=Kn[--Qn],Kn[Qn]=null,Ur=Kn[--Qn],Kn[Qn]=null,Lr=Kn[--Qn],Kn[Qn]=null}function ov(n,s){Kn[Qn++]=Lr,Kn[Qn++]=Ur,Kn[Qn++]=Hi,Lr=s.id,Ur=s.overflow,Hi=n}var Zt=null,ht=null,Ke=!1,Gi=null,Yn=!1,lm=Error(i(519));function Ki(n){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Hl(Gn(s,n)),lm}function lv(n){var s=n.stateNode,o=n.type,u=n.memoizedProps;switch(s[xt]=n,s[Qt]=u,o){case"dialog":ze("cancel",s),ze("close",s);break;case"iframe":case"object":case"embed":ze("load",s);break;case"video":case"audio":for(o=0;o<fu.length;o++)ze(fu[o],s);break;case"source":ze("error",s);break;case"img":case"image":case"link":ze("error",s),ze("load",s);break;case"details":ze("toggle",s);break;case"input":ze("invalid",s),qc(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":ze("invalid",s);break;case"textarea":ze("invalid",s),Li(s,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||wT(s.textContent,o)?(u.popover!=null&&(ze("beforetoggle",s),ze("toggle",s)),u.onScroll!=null&&ze("scroll",s),u.onScrollEnd!=null&&ze("scrollend",s),u.onClick!=null&&(s.onclick=lr),s=!0):s=!1,s||Ki(n,!0)}function uv(n){for(Zt=n.return;Zt;)switch(Zt.tag){case 5:case 31:case 13:Yn=!1;return;case 27:case 3:Yn=!0;return;default:Zt=Zt.return}}function co(n){if(n!==Zt)return!1;if(!Ke)return uv(n),Ke=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Ip(n.type,n.memoizedProps)),o=!o),o&&ht&&Ki(n),uv(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));ht=PT(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));ht=PT(n)}else s===27?(s=ht,as(n.type)?(n=xp,xp=null,ht=n):ht=s):ht=Zt?Xn(n.stateNode.nextSibling):null;return!0}function ra(){ht=Zt=null,Ke=!1}function um(){var n=Gi;return n!==null&&(bn===null?bn=n:bn.push.apply(bn,n),Gi=null),n}function Hl(n){Gi===null?Gi=[n]:Gi.push(n)}var cm=I(null),ia=null,li=null;function Qi(n,s,o){Z(cm,s._currentValue),s._currentValue=o}function ui(n){n._currentValue=cm.current,H(cm)}function hm(n,s,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===o)break;n=n.return}}function fm(n,s,o,u){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var v=f.child;m=m.firstContext;e:for(;m!==null;){var S=m;m=f;for(var O=0;O<s.length;O++)if(S.context===s[O]){m.lanes|=o,S=m.alternate,S!==null&&(S.lanes|=o),hm(m.return,o,n),u||(v=null);break e}m=S.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(i(341));v.lanes|=o,m=v.alternate,m!==null&&(m.lanes|=o),hm(v,o,n),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===n){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function ho(n,s,o,u){n=null;for(var f=s,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(i(387));if(v=v.memoizedProps,v!==null){var S=f.type;Rn(f.pendingProps.value,v.value)||(n!==null?n.push(S):n=[S])}}else if(f===me.current){if(v=f.alternate,v===null)throw Error(i(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(yu):n=[yu])}f=f.return}n!==null&&fm(s,n,o,u),s.flags|=262144}function hh(n){for(n=n.firstContext;n!==null;){if(!Rn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function sa(n){ia=n,li=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function en(n){return cv(ia,n)}function fh(n,s){return ia===null&&sa(n),cv(n,s)}function cv(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},li===null){if(n===null)throw Error(i(308));li=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else li=li.next=s;return o}var XR=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},WR=r.unstable_scheduleCallback,JR=r.unstable_NormalPriority,Pt={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function dm(){return{controller:new XR,data:new Map,refCount:0}}function Gl(n){n.refCount--,n.refCount===0&&WR(JR,function(){n.controller.abort()})}var Kl=null,mm=0,fo=0,mo=null;function ZR(n,s){if(Kl===null){var o=Kl=[];mm=0,fo=yp(),mo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return mm++,s.then(hv,hv),s}function hv(){if(--mm===0&&Kl!==null){mo!==null&&(mo.status="fulfilled");var n=Kl;Kl=null,fo=0,mo=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function e1(n,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var fv=J.S;J.S=function(n,s){$E=hn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&ZR(n,s),fv!==null&&fv(n,s)};var aa=I(null);function pm(){var n=aa.current;return n!==null?n:ct.pooledCache}function dh(n,s){s===null?Z(aa,aa.current):Z(aa,s.pool)}function dv(){var n=pm();return n===null?null:{parent:Pt._currentValue,pool:n}}var po=Error(i(460)),gm=Error(i(474)),mh=Error(i(542)),ph={then:function(){}};function mv(n){return n=n.status,n==="fulfilled"||n==="rejected"}function pv(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(lr,lr),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,yv(n),n;default:if(typeof s.status=="string")s.then(lr,lr);else{if(n=ct,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,yv(n),n}throw la=s,po}}function oa(n){try{var s=n._init;return s(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(la=o,po):o}}var la=null;function gv(){if(la===null)throw Error(i(459));var n=la;return la=null,n}function yv(n){if(n===po||n===mh)throw Error(i(483))}var go=null,Ql=0;function gh(n){var s=Ql;return Ql+=1,go===null&&(go=[]),pv(go,n,s)}function Yl(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function yh(n,s){throw s.$$typeof===b?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function _v(n){function s(j,M){if(n){var G=j.deletions;G===null?(j.deletions=[M],j.flags|=16):G.push(M)}}function o(j,M){if(!n)return null;for(;M!==null;)s(j,M),M=M.sibling;return null}function u(j){for(var M=new Map;j!==null;)j.key!==null?M.set(j.key,j):M.set(j.index,j),j=j.sibling;return M}function f(j,M){return j=ai(j,M),j.index=0,j.sibling=null,j}function m(j,M,G){return j.index=G,n?(G=j.alternate,G!==null?(G=G.index,G<M?(j.flags|=67108866,M):G):(j.flags|=67108866,M)):(j.flags|=1048576,M)}function v(j){return n&&j.alternate===null&&(j.flags|=67108866),j}function S(j,M,G,se){return M===null||M.tag!==6?(M=im(G,j.mode,se),M.return=j,M):(M=f(M,G),M.return=j,M)}function O(j,M,G,se){var Ie=G.type;return Ie===L?ne(j,M,G.props.children,se,G.key):M!==null&&(M.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===w&&oa(Ie)===M.type)?(M=f(M,G.props),Yl(M,G),M.return=j,M):(M=uh(G.type,G.key,G.props,null,j.mode,se),Yl(M,G),M.return=j,M)}function Q(j,M,G,se){return M===null||M.tag!==4||M.stateNode.containerInfo!==G.containerInfo||M.stateNode.implementation!==G.implementation?(M=sm(G,j.mode,se),M.return=j,M):(M=f(M,G.children||[]),M.return=j,M)}function ne(j,M,G,se,Ie){return M===null||M.tag!==7?(M=na(G,j.mode,se,Ie),M.return=j,M):(M=f(M,G),M.return=j,M)}function ae(j,M,G){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=im(""+M,j.mode,G),M.return=j,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case V:return G=uh(M.type,M.key,M.props,null,j.mode,G),Yl(G,M),G.return=j,G;case B:return M=sm(M,j.mode,G),M.return=j,M;case w:return M=oa(M),ae(j,M,G)}if(ut(M)||U(M))return M=na(M,j.mode,G,null),M.return=j,M;if(typeof M.then=="function")return ae(j,gh(M),G);if(M.$$typeof===X)return ae(j,fh(j,M),G);yh(j,M)}return null}function Y(j,M,G,se){var Ie=M!==null?M.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return Ie!==null?null:S(j,M,""+G,se);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case V:return G.key===Ie?O(j,M,G,se):null;case B:return G.key===Ie?Q(j,M,G,se):null;case w:return G=oa(G),Y(j,M,G,se)}if(ut(G)||U(G))return Ie!==null?null:ne(j,M,G,se,null);if(typeof G.then=="function")return Y(j,M,gh(G),se);if(G.$$typeof===X)return Y(j,M,fh(j,G),se);yh(j,G)}return null}function W(j,M,G,se,Ie){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return j=j.get(G)||null,S(M,j,""+se,Ie);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case V:return j=j.get(se.key===null?G:se.key)||null,O(M,j,se,Ie);case B:return j=j.get(se.key===null?G:se.key)||null,Q(M,j,se,Ie);case w:return se=oa(se),W(j,M,G,se,Ie)}if(ut(se)||U(se))return j=j.get(G)||null,ne(M,j,se,Ie,null);if(typeof se.then=="function")return W(j,M,G,gh(se),Ie);if(se.$$typeof===X)return W(j,M,G,fh(M,se),Ie);yh(M,se)}return null}function Te(j,M,G,se){for(var Ie=null,Ye=null,Ae=M,ke=M=0,Fe=null;Ae!==null&&ke<G.length;ke++){Ae.index>ke?(Fe=Ae,Ae=null):Fe=Ae.sibling;var $e=Y(j,Ae,G[ke],se);if($e===null){Ae===null&&(Ae=Fe);break}n&&Ae&&$e.alternate===null&&s(j,Ae),M=m($e,M,ke),Ye===null?Ie=$e:Ye.sibling=$e,Ye=$e,Ae=Fe}if(ke===G.length)return o(j,Ae),Ke&&oi(j,ke),Ie;if(Ae===null){for(;ke<G.length;ke++)Ae=ae(j,G[ke],se),Ae!==null&&(M=m(Ae,M,ke),Ye===null?Ie=Ae:Ye.sibling=Ae,Ye=Ae);return Ke&&oi(j,ke),Ie}for(Ae=u(Ae);ke<G.length;ke++)Fe=W(Ae,j,ke,G[ke],se),Fe!==null&&(n&&Fe.alternate!==null&&Ae.delete(Fe.key===null?ke:Fe.key),M=m(Fe,M,ke),Ye===null?Ie=Fe:Ye.sibling=Fe,Ye=Fe);return n&&Ae.forEach(function(hs){return s(j,hs)}),Ke&&oi(j,ke),Ie}function De(j,M,G,se){if(G==null)throw Error(i(151));for(var Ie=null,Ye=null,Ae=M,ke=M=0,Fe=null,$e=G.next();Ae!==null&&!$e.done;ke++,$e=G.next()){Ae.index>ke?(Fe=Ae,Ae=null):Fe=Ae.sibling;var hs=Y(j,Ae,$e.value,se);if(hs===null){Ae===null&&(Ae=Fe);break}n&&Ae&&hs.alternate===null&&s(j,Ae),M=m(hs,M,ke),Ye===null?Ie=hs:Ye.sibling=hs,Ye=hs,Ae=Fe}if($e.done)return o(j,Ae),Ke&&oi(j,ke),Ie;if(Ae===null){for(;!$e.done;ke++,$e=G.next())$e=ae(j,$e.value,se),$e!==null&&(M=m($e,M,ke),Ye===null?Ie=$e:Ye.sibling=$e,Ye=$e);return Ke&&oi(j,ke),Ie}for(Ae=u(Ae);!$e.done;ke++,$e=G.next())$e=W(Ae,j,ke,$e.value,se),$e!==null&&(n&&$e.alternate!==null&&Ae.delete($e.key===null?ke:$e.key),M=m($e,M,ke),Ye===null?Ie=$e:Ye.sibling=$e,Ye=$e);return n&&Ae.forEach(function(hC){return s(j,hC)}),Ke&&oi(j,ke),Ie}function lt(j,M,G,se){if(typeof G=="object"&&G!==null&&G.type===L&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case V:e:{for(var Ie=G.key;M!==null;){if(M.key===Ie){if(Ie=G.type,Ie===L){if(M.tag===7){o(j,M.sibling),se=f(M,G.props.children),se.return=j,j=se;break e}}else if(M.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===w&&oa(Ie)===M.type){o(j,M.sibling),se=f(M,G.props),Yl(se,G),se.return=j,j=se;break e}o(j,M);break}else s(j,M);M=M.sibling}G.type===L?(se=na(G.props.children,j.mode,se,G.key),se.return=j,j=se):(se=uh(G.type,G.key,G.props,null,j.mode,se),Yl(se,G),se.return=j,j=se)}return v(j);case B:e:{for(Ie=G.key;M!==null;){if(M.key===Ie)if(M.tag===4&&M.stateNode.containerInfo===G.containerInfo&&M.stateNode.implementation===G.implementation){o(j,M.sibling),se=f(M,G.children||[]),se.return=j,j=se;break e}else{o(j,M);break}else s(j,M);M=M.sibling}se=sm(G,j.mode,se),se.return=j,j=se}return v(j);case w:return G=oa(G),lt(j,M,G,se)}if(ut(G))return Te(j,M,G,se);if(U(G)){if(Ie=U(G),typeof Ie!="function")throw Error(i(150));return G=Ie.call(G),De(j,M,G,se)}if(typeof G.then=="function")return lt(j,M,gh(G),se);if(G.$$typeof===X)return lt(j,M,fh(j,G),se);yh(j,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,M!==null&&M.tag===6?(o(j,M.sibling),se=f(M,G),se.return=j,j=se):(o(j,M),se=im(G,j.mode,se),se.return=j,j=se),v(j)):o(j,M)}return function(j,M,G,se){try{Ql=0;var Ie=lt(j,M,G,se);return go=null,Ie}catch(Ae){if(Ae===po||Ae===mh)throw Ae;var Ye=Cn(29,Ae,null,j.mode);return Ye.lanes=se,Ye.return=j,Ye}}}var ua=_v(!0),vv=_v(!1),Yi=!1;function ym(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _m(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function $i(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Xi(n,s,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(We&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=lh(n),nv(n,null,o),s}return oh(n,u,s,o),lh(n)}function $l(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,bl(n,o)}}function vm(n,s){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var v={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=v:m=m.next=v,o=o.next}while(o!==null);m===null?f=m=s:m=m.next=s}else f=m=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var Em=!1;function Xl(){if(Em){var n=mo;if(n!==null)throw n}}function Wl(n,s,o,u){Em=!1;var f=n.updateQueue;Yi=!1;var m=f.firstBaseUpdate,v=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var O=S,Q=O.next;O.next=null,v===null?m=Q:v.next=Q,v=O;var ne=n.alternate;ne!==null&&(ne=ne.updateQueue,S=ne.lastBaseUpdate,S!==v&&(S===null?ne.firstBaseUpdate=Q:S.next=Q,ne.lastBaseUpdate=O))}if(m!==null){var ae=f.baseState;v=0,ne=Q=O=null,S=m;do{var Y=S.lane&-536870913,W=Y!==S.lane;if(W?(Be&Y)===Y:(u&Y)===Y){Y!==0&&Y===fo&&(Em=!0),ne!==null&&(ne=ne.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var Te=n,De=S;Y=s;var lt=o;switch(De.tag){case 1:if(Te=De.payload,typeof Te=="function"){ae=Te.call(lt,ae,Y);break e}ae=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=De.payload,Y=typeof Te=="function"?Te.call(lt,ae,Y):Te,Y==null)break e;ae=T({},ae,Y);break e;case 2:Yi=!0}}Y=S.callback,Y!==null&&(n.flags|=64,W&&(n.flags|=8192),W=f.callbacks,W===null?f.callbacks=[Y]:W.push(Y))}else W={lane:Y,tag:S.tag,payload:S.payload,callback:S.callback,next:null},ne===null?(Q=ne=W,O=ae):ne=ne.next=W,v|=Y;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;W=S,S=W.next,W.next=null,f.lastBaseUpdate=W,f.shared.pending=null}}while(!0);ne===null&&(O=ae),f.baseState=O,f.firstBaseUpdate=Q,f.lastBaseUpdate=ne,m===null&&(f.shared.lanes=0),ts|=v,n.lanes=v,n.memoizedState=ae}}function Ev(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function Tv(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Ev(o[n],s)}var yo=I(null),_h=I(0);function bv(n,s){n=_i,Z(_h,n),Z(yo,s),_i=n|s.baseLanes}function Tm(){Z(_h,_i),Z(yo,yo.current)}function bm(){_i=_h.current,H(yo),H(_h)}var Dn=I(null),$n=null;function Wi(n){var s=n.alternate;Z(It,It.current&1),Z(Dn,n),$n===null&&(s===null||yo.current!==null||s.memoizedState!==null)&&($n=n)}function Sm(n){Z(It,It.current),Z(Dn,n),$n===null&&($n=n)}function Sv(n){n.tag===22?(Z(It,It.current),Z(Dn,n),$n===null&&($n=n)):Ji()}function Ji(){Z(It,It.current),Z(Dn,Dn.current)}function Nn(n){H(Dn),$n===n&&($n=null),H(It)}var It=I(0);function vh(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Dp(o)||Np(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ci=0,Me=null,at=null,Mt=null,Eh=!1,_o=!1,ca=!1,Th=0,Jl=0,vo=null,t1=0;function vt(){throw Error(i(321))}function Am(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!Rn(n[o],s[o]))return!1;return!0}function wm(n,s,o,u,f,m){return ci=m,Me=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,J.H=n===null||n.memoizedState===null?aE:zm,ca=!1,m=o(u,f),ca=!1,_o&&(m=wv(s,o,u,f)),Av(n),m}function Av(n){J.H=tu;var s=at!==null&&at.next!==null;if(ci=0,Mt=at=Me=null,Eh=!1,Jl=0,vo=null,s)throw Error(i(300));n===null||kt||(n=n.dependencies,n!==null&&hh(n)&&(kt=!0))}function wv(n,s,o,u){Me=n;var f=0;do{if(_o&&(vo=null),Jl=0,_o=!1,25<=f)throw Error(i(301));if(f+=1,Mt=at=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}J.H=oE,m=s(o,u)}while(_o);return m}function n1(){var n=J.H,s=n.useState()[0];return s=typeof s.then=="function"?Zl(s):s,n=n.useState()[0],(at!==null?at.memoizedState:null)!==n&&(Me.flags|=1024),s}function Im(){var n=Th!==0;return Th=0,n}function Rm(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function Cm(n){if(Eh){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Eh=!1}ci=0,Mt=at=Me=null,_o=!1,Jl=Th=0,vo=null}function dn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?Me.memoizedState=Mt=n:Mt=Mt.next=n,Mt}function Rt(){if(at===null){var n=Me.alternate;n=n!==null?n.memoizedState:null}else n=at.next;var s=Mt===null?Me.memoizedState:Mt.next;if(s!==null)Mt=s,at=n;else{if(n===null)throw Me.alternate===null?Error(i(467)):Error(i(310));at=n,n={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},Mt===null?Me.memoizedState=Mt=n:Mt=Mt.next=n}return Mt}function bh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zl(n){var s=Jl;return Jl+=1,vo===null&&(vo=[]),n=pv(vo,n,s),s=Me,(Mt===null?s.memoizedState:Mt.next)===null&&(s=s.alternate,J.H=s===null||s.memoizedState===null?aE:zm),n}function Sh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Zl(n);if(n.$$typeof===X)return en(n)}throw Error(i(438,String(n)))}function Dm(n){var s=null,o=Me.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=Me.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=bh(),Me.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),u=0;u<n;u++)o[u]=P;return s.index++,o}function hi(n,s){return typeof s=="function"?s(n):s}function Ah(n){var s=Rt();return Nm(s,at,n)}function Nm(n,s,o){var u=n.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var f=n.baseQueue,m=u.pending;if(m!==null){if(f!==null){var v=f.next;f.next=m.next,m.next=v}s.baseQueue=f=m,u.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{s=f.next;var S=v=null,O=null,Q=s,ne=!1;do{var ae=Q.lane&-536870913;if(ae!==Q.lane?(Be&ae)===ae:(ci&ae)===ae){var Y=Q.revertLane;if(Y===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),ae===fo&&(ne=!0);else if((ci&Y)===Y){Q=Q.next,Y===fo&&(ne=!0);continue}else ae={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},O===null?(S=O=ae,v=m):O=O.next=ae,Me.lanes|=Y,ts|=Y;ae=Q.action,ca&&o(m,ae),m=Q.hasEagerState?Q.eagerState:o(m,ae)}else Y={lane:ae,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},O===null?(S=O=Y,v=m):O=O.next=Y,Me.lanes|=ae,ts|=ae;Q=Q.next}while(Q!==null&&Q!==s);if(O===null?v=m:O.next=S,!Rn(m,n.memoizedState)&&(kt=!0,ne&&(o=mo,o!==null)))throw o;n.memoizedState=m,n.baseState=v,n.baseQueue=O,u.lastRenderedState=m}return f===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function xm(n){var s=Rt(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var u=o.dispatch,f=o.pending,m=s.memoizedState;if(f!==null){o.pending=null;var v=f=f.next;do m=n(m,v.action),v=v.next;while(v!==f);Rn(m,s.memoizedState)||(kt=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),o.lastRenderedState=m}return[m,u]}function Iv(n,s,o){var u=Me,f=Rt(),m=Ke;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=s();var v=!Rn((at||f).memoizedState,o);if(v&&(f.memoizedState=o,kt=!0),f=f.queue,Pm(Dv.bind(null,u,f,n),[n]),f.getSnapshot!==s||v||Mt!==null&&Mt.memoizedState.tag&1){if(u.flags|=2048,Eo(9,{destroy:void 0},Cv.bind(null,u,f,o,s),null),ct===null)throw Error(i(349));m||(ci&127)!==0||Rv(u,s,o)}return o}function Rv(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=Me.updateQueue,s===null?(s=bh(),Me.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function Cv(n,s,o,u){s.value=o,s.getSnapshot=u,Nv(s)&&xv(n)}function Dv(n,s,o){return o(function(){Nv(s)&&xv(n)})}function Nv(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!Rn(n,o)}catch{return!0}}function xv(n){var s=ta(n,2);s!==null&&Sn(s,n,2)}function Om(n){var s=dn();if(typeof n=="function"){var o=n;if(n=o(),ca){jn(!0);try{o()}finally{jn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:n},s}function Ov(n,s,o,u){return n.baseState=o,Nm(n,at,typeof u=="function"?u:hi)}function r1(n,s,o,u,f){if(Rh(n))throw Error(i(485));if(n=s.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};J.T!==null?o(!0):m.isTransition=!1,u(m),o=s.pending,o===null?(m.next=s.pending=m,Vv(s,m)):(m.next=o.next,s.pending=o.next=m)}}function Vv(n,s){var o=s.action,u=s.payload,f=n.state;if(s.isTransition){var m=J.T,v={};J.T=v;try{var S=o(f,u),O=J.S;O!==null&&O(v,S),Pv(n,s,S)}catch(Q){Vm(n,s,Q)}finally{m!==null&&v.types!==null&&(m.types=v.types),J.T=m}}else try{m=o(f,u),Pv(n,s,m)}catch(Q){Vm(n,s,Q)}}function Pv(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Mv(n,s,u)},function(u){return Vm(n,s,u)}):Mv(n,s,o)}function Mv(n,s,o){s.status="fulfilled",s.value=o,kv(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,Vv(n,o)))}function Vm(n,s,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,kv(s),s=s.next;while(s!==u)}n.action=null}function kv(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function Lv(n,s){return s}function Uv(n,s){if(Ke){var o=ct.formState;if(o!==null){e:{var u=Me;if(Ke){if(ht){t:{for(var f=ht,m=Yn;f.nodeType!==8;){if(!m){f=null;break t}if(f=Xn(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){ht=Xn(f.nextSibling),u=f.data==="F!";break e}}Ki(u)}u=!1}u&&(s=o[0])}}return o=dn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lv,lastRenderedState:s},o.queue=u,o=rE.bind(null,Me,u),u.dispatch=o,u=Om(!1),m=jm.bind(null,Me,!1,u.queue),u=dn(),f={state:s,dispatch:null,action:n,pending:null},u.queue=f,o=r1.bind(null,Me,f,m,o),f.dispatch=o,u.memoizedState=n,[s,o,!1]}function jv(n){var s=Rt();return zv(s,at,n)}function zv(n,s,o){if(s=Nm(n,s,Lv)[0],n=Ah(hi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Zl(s)}catch(v){throw v===po?mh:v}else u=s;s=Rt();var f=s.queue,m=f.dispatch;return o!==s.memoizedState&&(Me.flags|=2048,Eo(9,{destroy:void 0},i1.bind(null,f,o),null)),[u,m,n]}function i1(n,s){n.action=s}function Bv(n){var s=Rt(),o=at;if(o!==null)return zv(s,o,n);Rt(),s=s.memoizedState,o=Rt();var u=o.queue.dispatch;return o.memoizedState=n,[s,u,!1]}function Eo(n,s,o,u){return n={tag:n,create:o,deps:u,inst:s,next:null},s=Me.updateQueue,s===null&&(s=bh(),Me.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,s.lastEffect=n),n}function Fv(){return Rt().memoizedState}function wh(n,s,o,u){var f=dn();Me.flags|=n,f.memoizedState=Eo(1|s,{destroy:void 0},o,u===void 0?null:u)}function Ih(n,s,o,u){var f=Rt();u=u===void 0?null:u;var m=f.memoizedState.inst;at!==null&&u!==null&&Am(u,at.memoizedState.deps)?f.memoizedState=Eo(s,m,o,u):(Me.flags|=n,f.memoizedState=Eo(1|s,m,o,u))}function qv(n,s){wh(8390656,8,n,s)}function Pm(n,s){Ih(2048,8,n,s)}function s1(n){Me.flags|=4;var s=Me.updateQueue;if(s===null)s=bh(),Me.updateQueue=s,s.events=[n];else{var o=s.events;o===null?s.events=[n]:o.push(n)}}function Hv(n){var s=Rt().memoizedState;return s1({ref:s,nextImpl:n}),function(){if((We&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function Gv(n,s){return Ih(4,2,n,s)}function Kv(n,s){return Ih(4,4,n,s)}function Qv(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Yv(n,s,o){o=o!=null?o.concat([n]):null,Ih(4,4,Qv.bind(null,s,n),o)}function Mm(){}function $v(n,s){var o=Rt();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&Am(s,u[1])?u[0]:(o.memoizedState=[n,s],n)}function Xv(n,s){var o=Rt();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&Am(s,u[1]))return u[0];if(u=n(),ca){jn(!0);try{n()}finally{jn(!1)}}return o.memoizedState=[u,s],u}function km(n,s,o){return o===void 0||(ci&1073741824)!==0&&(Be&261930)===0?n.memoizedState=s:(n.memoizedState=o,n=WE(),Me.lanes|=n,ts|=n,o)}function Wv(n,s,o,u){return Rn(o,s)?o:yo.current!==null?(n=km(n,o,u),Rn(n,s)||(kt=!0),n):(ci&42)===0||(ci&1073741824)!==0&&(Be&261930)===0?(kt=!0,n.memoizedState=o):(n=WE(),Me.lanes|=n,ts|=n,s)}function Jv(n,s,o,u,f){var m=fe.p;fe.p=m!==0&&8>m?m:8;var v=J.T,S={};J.T=S,jm(n,!1,s,o);try{var O=f(),Q=J.S;if(Q!==null&&Q(S,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var ne=e1(O,u);eu(n,s,ne,Vn(n))}else eu(n,s,u,Vn(n))}catch(ae){eu(n,s,{then:function(){},status:"rejected",reason:ae},Vn())}finally{fe.p=m,v!==null&&S.types!==null&&(v.types=S.types),J.T=v}}function a1(){}function Lm(n,s,o,u){if(n.tag!==5)throw Error(i(476));var f=Zv(n).queue;Jv(n,f,s,_e,o===null?a1:function(){return eE(n),o(u)})}function Zv(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:_e},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function eE(n){var s=Zv(n);s.next===null&&(s=n.alternate.memoizedState),eu(n,s.next.queue,{},Vn())}function Um(){return en(yu)}function tE(){return Rt().memoizedState}function nE(){return Rt().memoizedState}function o1(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=Vn();n=$i(o);var u=Xi(s,n,o);u!==null&&(Sn(u,s,o),$l(u,s,o)),s={cache:dm()},n.payload=s;return}s=s.return}}function l1(n,s,o){var u=Vn();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Rh(n)?iE(s,o):(o=nm(n,s,o,u),o!==null&&(Sn(o,n,u),sE(o,s,u)))}function rE(n,s,o){var u=Vn();eu(n,s,o,u)}function eu(n,s,o,u){var f={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Rh(n))iE(s,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var v=s.lastRenderedState,S=m(v,o);if(f.hasEagerState=!0,f.eagerState=S,Rn(S,v))return oh(n,s,f,0),ct===null&&ah(),!1}catch{}if(o=nm(n,s,f,u),o!==null)return Sn(o,n,u),sE(o,s,u),!0}return!1}function jm(n,s,o,u){if(u={lane:2,revertLane:yp(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Rh(n)){if(s)throw Error(i(479))}else s=nm(n,o,u,2),s!==null&&Sn(s,n,2)}function Rh(n){var s=n.alternate;return n===Me||s!==null&&s===Me}function iE(n,s){_o=Eh=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function sE(n,s,o){if((o&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,bl(n,o)}}var tu={readContext:en,use:Sh,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useLayoutEffect:vt,useInsertionEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useSyncExternalStore:vt,useId:vt,useHostTransitionStatus:vt,useFormState:vt,useActionState:vt,useOptimistic:vt,useMemoCache:vt,useCacheRefresh:vt};tu.useEffectEvent=vt;var aE={readContext:en,use:Sh,useCallback:function(n,s){return dn().memoizedState=[n,s===void 0?null:s],n},useContext:en,useEffect:qv,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,wh(4194308,4,Qv.bind(null,s,n),o)},useLayoutEffect:function(n,s){return wh(4194308,4,n,s)},useInsertionEffect:function(n,s){wh(4,2,n,s)},useMemo:function(n,s){var o=dn();s=s===void 0?null:s;var u=n();if(ca){jn(!0);try{n()}finally{jn(!1)}}return o.memoizedState=[u,s],u},useReducer:function(n,s,o){var u=dn();if(o!==void 0){var f=o(s);if(ca){jn(!0);try{o(s)}finally{jn(!1)}}}else f=s;return u.memoizedState=u.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},u.queue=n,n=n.dispatch=l1.bind(null,Me,n),[u.memoizedState,n]},useRef:function(n){var s=dn();return n={current:n},s.memoizedState=n},useState:function(n){n=Om(n);var s=n.queue,o=rE.bind(null,Me,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:Mm,useDeferredValue:function(n,s){var o=dn();return km(o,n,s)},useTransition:function(){var n=Om(!1);return n=Jv.bind(null,Me,n.queue,!0,!1),dn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var u=Me,f=dn();if(Ke){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),ct===null)throw Error(i(349));(Be&127)!==0||Rv(u,s,o)}f.memoizedState=o;var m={value:o,getSnapshot:s};return f.queue=m,qv(Dv.bind(null,u,m,n),[n]),u.flags|=2048,Eo(9,{destroy:void 0},Cv.bind(null,u,m,o,s),null),o},useId:function(){var n=dn(),s=ct.identifierPrefix;if(Ke){var o=Ur,u=Lr;o=(u&~(1<<32-At(u)-1)).toString(32)+o,s="_"+s+"R_"+o,o=Th++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=t1++,s="_"+s+"r_"+o.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:Um,useFormState:Uv,useActionState:Uv,useOptimistic:function(n){var s=dn();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=jm.bind(null,Me,!0,o),o.dispatch=s,[n,s]},useMemoCache:Dm,useCacheRefresh:function(){return dn().memoizedState=o1.bind(null,Me)},useEffectEvent:function(n){var s=dn(),o={impl:n};return s.memoizedState=o,function(){if((We&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},zm={readContext:en,use:Sh,useCallback:$v,useContext:en,useEffect:Pm,useImperativeHandle:Yv,useInsertionEffect:Gv,useLayoutEffect:Kv,useMemo:Xv,useReducer:Ah,useRef:Fv,useState:function(){return Ah(hi)},useDebugValue:Mm,useDeferredValue:function(n,s){var o=Rt();return Wv(o,at.memoizedState,n,s)},useTransition:function(){var n=Ah(hi)[0],s=Rt().memoizedState;return[typeof n=="boolean"?n:Zl(n),s]},useSyncExternalStore:Iv,useId:tE,useHostTransitionStatus:Um,useFormState:jv,useActionState:jv,useOptimistic:function(n,s){var o=Rt();return Ov(o,at,n,s)},useMemoCache:Dm,useCacheRefresh:nE};zm.useEffectEvent=Hv;var oE={readContext:en,use:Sh,useCallback:$v,useContext:en,useEffect:Pm,useImperativeHandle:Yv,useInsertionEffect:Gv,useLayoutEffect:Kv,useMemo:Xv,useReducer:xm,useRef:Fv,useState:function(){return xm(hi)},useDebugValue:Mm,useDeferredValue:function(n,s){var o=Rt();return at===null?km(o,n,s):Wv(o,at.memoizedState,n,s)},useTransition:function(){var n=xm(hi)[0],s=Rt().memoizedState;return[typeof n=="boolean"?n:Zl(n),s]},useSyncExternalStore:Iv,useId:tE,useHostTransitionStatus:Um,useFormState:Bv,useActionState:Bv,useOptimistic:function(n,s){var o=Rt();return at!==null?Ov(o,at,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Dm,useCacheRefresh:nE};oE.useEffectEvent=Hv;function Bm(n,s,o,u){s=n.memoizedState,o=o(u,s),o=o==null?s:T({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Fm={enqueueSetState:function(n,s,o){n=n._reactInternals;var u=Vn(),f=$i(u);f.payload=s,o!=null&&(f.callback=o),s=Xi(n,f,u),s!==null&&(Sn(s,n,u),$l(s,n,u))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var u=Vn(),f=$i(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=Xi(n,f,u),s!==null&&(Sn(s,n,u),$l(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=Vn(),u=$i(o);u.tag=2,s!=null&&(u.callback=s),s=Xi(n,u,o),s!==null&&(Sn(s,n,o),$l(s,n,o))}};function lE(n,s,o,u,f,m,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,m,v):s.prototype&&s.prototype.isPureReactComponent?!Bl(o,u)||!Bl(f,m):!0}function uE(n,s,o,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==n&&Fm.enqueueReplaceState(s,s.state,null)}function ha(n,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(n=n.defaultProps){o===s&&(o=T({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}function cE(n){sh(n)}function hE(n){console.error(n)}function fE(n){sh(n)}function Ch(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function dE(n,s,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function qm(n,s,o){return o=$i(o),o.tag=3,o.payload={element:null},o.callback=function(){Ch(n,s)},o}function mE(n){return n=$i(n),n.tag=3,n}function pE(n,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;n.payload=function(){return f(m)},n.callback=function(){dE(s,o,u)}}var v=o.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(n.callback=function(){dE(s,o,u),typeof f!="function"&&(ns===null?ns=new Set([this]):ns.add(this));var S=u.stack;this.componentDidCatch(u.value,{componentStack:S!==null?S:""})})}function u1(n,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&ho(s,o,f,!0),o=Dn.current,o!==null){switch(o.tag){case 31:case 13:return $n===null?zh():o.alternate===null&&Et===0&&(Et=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===ph?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),mp(n,u,f)),!1;case 22:return o.flags|=65536,u===ph?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),mp(n,u,f)),!1}throw Error(i(435,o.tag))}return mp(n,u,f),zh(),!1}if(Ke)return s=Dn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==lm&&(n=Error(i(422),{cause:u}),Hl(Gn(n,o)))):(u!==lm&&(s=Error(i(423),{cause:u}),Hl(Gn(s,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,u=Gn(u,o),f=qm(n.stateNode,u,f),vm(n,f),Et!==4&&(Et=2)),!1;var m=Error(i(520),{cause:u});if(m=Gn(m,o),uu===null?uu=[m]:uu.push(m),Et!==4&&(Et=2),s===null)return!0;u=Gn(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=qm(o.stateNode,u,n),vm(o,n),!1;case 1:if(s=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ns===null||!ns.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=mE(f),pE(f,n,o,u),vm(o,f),!1}o=o.return}while(o!==null);return!1}var Hm=Error(i(461)),kt=!1;function tn(n,s,o,u){s.child=n===null?vv(s,null,o,u):ua(s,n.child,o,u)}function gE(n,s,o,u,f){o=o.render;var m=s.ref;if("ref"in u){var v={};for(var S in u)S!=="ref"&&(v[S]=u[S])}else v=u;return sa(s),u=wm(n,s,o,v,m,f),S=Im(),n!==null&&!kt?(Rm(n,s,f),fi(n,s,f)):(Ke&&S&&am(s),s.flags|=1,tn(n,s,u,f),s.child)}function yE(n,s,o,u,f){if(n===null){var m=o.type;return typeof m=="function"&&!rm(m)&&m.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=m,_E(n,s,m,u,f)):(n=uh(o.type,null,u,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(m=n.child,!Jm(n,f)){var v=m.memoizedProps;if(o=o.compare,o=o!==null?o:Bl,o(v,u)&&n.ref===s.ref)return fi(n,s,f)}return s.flags|=1,n=ai(m,u),n.ref=s.ref,n.return=s,s.child=n}function _E(n,s,o,u,f){if(n!==null){var m=n.memoizedProps;if(Bl(m,u)&&n.ref===s.ref)if(kt=!1,s.pendingProps=u=m,Jm(n,f))(n.flags&131072)!==0&&(kt=!0);else return s.lanes=n.lanes,fi(n,s,f)}return Gm(n,s,o,u,f)}function vE(n,s,o,u){var f=u.children,m=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,n!==null){for(u=s.child=n.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~m}else u=0,s.child=null;return EE(n,s,m,o,u)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&dh(s,m!==null?m.cachePool:null),m!==null?bv(s,m):Tm(),Sv(s);else return u=s.lanes=536870912,EE(n,s,m!==null?m.baseLanes|o:o,o,u)}else m!==null?(dh(s,m.cachePool),bv(s,m),Ji(),s.memoizedState=null):(n!==null&&dh(s,null),Tm(),Ji());return tn(n,s,f,o),s.child}function nu(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function EE(n,s,o,u,f){var m=pm();return m=m===null?null:{parent:Pt._currentValue,pool:m},s.memoizedState={baseLanes:o,cachePool:m},n!==null&&dh(s,null),Tm(),Sv(s),n!==null&&ho(n,s,u,!0),s.childLanes=f,null}function Dh(n,s){return s=xh({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function TE(n,s,o){return ua(s,n.child,null,o),n=Dh(s,s.pendingProps),n.flags|=2,Nn(s),s.memoizedState=null,n}function c1(n,s,o){var u=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(Ke){if(u.mode==="hidden")return n=Dh(s,u),s.lanes=536870912,nu(null,n);if(Sm(s),(n=ht)?(n=VT(n,Yn),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Hi!==null?{id:Lr,overflow:Ur}:null,retryLane:536870912,hydrationErrors:null},o=iv(n),o.return=s,s.child=o,Zt=s,ht=null)):n=null,n===null)throw Ki(s);return s.lanes=536870912,null}return Dh(s,u)}var m=n.memoizedState;if(m!==null){var v=m.dehydrated;if(Sm(s),f)if(s.flags&256)s.flags&=-257,s=TE(n,s,o);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(i(558));else if(kt||ho(n,s,o,!1),f=(o&n.childLanes)!==0,kt||f){if(u=ct,u!==null&&(v=Sl(u,o),v!==0&&v!==m.retryLane))throw m.retryLane=v,ta(n,v),Sn(u,n,v),Hm;zh(),s=TE(n,s,o)}else n=m.treeContext,ht=Xn(v.nextSibling),Zt=s,Ke=!0,Gi=null,Yn=!1,n!==null&&ov(s,n),s=Dh(s,u),s.flags|=4096;return s}return n=ai(n.child,{mode:u.mode,children:u.children}),n.ref=s.ref,s.child=n,n.return=s,n}function Nh(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function Gm(n,s,o,u,f){return sa(s),o=wm(n,s,o,u,void 0,f),u=Im(),n!==null&&!kt?(Rm(n,s,f),fi(n,s,f)):(Ke&&u&&am(s),s.flags|=1,tn(n,s,o,f),s.child)}function bE(n,s,o,u,f,m){return sa(s),s.updateQueue=null,o=wv(s,u,o,f),Av(n),u=Im(),n!==null&&!kt?(Rm(n,s,m),fi(n,s,m)):(Ke&&u&&am(s),s.flags|=1,tn(n,s,o,m),s.child)}function SE(n,s,o,u,f){if(sa(s),s.stateNode===null){var m=oo,v=o.contextType;typeof v=="object"&&v!==null&&(m=en(v)),m=new o(u,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Fm,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=u,m.state=s.memoizedState,m.refs={},ym(s),v=o.contextType,m.context=typeof v=="object"&&v!==null?en(v):oo,m.state=s.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(Bm(s,o,v,u),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&Fm.enqueueReplaceState(m,m.state,null),Wl(s,u,m,f),Xl(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){m=s.stateNode;var S=s.memoizedProps,O=ha(o,S);m.props=O;var Q=m.context,ne=o.contextType;v=oo,typeof ne=="object"&&ne!==null&&(v=en(ne));var ae=o.getDerivedStateFromProps;ne=typeof ae=="function"||typeof m.getSnapshotBeforeUpdate=="function",S=s.pendingProps!==S,ne||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S||Q!==v)&&uE(s,m,u,v),Yi=!1;var Y=s.memoizedState;m.state=Y,Wl(s,u,m,f),Xl(),Q=s.memoizedState,S||Y!==Q||Yi?(typeof ae=="function"&&(Bm(s,o,ae,u),Q=s.memoizedState),(O=Yi||lE(s,o,O,u,Y,Q,v))?(ne||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=Q),m.props=u,m.state=Q,m.context=v,u=O):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{m=s.stateNode,_m(n,s),v=s.memoizedProps,ne=ha(o,v),m.props=ne,ae=s.pendingProps,Y=m.context,Q=o.contextType,O=oo,typeof Q=="object"&&Q!==null&&(O=en(Q)),S=o.getDerivedStateFromProps,(Q=typeof S=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==ae||Y!==O)&&uE(s,m,u,O),Yi=!1,Y=s.memoizedState,m.state=Y,Wl(s,u,m,f),Xl();var W=s.memoizedState;v!==ae||Y!==W||Yi||n!==null&&n.dependencies!==null&&hh(n.dependencies)?(typeof S=="function"&&(Bm(s,o,S,u),W=s.memoizedState),(ne=Yi||lE(s,o,ne,u,Y,W,O)||n!==null&&n.dependencies!==null&&hh(n.dependencies))?(Q||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,W,O),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,W,O)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===n.memoizedProps&&Y===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&Y===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=W),m.props=u,m.state=W,m.context=O,u=ne):(typeof m.componentDidUpdate!="function"||v===n.memoizedProps&&Y===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&Y===n.memoizedState||(s.flags|=1024),u=!1)}return m=u,Nh(n,s),u=(s.flags&128)!==0,m||u?(m=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,n!==null&&u?(s.child=ua(s,n.child,null,f),s.child=ua(s,null,o,f)):tn(n,s,o,f),s.memoizedState=m.state,n=s.child):n=fi(n,s,f),n}function AE(n,s,o,u){return ra(),s.flags|=256,tn(n,s,o,u),s.child}var Km={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qm(n){return{baseLanes:n,cachePool:dv()}}function Ym(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=On),n}function wE(n,s,o){var u=s.pendingProps,f=!1,m=(s.flags&128)!==0,v;if((v=m)||(v=n!==null&&n.memoizedState===null?!1:(It.current&2)!==0),v&&(f=!0,s.flags&=-129),v=(s.flags&32)!==0,s.flags&=-33,n===null){if(Ke){if(f?Wi(s):Ji(),(n=ht)?(n=VT(n,Yn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Hi!==null?{id:Lr,overflow:Ur}:null,retryLane:536870912,hydrationErrors:null},o=iv(n),o.return=s,s.child=o,Zt=s,ht=null)):n=null,n===null)throw Ki(s);return Np(n)?s.lanes=32:s.lanes=536870912,null}var S=u.children;return u=u.fallback,f?(Ji(),f=s.mode,S=xh({mode:"hidden",children:S},f),u=na(u,f,o,null),S.return=s,u.return=s,S.sibling=u,s.child=S,u=s.child,u.memoizedState=Qm(o),u.childLanes=Ym(n,v,o),s.memoizedState=Km,nu(null,u)):(Wi(s),$m(s,S))}var O=n.memoizedState;if(O!==null&&(S=O.dehydrated,S!==null)){if(m)s.flags&256?(Wi(s),s.flags&=-257,s=Xm(n,s,o)):s.memoizedState!==null?(Ji(),s.child=n.child,s.flags|=128,s=null):(Ji(),S=u.fallback,f=s.mode,u=xh({mode:"visible",children:u.children},f),S=na(S,f,o,null),S.flags|=2,u.return=s,S.return=s,u.sibling=S,s.child=u,ua(s,n.child,null,o),u=s.child,u.memoizedState=Qm(o),u.childLanes=Ym(n,v,o),s.memoizedState=Km,s=nu(null,u));else if(Wi(s),Np(S)){if(v=S.nextSibling&&S.nextSibling.dataset,v)var Q=v.dgst;v=Q,u=Error(i(419)),u.stack="",u.digest=v,Hl({value:u,source:null,stack:null}),s=Xm(n,s,o)}else if(kt||ho(n,s,o,!1),v=(o&n.childLanes)!==0,kt||v){if(v=ct,v!==null&&(u=Sl(v,o),u!==0&&u!==O.retryLane))throw O.retryLane=u,ta(n,u),Sn(v,n,u),Hm;Dp(S)||zh(),s=Xm(n,s,o)}else Dp(S)?(s.flags|=192,s.child=n.child,s=null):(n=O.treeContext,ht=Xn(S.nextSibling),Zt=s,Ke=!0,Gi=null,Yn=!1,n!==null&&ov(s,n),s=$m(s,u.children),s.flags|=4096);return s}return f?(Ji(),S=u.fallback,f=s.mode,O=n.child,Q=O.sibling,u=ai(O,{mode:"hidden",children:u.children}),u.subtreeFlags=O.subtreeFlags&65011712,Q!==null?S=ai(Q,S):(S=na(S,f,o,null),S.flags|=2),S.return=s,u.return=s,u.sibling=S,s.child=u,nu(null,u),u=s.child,S=n.child.memoizedState,S===null?S=Qm(o):(f=S.cachePool,f!==null?(O=Pt._currentValue,f=f.parent!==O?{parent:O,pool:O}:f):f=dv(),S={baseLanes:S.baseLanes|o,cachePool:f}),u.memoizedState=S,u.childLanes=Ym(n,v,o),s.memoizedState=Km,nu(n.child,u)):(Wi(s),o=n.child,n=o.sibling,o=ai(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,n!==null&&(v=s.deletions,v===null?(s.deletions=[n],s.flags|=16):v.push(n)),s.child=o,s.memoizedState=null,o)}function $m(n,s){return s=xh({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function xh(n,s){return n=Cn(22,n,null,s),n.lanes=0,n}function Xm(n,s,o){return ua(s,n.child,null,o),n=$m(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function IE(n,s,o){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),hm(n.return,s,o)}function Wm(n,s,o,u,f,m){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f,treeForkCount:m}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=u,v.tail=o,v.tailMode=f,v.treeForkCount=m)}function RE(n,s,o){var u=s.pendingProps,f=u.revealOrder,m=u.tail;u=u.children;var v=It.current,S=(v&2)!==0;if(S?(v=v&1|2,s.flags|=128):v&=1,Z(It,v),tn(n,s,u,o),u=Ke?ql:0,!S&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&IE(n,o,s);else if(n.tag===19)IE(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(o=s.child,f=null;o!==null;)n=o.alternate,n!==null&&vh(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),Wm(s,!1,f,o,m,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&vh(n)===null){s.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}Wm(s,!0,o,null,m,u);break;case"together":Wm(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function fi(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),ts|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(ho(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,o=ai(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=ai(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function Jm(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&hh(n)))}function h1(n,s,o){switch(s.tag){case 3:Se(s,s.stateNode.containerInfo),Qi(s,Pt,n.memoizedState.cache),ra();break;case 27:case 5:Ce(s);break;case 4:Se(s,s.stateNode.containerInfo);break;case 10:Qi(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Sm(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Wi(s),s.flags|=128,null):(o&s.child.childLanes)!==0?wE(n,s,o):(Wi(s),n=fi(n,s,o),n!==null?n.sibling:null);Wi(s);break;case 19:var f=(n.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(ho(n,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return RE(n,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Z(It,It.current),u)break;return null;case 22:return s.lanes=0,vE(n,s,o,s.pendingProps);case 24:Qi(s,Pt,n.memoizedState.cache)}return fi(n,s,o)}function CE(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)kt=!0;else{if(!Jm(n,o)&&(s.flags&128)===0)return kt=!1,h1(n,s,o);kt=(n.flags&131072)!==0}else kt=!1,Ke&&(s.flags&1048576)!==0&&av(s,ql,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(n=oa(s.elementType),s.type=n,typeof n=="function")rm(n)?(u=ha(n,u),s.tag=1,s=SE(null,s,n,u,o)):(s.tag=0,s=Gm(null,s,n,u,o));else{if(n!=null){var f=n.$$typeof;if(f===ue){s.tag=11,s=gE(null,s,n,u,o);break e}else if(f===C){s.tag=14,s=yE(null,s,n,u,o);break e}}throw s=Le(n)||n,Error(i(306,s,""))}}return s;case 0:return Gm(n,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=ha(u,s.pendingProps),SE(n,s,u,f,o);case 3:e:{if(Se(s,s.stateNode.containerInfo),n===null)throw Error(i(387));u=s.pendingProps;var m=s.memoizedState;f=m.element,_m(n,s),Wl(s,u,null,o);var v=s.memoizedState;if(u=v.cache,Qi(s,Pt,u),u!==m.cache&&fm(s,[Pt],o,!0),Xl(),u=v.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:v.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=AE(n,s,u,o);break e}else if(u!==f){f=Gn(Error(i(424)),s),Hl(f),s=AE(n,s,u,o);break e}else for(n=s.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,ht=Xn(n.firstChild),Zt=s,Ke=!0,Gi=null,Yn=!0,o=vv(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(ra(),u===f){s=fi(n,s,o);break e}tn(n,s,u,o)}s=s.child}return s;case 26:return Nh(n,s),n===null?(o=jT(s.type,null,s.pendingProps,null))?s.memoizedState=o:Ke||(o=s.type,n=s.pendingProps,u=Qh(ve.current).createElement(o),u[xt]=s,u[Qt]=n,nn(u,o,n),Ot(u),s.stateNode=u):s.memoizedState=jT(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Ce(s),n===null&&Ke&&(u=s.stateNode=kT(s.type,s.pendingProps,ve.current),Zt=s,Yn=!0,f=ht,as(s.type)?(xp=f,ht=Xn(u.firstChild)):ht=f),tn(n,s,s.pendingProps.children,o),Nh(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Ke&&((f=u=ht)&&(u=B1(u,s.type,s.pendingProps,Yn),u!==null?(s.stateNode=u,Zt=s,ht=Xn(u.firstChild),Yn=!1,f=!0):f=!1),f||Ki(s)),Ce(s),f=s.type,m=s.pendingProps,v=n!==null?n.memoizedProps:null,u=m.children,Ip(f,m)?u=null:v!==null&&Ip(f,v)&&(s.flags|=32),s.memoizedState!==null&&(f=wm(n,s,n1,null,null,o),yu._currentValue=f),Nh(n,s),tn(n,s,u,o),s.child;case 6:return n===null&&Ke&&((n=o=ht)&&(o=F1(o,s.pendingProps,Yn),o!==null?(s.stateNode=o,Zt=s,ht=null,n=!0):n=!1),n||Ki(s)),null;case 13:return wE(n,s,o);case 4:return Se(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=ua(s,null,u,o):tn(n,s,u,o),s.child;case 11:return gE(n,s,s.type,s.pendingProps,o);case 7:return tn(n,s,s.pendingProps,o),s.child;case 8:return tn(n,s,s.pendingProps.children,o),s.child;case 12:return tn(n,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,Qi(s,s.type,u.value),tn(n,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,sa(s),f=en(f),u=u(f),s.flags|=1,tn(n,s,u,o),s.child;case 14:return yE(n,s,s.type,s.pendingProps,o);case 15:return _E(n,s,s.type,s.pendingProps,o);case 19:return RE(n,s,o);case 31:return c1(n,s,o);case 22:return vE(n,s,o,s.pendingProps);case 24:return sa(s),u=en(Pt),n===null?(f=pm(),f===null&&(f=ct,m=dm(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),s.memoizedState={parent:u,cache:f},ym(s),Qi(s,Pt,f)):((n.lanes&o)!==0&&(_m(n,s),Wl(s,null,null,o),Xl()),f=n.memoizedState,m=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Qi(s,Pt,u)):(u=m.cache,Qi(s,Pt,u),u!==f.cache&&fm(s,[Pt],o,!0))),tn(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function di(n){n.flags|=4}function Zm(n,s,o,u,f){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(tT())n.flags|=8192;else throw la=ph,gm}else n.flags&=-16777217}function DE(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!HT(s))if(tT())n.flags|=8192;else throw la=ph,gm}function Oh(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Uc():536870912,n.lanes|=s,Ao|=s)}function ru(n,s){if(!Ke)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function ft(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(s)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=o,s}function f1(n,s,o){var u=s.pendingProps;switch(om(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(s),null;case 1:return ft(s),null;case 3:return o=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),ui(Pt),ye(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(co(s)?di(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,um())),ft(s),null;case 26:var f=s.type,m=s.memoizedState;return n===null?(di(s),m!==null?(ft(s),DE(s,m)):(ft(s),Zm(s,f,null,u,o))):m?m!==n.memoizedState?(di(s),ft(s),DE(s,m)):(ft(s),s.flags&=-16777217):(n=n.memoizedProps,n!==u&&di(s),ft(s),Zm(s,f,n,u,o)),null;case 27:if(Ge(s),o=ve.current,f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&di(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return ft(s),null}n=le.current,co(s)?lv(s):(n=kT(f,u,o),s.stateNode=n,di(s))}return ft(s),null;case 5:if(Ge(s),f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&di(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return ft(s),null}if(m=le.current,co(s))lv(s);else{var v=Qh(ve.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof u.is=="string"?v.createElement("select",{is:u.is}):v.createElement("select"),u.multiple?m.multiple=!0:u.size&&(m.size=u.size);break;default:m=typeof u.is=="string"?v.createElement(f,{is:u.is}):v.createElement(f)}}m[xt]=s,m[Qt]=u;e:for(v=s.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===s)break e;for(;v.sibling===null;){if(v.return===null||v.return===s)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}s.stateNode=m;e:switch(nn(m,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&di(s)}}return ft(s),Zm(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,o),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&di(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(n=ve.current,co(s)){if(n=s.stateNode,o=s.memoizedProps,u=null,f=Zt,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}n[xt]=s,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||wT(n.nodeValue,o)),n||Ki(s,!0)}else n=Qh(n).createTextNode(u),n[xt]=s,s.stateNode=n}return ft(s),null;case 31:if(o=s.memoizedState,n===null||n.memoizedState!==null){if(u=co(s),o!==null){if(n===null){if(!u)throw Error(i(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[xt]=s}else ra(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ft(s),n=!1}else o=um(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return s.flags&256?(Nn(s),s):(Nn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return ft(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=co(s),u!==null&&u.dehydrated!==null){if(n===null){if(!f)throw Error(i(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[xt]=s}else ra(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ft(s),f=!1}else f=um(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(Nn(s),s):(Nn(s),null)}return Nn(s),(s.flags&128)!==0?(s.lanes=o,s):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)),o!==n&&o&&(s.child.flags|=8192),Oh(s,s.updateQueue),ft(s),null);case 4:return ye(),n===null&&Tp(s.stateNode.containerInfo),ft(s),null;case 10:return ui(s.type),ft(s),null;case 19:if(H(It),u=s.memoizedState,u===null)return ft(s),null;if(f=(s.flags&128)!==0,m=u.rendering,m===null)if(f)ru(u,!1);else{if(Et!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(m=vh(n),m!==null){for(s.flags|=128,ru(u,!1),n=m.updateQueue,s.updateQueue=n,Oh(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)rv(o,n),o=o.sibling;return Z(It,It.current&1|2),Ke&&oi(s,u.treeForkCount),s.child}n=n.sibling}u.tail!==null&&hn()>Lh&&(s.flags|=128,f=!0,ru(u,!1),s.lanes=4194304)}else{if(!f)if(n=vh(m),n!==null){if(s.flags|=128,f=!0,n=n.updateQueue,s.updateQueue=n,Oh(s,n),ru(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!Ke)return ft(s),null}else 2*hn()-u.renderingStartTime>Lh&&o!==536870912&&(s.flags|=128,f=!0,ru(u,!1),s.lanes=4194304);u.isBackwards?(m.sibling=s.child,s.child=m):(n=u.last,n!==null?n.sibling=m:s.child=m,u.last=m)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=hn(),n.sibling=null,o=It.current,Z(It,f?o&1|2:o&1),Ke&&oi(s,u.treeForkCount),n):(ft(s),null);case 22:case 23:return Nn(s),bm(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(ft(s),s.subtreeFlags&6&&(s.flags|=8192)):ft(s),o=s.updateQueue,o!==null&&Oh(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),n!==null&&H(aa),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),ui(Pt),ft(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function d1(n,s){switch(om(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return ui(Pt),ye(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Ge(s),null;case 31:if(s.memoizedState!==null){if(Nn(s),s.alternate===null)throw Error(i(340));ra()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(Nn(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));ra()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return H(It),null;case 4:return ye(),null;case 10:return ui(s.type),null;case 22:case 23:return Nn(s),bm(),n!==null&&H(aa),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return ui(Pt),null;case 25:return null;default:return null}}function NE(n,s){switch(om(s),s.tag){case 3:ui(Pt),ye();break;case 26:case 27:case 5:Ge(s);break;case 4:ye();break;case 31:s.memoizedState!==null&&Nn(s);break;case 13:Nn(s);break;case 19:H(It);break;case 10:ui(s.type);break;case 22:case 23:Nn(s),bm(),n!==null&&H(aa);break;case 24:ui(Pt)}}function iu(n,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&n)===n){u=void 0;var m=o.create,v=o.inst;u=m(),v.destroy=u}o=o.next}while(o!==f)}}catch(S){tt(s,s.return,S)}}function Zi(n,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&n)===n){var v=u.inst,S=v.destroy;if(S!==void 0){v.destroy=void 0,f=s;var O=o,Q=S;try{Q()}catch(ne){tt(f,O,ne)}}}u=u.next}while(u!==m)}}catch(ne){tt(s,s.return,ne)}}function xE(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{Tv(s,o)}catch(u){tt(n,n.return,u)}}}function OE(n,s,o){o.props=ha(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){tt(n,s,u)}}function su(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(f){tt(n,s,f)}}function jr(n,s){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){tt(n,s,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){tt(n,s,f)}else o.current=null}function VE(n){var s=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){tt(n,n.return,f)}}function ep(n,s,o){try{var u=n.stateNode;M1(u,n.type,o,s),u[Qt]=s}catch(f){tt(n,n.return,f)}}function PE(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&as(n.type)||n.tag===4}function tp(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||PE(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&as(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function np(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=lr));else if(u!==4&&(u===27&&as(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(np(n,s,o),n=n.sibling;n!==null;)np(n,s,o),n=n.sibling}function Vh(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(u!==4&&(u===27&&as(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Vh(n,s,o),n=n.sibling;n!==null;)Vh(n,s,o),n=n.sibling}function ME(n){var s=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);nn(s,u,o),s[xt]=n,s[Qt]=o}catch(m){tt(n,n.return,m)}}var mi=!1,Lt=!1,rp=!1,kE=typeof WeakSet=="function"?WeakSet:Set,$t=null;function m1(n,s){if(n=n.containerInfo,Ap=ef,n=Y_(n),Xd(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var v=0,S=-1,O=-1,Q=0,ne=0,ae=n,Y=null;t:for(;;){for(var W;ae!==o||f!==0&&ae.nodeType!==3||(S=v+f),ae!==m||u!==0&&ae.nodeType!==3||(O=v+u),ae.nodeType===3&&(v+=ae.nodeValue.length),(W=ae.firstChild)!==null;)Y=ae,ae=W;for(;;){if(ae===n)break t;if(Y===o&&++Q===f&&(S=v),Y===m&&++ne===u&&(O=v),(W=ae.nextSibling)!==null)break;ae=Y,Y=ae.parentNode}ae=W}o=S===-1||O===-1?null:{start:S,end:O}}else o=null}o=o||{start:0,end:0}}else o=null;for(wp={focusedElem:n,selectionRange:o},ef=!1,$t=s;$t!==null;)if(s=$t,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,$t=n;else for(;$t!==null;){switch(s=$t,m=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)f=n[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,o=s,f=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var Te=ha(o.type,f);n=u.getSnapshotBeforeUpdate(Te,m),u.__reactInternalSnapshotBeforeUpdate=n}catch(De){tt(o,o.return,De)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)Cp(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Cp(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,$t=n;break}$t=s.return}}function LE(n,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:gi(n,o),u&4&&iu(5,o);break;case 1:if(gi(n,o),u&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(v){tt(o,o.return,v)}else{var f=ha(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(f,s,n.__reactInternalSnapshotBeforeUpdate)}catch(v){tt(o,o.return,v)}}u&64&&xE(o),u&512&&su(o,o.return);break;case 3:if(gi(n,o),u&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{Tv(n,s)}catch(v){tt(o,o.return,v)}}break;case 27:s===null&&u&4&&ME(o);case 26:case 5:gi(n,o),s===null&&u&4&&VE(o),u&512&&su(o,o.return);break;case 12:gi(n,o);break;case 31:gi(n,o),u&4&&zE(n,o);break;case 13:gi(n,o),u&4&&BE(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=S1.bind(null,o),q1(n,o))));break;case 22:if(u=o.memoizedState!==null||mi,!u){s=s!==null&&s.memoizedState!==null||Lt,f=mi;var m=Lt;mi=u,(Lt=s)&&!m?yi(n,o,(o.subtreeFlags&8772)!==0):gi(n,o),mi=f,Lt=m}break;case 30:break;default:gi(n,o)}}function UE(n){var s=n.alternate;s!==null&&(n.alternate=null,UE(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&Qa(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var mt=null,vn=!1;function pi(n,s,o){for(o=o.child;o!==null;)jE(n,s,o),o=o.sibling}function jE(n,s,o){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(ir,o)}catch{}switch(o.tag){case 26:Lt||jr(o,s),pi(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Lt||jr(o,s);var u=mt,f=vn;as(o.type)&&(mt=o.stateNode,vn=!1),pi(n,s,o),mu(o.stateNode),mt=u,vn=f;break;case 5:Lt||jr(o,s);case 6:if(u=mt,f=vn,mt=null,pi(n,s,o),mt=u,vn=f,mt!==null)if(vn)try{(mt.nodeType===9?mt.body:mt.nodeName==="HTML"?mt.ownerDocument.body:mt).removeChild(o.stateNode)}catch(m){tt(o,s,m)}else try{mt.removeChild(o.stateNode)}catch(m){tt(o,s,m)}break;case 18:mt!==null&&(vn?(n=mt,xT(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Oo(n)):xT(mt,o.stateNode));break;case 4:u=mt,f=vn,mt=o.stateNode.containerInfo,vn=!0,pi(n,s,o),mt=u,vn=f;break;case 0:case 11:case 14:case 15:Zi(2,o,s),Lt||Zi(4,o,s),pi(n,s,o);break;case 1:Lt||(jr(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&OE(o,s,u)),pi(n,s,o);break;case 21:pi(n,s,o);break;case 22:Lt=(u=Lt)||o.memoizedState!==null,pi(n,s,o),Lt=u;break;default:pi(n,s,o)}}function zE(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Oo(n)}catch(o){tt(s,s.return,o)}}}function BE(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Oo(n)}catch(o){tt(s,s.return,o)}}function p1(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new kE),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new kE),s;default:throw Error(i(435,n.tag))}}function Ph(n,s){var o=p1(n);s.forEach(function(u){if(!o.has(u)){o.add(u);var f=A1.bind(null,n,u);u.then(f,f)}})}function En(n,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],m=n,v=s,S=v;e:for(;S!==null;){switch(S.tag){case 27:if(as(S.type)){mt=S.stateNode,vn=!1;break e}break;case 5:mt=S.stateNode,vn=!1;break e;case 3:case 4:mt=S.stateNode.containerInfo,vn=!0;break e}S=S.return}if(mt===null)throw Error(i(160));jE(m,v,f),mt=null,vn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)FE(s,n),s=s.sibling}var mr=null;function FE(n,s){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:En(s,n),Tn(n),u&4&&(Zi(3,n,n.return),iu(3,n),Zi(5,n,n.return));break;case 1:En(s,n),Tn(n),u&512&&(Lt||o===null||jr(o,o.return)),u&64&&mi&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=mr;if(En(s,n),Tn(n),u&512&&(Lt||o===null||jr(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[wr]||m[xt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),nn(m,u,o),m[xt]=n,Ot(m),u=m;break e;case"link":var v=FT("link","href",f).get(u+(o.href||""));if(v){for(var S=0;S<v.length;S++)if(m=v[S],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){v.splice(S,1);break t}}m=f.createElement(u),nn(m,u,o),f.head.appendChild(m);break;case"meta":if(v=FT("meta","content",f).get(u+(o.content||""))){for(S=0;S<v.length;S++)if(m=v[S],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){v.splice(S,1);break t}}m=f.createElement(u),nn(m,u,o),f.head.appendChild(m);break;default:throw Error(i(468,u))}m[xt]=n,Ot(m),u=m}n.stateNode=u}else qT(f,n.type,n.stateNode);else n.stateNode=BT(f,u,n.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?qT(f,n.type,n.stateNode):BT(f,u,n.memoizedProps)):u===null&&n.stateNode!==null&&ep(n,n.memoizedProps,o.memoizedProps)}break;case 27:En(s,n),Tn(n),u&512&&(Lt||o===null||jr(o,o.return)),o!==null&&u&4&&ep(n,n.memoizedProps,o.memoizedProps);break;case 5:if(En(s,n),Tn(n),u&512&&(Lt||o===null||jr(o,o.return)),n.flags&32){f=n.stateNode;try{_n(f,"")}catch(Te){tt(n,n.return,Te)}}u&4&&n.stateNode!=null&&(f=n.memoizedProps,ep(n,f,o!==null?o.memoizedProps:f)),u&1024&&(rp=!0);break;case 6:if(En(s,n),Tn(n),u&4){if(n.stateNode===null)throw Error(i(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(Te){tt(n,n.return,Te)}}break;case 3:if(Xh=null,f=mr,mr=Yh(s.containerInfo),En(s,n),mr=f,Tn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Oo(s.containerInfo)}catch(Te){tt(n,n.return,Te)}rp&&(rp=!1,qE(n));break;case 4:u=mr,mr=Yh(n.stateNode.containerInfo),En(s,n),Tn(n),mr=u;break;case 12:En(s,n),Tn(n);break;case 31:En(s,n),Tn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Ph(n,u)));break;case 13:En(s,n),Tn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(kh=hn()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Ph(n,u)));break;case 22:f=n.memoizedState!==null;var O=o!==null&&o.memoizedState!==null,Q=mi,ne=Lt;if(mi=Q||f,Lt=ne||O,En(s,n),Lt=ne,mi=Q,Tn(n),u&8192)e:for(s=n.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||O||mi||Lt||fa(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){O=o=s;try{if(m=O.stateNode,f)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{S=O.stateNode;var ae=O.memoizedProps.style,Y=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;S.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(Te){tt(O,O.return,Te)}}}else if(s.tag===6){if(o===null){O=s;try{O.stateNode.nodeValue=f?"":O.memoizedProps}catch(Te){tt(O,O.return,Te)}}}else if(s.tag===18){if(o===null){O=s;try{var W=O.stateNode;f?OT(W,!0):OT(O.stateNode,!1)}catch(Te){tt(O,O.return,Te)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Ph(n,o))));break;case 19:En(s,n),Tn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Ph(n,u)));break;case 30:break;case 21:break;default:En(s,n),Tn(n)}}function Tn(n){var s=n.flags;if(s&2){try{for(var o,u=n.return;u!==null;){if(PE(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,m=tp(n);Vh(n,m,f);break;case 5:var v=o.stateNode;o.flags&32&&(_n(v,""),o.flags&=-33);var S=tp(n);Vh(n,S,v);break;case 3:case 4:var O=o.stateNode.containerInfo,Q=tp(n);np(n,Q,O);break;default:throw Error(i(161))}}catch(ne){tt(n,n.return,ne)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function qE(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;qE(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function gi(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)LE(n,s.alternate,s),s=s.sibling}function fa(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Zi(4,s,s.return),fa(s);break;case 1:jr(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&OE(s,s.return,o),fa(s);break;case 27:mu(s.stateNode);case 26:case 5:jr(s,s.return),fa(s);break;case 22:s.memoizedState===null&&fa(s);break;case 30:fa(s);break;default:fa(s)}n=n.sibling}}function yi(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=n,m=s,v=m.flags;switch(m.tag){case 0:case 11:case 15:yi(f,m,o),iu(4,m);break;case 1:if(yi(f,m,o),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Q){tt(u,u.return,Q)}if(u=m,f=u.updateQueue,f!==null){var S=u.stateNode;try{var O=f.shared.hiddenCallbacks;if(O!==null)for(f.shared.hiddenCallbacks=null,f=0;f<O.length;f++)Ev(O[f],S)}catch(Q){tt(u,u.return,Q)}}o&&v&64&&xE(m),su(m,m.return);break;case 27:ME(m);case 26:case 5:yi(f,m,o),o&&u===null&&v&4&&VE(m),su(m,m.return);break;case 12:yi(f,m,o);break;case 31:yi(f,m,o),o&&v&4&&zE(f,m);break;case 13:yi(f,m,o),o&&v&4&&BE(f,m);break;case 22:m.memoizedState===null&&yi(f,m,o),su(m,m.return);break;case 30:break;default:yi(f,m,o)}s=s.sibling}}function ip(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Gl(o))}function sp(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Gl(n))}function pr(n,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)HE(n,s,o,u),s=s.sibling}function HE(n,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:pr(n,s,o,u),f&2048&&iu(9,s);break;case 1:pr(n,s,o,u);break;case 3:pr(n,s,o,u),f&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Gl(n)));break;case 12:if(f&2048){pr(n,s,o,u),n=s.stateNode;try{var m=s.memoizedProps,v=m.id,S=m.onPostCommit;typeof S=="function"&&S(v,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(O){tt(s,s.return,O)}}else pr(n,s,o,u);break;case 31:pr(n,s,o,u);break;case 13:pr(n,s,o,u);break;case 23:break;case 22:m=s.stateNode,v=s.alternate,s.memoizedState!==null?m._visibility&2?pr(n,s,o,u):au(n,s):m._visibility&2?pr(n,s,o,u):(m._visibility|=2,To(n,s,o,u,(s.subtreeFlags&10256)!==0||!1)),f&2048&&ip(v,s);break;case 24:pr(n,s,o,u),f&2048&&sp(s.alternate,s);break;default:pr(n,s,o,u)}}function To(n,s,o,u,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=n,v=s,S=o,O=u,Q=v.flags;switch(v.tag){case 0:case 11:case 15:To(m,v,S,O,f),iu(8,v);break;case 23:break;case 22:var ne=v.stateNode;v.memoizedState!==null?ne._visibility&2?To(m,v,S,O,f):au(m,v):(ne._visibility|=2,To(m,v,S,O,f)),f&&Q&2048&&ip(v.alternate,v);break;case 24:To(m,v,S,O,f),f&&Q&2048&&sp(v.alternate,v);break;default:To(m,v,S,O,f)}s=s.sibling}}function au(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,u=s,f=u.flags;switch(u.tag){case 22:au(o,u),f&2048&&ip(u.alternate,u);break;case 24:au(o,u),f&2048&&sp(u.alternate,u);break;default:au(o,u)}s=s.sibling}}var ou=8192;function bo(n,s,o){if(n.subtreeFlags&ou)for(n=n.child;n!==null;)GE(n,s,o),n=n.sibling}function GE(n,s,o){switch(n.tag){case 26:bo(n,s,o),n.flags&ou&&n.memoizedState!==null&&tC(o,mr,n.memoizedState,n.memoizedProps);break;case 5:bo(n,s,o);break;case 3:case 4:var u=mr;mr=Yh(n.stateNode.containerInfo),bo(n,s,o),mr=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=ou,ou=16777216,bo(n,s,o),ou=u):bo(n,s,o));break;default:bo(n,s,o)}}function KE(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function lu(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];$t=u,YE(u,n)}KE(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)QE(n),n=n.sibling}function QE(n){switch(n.tag){case 0:case 11:case 15:lu(n),n.flags&2048&&Zi(9,n,n.return);break;case 3:lu(n);break;case 12:lu(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Mh(n)):lu(n);break;default:lu(n)}}function Mh(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];$t=u,YE(u,n)}KE(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Zi(8,s,s.return),Mh(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Mh(s));break;default:Mh(s)}n=n.sibling}}function YE(n,s){for(;$t!==null;){var o=$t;switch(o.tag){case 0:case 11:case 15:Zi(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Gl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,$t=u;else e:for(o=n;$t!==null;){u=$t;var f=u.sibling,m=u.return;if(UE(u),u===o){$t=null;break e}if(f!==null){f.return=m,$t=f;break e}$t=m}}}var g1={getCacheForType:function(n){var s=en(Pt),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o},cacheSignal:function(){return en(Pt).controller.signal}},y1=typeof WeakMap=="function"?WeakMap:Map,We=0,ct=null,je=null,Be=0,et=0,xn=null,es=!1,So=!1,ap=!1,_i=0,Et=0,ts=0,da=0,op=0,On=0,Ao=0,uu=null,bn=null,lp=!1,kh=0,$E=0,Lh=1/0,Uh=null,ns=null,Ht=0,rs=null,wo=null,vi=0,up=0,cp=null,XE=null,cu=0,hp=null;function Vn(){return(We&2)!==0&&Be!==0?Be&-Be:J.T!==null?yp():jc()}function WE(){if(On===0)if((Be&536870912)===0||Ke){var n=zs;zs<<=1,(zs&3932160)===0&&(zs=262144),On=n}else On=536870912;return n=Dn.current,n!==null&&(n.flags|=32),On}function Sn(n,s,o){(n===ct&&(et===2||et===9)||n.cancelPendingCommit!==null)&&(Io(n,0),is(n,Be,On,!1)),Bs(n,o),((We&2)===0||n!==ct)&&(n===ct&&((We&2)===0&&(da|=o),Et===4&&is(n,Be,On,!1)),zr(n))}function JE(n,s,o){if((We&6)!==0)throw Error(i(327));var u=!o&&(s&127)===0&&(s&n.expiredLanes)===0||sr(n,s),f=u?E1(n,s):dp(n,s,!0),m=u;do{if(f===0){So&&!u&&is(n,s,0,!1);break}else{if(o=n.current.alternate,m&&!_1(o)){f=dp(n,s,!1),m=!1;continue}if(f===2){if(m=s,n.errorRecoveryDisabledLanes&m)var v=0;else v=n.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){s=v;e:{var S=n;f=uu;var O=S.current.memoizedState.isDehydrated;if(O&&(Io(S,v).flags|=256),v=dp(S,v,!1),v!==2){if(ap&&!O){S.errorRecoveryDisabledLanes|=m,da|=m,f=4;break e}m=bn,bn=f,m!==null&&(bn===null?bn=m:bn.push.apply(bn,m))}f=v}if(m=!1,f!==2)continue}}if(f===1){Io(n,0),is(n,s,0,!0);break}e:{switch(u=n,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:is(u,s,On,!es);break e;case 2:bn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(f=kh+300-hn(),10<f)){if(is(u,s,On,!es),br(u,0,!0)!==0)break e;vi=s,u.timeoutHandle=DT(ZE.bind(null,u,o,bn,Uh,lp,s,On,da,Ao,es,m,"Throttled",-0,0),f);break e}ZE(u,o,bn,Uh,lp,s,On,da,Ao,es,m,null,-0,0)}}break}while(!0);zr(n)}function ZE(n,s,o,u,f,m,v,S,O,Q,ne,ae,Y,W){if(n.timeoutHandle=-1,ae=s.subtreeFlags,ae&8192||(ae&16785408)===16785408){ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:lr},GE(s,m,ae);var Te=(m&62914560)===m?kh-hn():(m&4194048)===m?$E-hn():0;if(Te=nC(ae,Te),Te!==null){vi=m,n.cancelPendingCommit=Te(oT.bind(null,n,s,m,o,u,f,v,S,O,ne,ae,null,Y,W)),is(n,m,v,!Q);return}}oT(n,s,m,o,u,f,v,S,O)}function _1(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],m=f.getSnapshot;f=f.value;try{if(!Rn(m(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function is(n,s,o,u){s&=~op,s&=~da,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var f=s;0<f;){var m=31-At(f),v=1<<m;u[m]=-1,f&=~v}o!==0&&Fs(n,o,s)}function jh(){return(We&6)===0?(hu(0),!1):!0}function fp(){if(je!==null){if(et===0)var n=je.return;else n=je,li=ia=null,Cm(n),go=null,Ql=0,n=je;for(;n!==null;)NE(n.alternate,n),n=n.return;je=null}}function Io(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,U1(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),vi=0,fp(),ct=n,je=o=ai(n.current,null),Be=s,et=0,xn=null,es=!1,So=sr(n,s),ap=!1,Ao=On=op=da=ts=Et=0,bn=uu=null,lp=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var f=31-At(u),m=1<<f;s|=n[f],u&=~m}return _i=s,ah(),o}function eT(n,s){Me=null,J.H=tu,s===po||s===mh?(s=gv(),et=3):s===gm?(s=gv(),et=4):et=s===Hm?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,xn=s,je===null&&(Et=1,Ch(n,Gn(s,n.current)))}function tT(){var n=Dn.current;return n===null?!0:(Be&4194048)===Be?$n===null:(Be&62914560)===Be||(Be&536870912)!==0?n===$n:!1}function nT(){var n=J.H;return J.H=tu,n===null?tu:n}function rT(){var n=J.A;return J.A=g1,n}function zh(){Et=4,es||(Be&4194048)!==Be&&Dn.current!==null||(So=!0),(ts&134217727)===0&&(da&134217727)===0||ct===null||is(ct,Be,On,!1)}function dp(n,s,o){var u=We;We|=2;var f=nT(),m=rT();(ct!==n||Be!==s)&&(Uh=null,Io(n,s)),s=!1;var v=Et;e:do try{if(et!==0&&je!==null){var S=je,O=xn;switch(et){case 8:fp(),v=6;break e;case 3:case 2:case 9:case 6:Dn.current===null&&(s=!0);var Q=et;if(et=0,xn=null,Ro(n,S,O,Q),o&&So){v=0;break e}break;default:Q=et,et=0,xn=null,Ro(n,S,O,Q)}}v1(),v=Et;break}catch(ne){eT(n,ne)}while(!0);return s&&n.shellSuspendCounter++,li=ia=null,We=u,J.H=f,J.A=m,je===null&&(ct=null,Be=0,ah()),v}function v1(){for(;je!==null;)iT(je)}function E1(n,s){var o=We;We|=2;var u=nT(),f=rT();ct!==n||Be!==s?(Uh=null,Lh=hn()+500,Io(n,s)):So=sr(n,s);e:do try{if(et!==0&&je!==null){s=je;var m=xn;t:switch(et){case 1:et=0,xn=null,Ro(n,s,m,1);break;case 2:case 9:if(mv(m)){et=0,xn=null,sT(s);break}s=function(){et!==2&&et!==9||ct!==n||(et=7),zr(n)},m.then(s,s);break e;case 3:et=7;break e;case 4:et=5;break e;case 7:mv(m)?(et=0,xn=null,sT(s)):(et=0,xn=null,Ro(n,s,m,7));break;case 5:var v=null;switch(je.tag){case 26:v=je.memoizedState;case 5:case 27:var S=je;if(v?HT(v):S.stateNode.complete){et=0,xn=null;var O=S.sibling;if(O!==null)je=O;else{var Q=S.return;Q!==null?(je=Q,Bh(Q)):je=null}break t}}et=0,xn=null,Ro(n,s,m,5);break;case 6:et=0,xn=null,Ro(n,s,m,6);break;case 8:fp(),Et=6;break e;default:throw Error(i(462))}}T1();break}catch(ne){eT(n,ne)}while(!0);return li=ia=null,J.H=u,J.A=f,We=o,je!==null?0:(ct=null,Be=0,ah(),Et)}function T1(){for(;je!==null&&!qd();)iT(je)}function iT(n){var s=CE(n.alternate,n,_i);n.memoizedProps=n.pendingProps,s===null?Bh(n):je=s}function sT(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=bE(o,s,s.pendingProps,s.type,void 0,Be);break;case 11:s=bE(o,s,s.pendingProps,s.type.render,s.ref,Be);break;case 5:Cm(s);default:NE(o,s),s=je=rv(s,_i),s=CE(o,s,_i)}n.memoizedProps=n.pendingProps,s===null?Bh(n):je=s}function Ro(n,s,o,u){li=ia=null,Cm(s),go=null,Ql=0;var f=s.return;try{if(u1(n,f,s,o,Be)){Et=1,Ch(n,Gn(o,n.current)),je=null;return}}catch(m){if(f!==null)throw je=f,m;Et=1,Ch(n,Gn(o,n.current)),je=null;return}s.flags&32768?(Ke||u===1?n=!0:So||(Be&536870912)!==0?n=!1:(es=n=!0,(u===2||u===9||u===3||u===6)&&(u=Dn.current,u!==null&&u.tag===13&&(u.flags|=16384))),aT(s,n)):Bh(s)}function Bh(n){var s=n;do{if((s.flags&32768)!==0){aT(s,es);return}n=s.return;var o=f1(s.alternate,s,_i);if(o!==null){je=o;return}if(s=s.sibling,s!==null){je=s;return}je=s=n}while(s!==null);Et===0&&(Et=5)}function aT(n,s){do{var o=d1(n.alternate,n);if(o!==null){o.flags&=32767,je=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){je=n;return}je=n=o}while(n!==null);Et=6,je=null}function oT(n,s,o,u,f,m,v,S,O){n.cancelPendingCommit=null;do Fh();while(Ht!==0);if((We&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(m=s.lanes|s.childLanes,m|=tm,Kd(n,o,m,v,S,O),n===ct&&(je=ct=null,Be=0),wo=s,rs=n,vi=o,up=m,cp=f,XE=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,w1(Pi,function(){return fT(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=J.T,J.T=null,f=fe.p,fe.p=2,v=We,We|=4;try{m1(n,s,o)}finally{We=v,fe.p=f,J.T=u}}Ht=1,lT(),uT(),cT()}}function lT(){if(Ht===1){Ht=0;var n=rs,s=wo,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=J.T,J.T=null;var u=fe.p;fe.p=2;var f=We;We|=4;try{FE(s,n);var m=wp,v=Y_(n.containerInfo),S=m.focusedElem,O=m.selectionRange;if(v!==S&&S&&S.ownerDocument&&Q_(S.ownerDocument.documentElement,S)){if(O!==null&&Xd(S)){var Q=O.start,ne=O.end;if(ne===void 0&&(ne=Q),"selectionStart"in S)S.selectionStart=Q,S.selectionEnd=Math.min(ne,S.value.length);else{var ae=S.ownerDocument||document,Y=ae&&ae.defaultView||window;if(Y.getSelection){var W=Y.getSelection(),Te=S.textContent.length,De=Math.min(O.start,Te),lt=O.end===void 0?De:Math.min(O.end,Te);!W.extend&&De>lt&&(v=lt,lt=De,De=v);var j=K_(S,De),M=K_(S,lt);if(j&&M&&(W.rangeCount!==1||W.anchorNode!==j.node||W.anchorOffset!==j.offset||W.focusNode!==M.node||W.focusOffset!==M.offset)){var G=ae.createRange();G.setStart(j.node,j.offset),W.removeAllRanges(),De>lt?(W.addRange(G),W.extend(M.node,M.offset)):(G.setEnd(M.node,M.offset),W.addRange(G))}}}}for(ae=[],W=S;W=W.parentNode;)W.nodeType===1&&ae.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<ae.length;S++){var se=ae[S];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}ef=!!Ap,wp=Ap=null}finally{We=f,fe.p=u,J.T=o}}n.current=s,Ht=2}}function uT(){if(Ht===2){Ht=0;var n=rs,s=wo,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=J.T,J.T=null;var u=fe.p;fe.p=2;var f=We;We|=4;try{LE(n,s.alternate,s)}finally{We=f,fe.p=u,J.T=o}}Ht=3}}function cT(){if(Ht===4||Ht===3){Ht=0,Oc();var n=rs,s=wo,o=vi,u=XE;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Ht=5:(Ht=0,wo=rs=null,hT(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(ns=null),ni(o),s=s.stateNode,Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(ir,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=J.T,f=fe.p,fe.p=2,J.T=null;try{for(var m=n.onRecoverableError,v=0;v<u.length;v++){var S=u[v];m(S.value,{componentStack:S.stack})}}finally{J.T=s,fe.p=f}}(vi&3)!==0&&Fh(),zr(n),f=n.pendingLanes,(o&261930)!==0&&(f&42)!==0?n===hp?cu++:(cu=0,hp=n):cu=0,hu(0)}}function hT(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Gl(s)))}function Fh(){return lT(),uT(),cT(),fT()}function fT(){if(Ht!==5)return!1;var n=rs,s=up;up=0;var o=ni(vi),u=J.T,f=fe.p;try{fe.p=32>o?32:o,J.T=null,o=cp,cp=null;var m=rs,v=vi;if(Ht=0,wo=rs=null,vi=0,(We&6)!==0)throw Error(i(331));var S=We;if(We|=4,QE(m.current),HE(m,m.current,v,o),We=S,hu(0,!1),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(ir,m)}catch{}return!0}finally{fe.p=f,J.T=u,hT(n,s)}}function dT(n,s,o){s=Gn(o,s),s=qm(n.stateNode,s,2),n=Xi(n,s,2),n!==null&&(Bs(n,2),zr(n))}function tt(n,s,o){if(n.tag===3)dT(n,n,o);else for(;s!==null;){if(s.tag===3){dT(s,n,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ns===null||!ns.has(u))){n=Gn(o,n),o=mE(2),u=Xi(s,o,2),u!==null&&(pE(o,u,s,n),Bs(u,2),zr(u));break}}s=s.return}}function mp(n,s,o){var u=n.pingCache;if(u===null){u=n.pingCache=new y1;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(ap=!0,f.add(o),n=b1.bind(null,n,s,o),s.then(n,n))}function b1(n,s,o){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,ct===n&&(Be&o)===o&&(Et===4||Et===3&&(Be&62914560)===Be&&300>hn()-kh?(We&2)===0&&Io(n,0):op|=o,Ao===Be&&(Ao=0)),zr(n)}function mT(n,s){s===0&&(s=Uc()),n=ta(n,s),n!==null&&(Bs(n,s),zr(n))}function S1(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),mT(n,o)}function A1(n,s){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),mT(n,o)}function w1(n,s){return qt(n,s)}var qh=null,Co=null,pp=!1,Hh=!1,gp=!1,ss=0;function zr(n){n!==Co&&n.next===null&&(Co===null?qh=Co=n:Co=Co.next=n),Hh=!0,pp||(pp=!0,R1())}function hu(n,s){if(!gp&&Hh){gp=!0;do for(var o=!1,u=qh;u!==null;){if(n!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var v=u.suspendedLanes,S=u.pingedLanes;m=(1<<31-At(42|n)+1)-1,m&=f&~(v&~S),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,_T(u,m))}else m=Be,m=br(u,u===ct?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||sr(u,m)||(o=!0,_T(u,m));u=u.next}while(o);gp=!1}}function I1(){pT()}function pT(){Hh=pp=!1;var n=0;ss!==0&&L1()&&(n=ss);for(var s=hn(),o=null,u=qh;u!==null;){var f=u.next,m=gT(u,s);m===0?(u.next=null,o===null?qh=f:o.next=f,f===null&&(Co=o)):(o=u,(n!==0||(m&3)!==0)&&(Hh=!0)),u=f}Ht!==0&&Ht!==5||hu(n),ss!==0&&(ss=0)}function gT(n,s){for(var o=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var v=31-At(m),S=1<<v,O=f[v];O===-1?((S&o)===0||(S&u)!==0)&&(f[v]=Gd(S,s)):O<=s&&(n.expiredLanes|=S),m&=~S}if(s=ct,o=Be,o=br(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===s&&(et===2||et===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Vi(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||sr(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(u!==null&&Vi(u),ni(o)){case 2:case 8:o=Tl;break;case 32:o=Pi;break;case 268435456:o=Vc;break;default:o=Pi}return u=yT.bind(null,n),o=qt(o,u),n.callbackPriority=s,n.callbackNode=o,s}return u!==null&&u!==null&&Vi(u),n.callbackPriority=2,n.callbackNode=null,2}function yT(n,s){if(Ht!==0&&Ht!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Fh()&&n.callbackNode!==o)return null;var u=Be;return u=br(n,n===ct?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(JE(n,u,s),gT(n,hn()),n.callbackNode!=null&&n.callbackNode===o?yT.bind(null,n):null)}function _T(n,s){if(Fh())return null;JE(n,s,!0)}function R1(){j1(function(){(We&6)!==0?qt(El,I1):pT()})}function yp(){if(ss===0){var n=fo;n===0&&(n=Er,Er<<=1,(Er&261888)===0&&(Er=256)),ss=n}return ss}function vT(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Wa(""+n)}function ET(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function C1(n,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var m=vT((f[Qt]||null).action),v=u.submitter;v&&(s=(s=v[Qt]||null)?vT(s.formAction):v.getAttribute("formAction"),s!==null&&(m=s,v=null));var S=new Vr("action","action",null,u,f);n.push({event:S,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ss!==0){var O=v?ET(f,v):new FormData(f);Lm(o,{pending:!0,data:O,method:f.method,action:m},null,O)}}else typeof m=="function"&&(S.preventDefault(),O=v?ET(f,v):new FormData(f),Lm(o,{pending:!0,data:O,method:f.method,action:m},m,O))},currentTarget:f}]})}}for(var _p=0;_p<em.length;_p++){var vp=em[_p],D1=vp.toLowerCase(),N1=vp[0].toUpperCase()+vp.slice(1);dr(D1,"on"+N1)}dr(W_,"onAnimationEnd"),dr(J_,"onAnimationIteration"),dr(Z_,"onAnimationStart"),dr("dblclick","onDoubleClick"),dr("focusin","onFocus"),dr("focusout","onBlur"),dr(KR,"onTransitionRun"),dr(QR,"onTransitionStart"),dr(YR,"onTransitionCancel"),dr(ev,"onTransitionEnd"),Dr("onMouseEnter",["mouseout","mouseover"]),Dr("onMouseLeave",["mouseout","mouseover"]),Dr("onPointerEnter",["pointerout","pointerover"]),Dr("onPointerLeave",["pointerout","pointerover"]),Cr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Cr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Cr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Cr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Cr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Cr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),x1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fu));function TT(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],f=u.event;u=u.listeners;e:{var m=void 0;if(s)for(var v=u.length-1;0<=v;v--){var S=u[v],O=S.instance,Q=S.currentTarget;if(S=S.listener,O!==m&&f.isPropagationStopped())break e;m=S,f.currentTarget=Q;try{m(f)}catch(ne){sh(ne)}f.currentTarget=null,m=O}else for(v=0;v<u.length;v++){if(S=u[v],O=S.instance,Q=S.currentTarget,S=S.listener,O!==m&&f.isPropagationStopped())break e;m=S,f.currentTarget=Q;try{m(f)}catch(ne){sh(ne)}f.currentTarget=null,m=O}}}}function ze(n,s){var o=s[Ka];o===void 0&&(o=s[Ka]=new Set);var u=n+"__bubble";o.has(u)||(bT(s,n,2,!1),o.add(u))}function Ep(n,s,o){var u=0;s&&(u|=4),bT(o,n,u,s)}var Gh="_reactListening"+Math.random().toString(36).slice(2);function Tp(n){if(!n[Gh]){n[Gh]=!0,Al.forEach(function(o){o!=="selectionchange"&&(x1.has(o)||Ep(o,!1,n),Ep(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Gh]||(s[Gh]=!0,Ep("selectionchange",!1,s))}}function bT(n,s,o,u){switch(WT(s)){case 2:var f=sC;break;case 8:f=aC;break;default:f=kp}o=f.bind(null,s,o,n),f=void 0,!Qs||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(s,o,{capture:!0,passive:f}):n.addEventListener(s,o,!0):f!==void 0?n.addEventListener(s,o,{passive:f}):n.addEventListener(s,o,!1)}function bp(n,s,o,u,f){var m=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var S=u.stateNode.containerInfo;if(S===f)break;if(v===4)for(v=u.return;v!==null;){var O=v.tag;if((O===3||O===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;S!==null;){if(v=Ir(S),v===null)return;if(O=v.tag,O===5||O===6||O===26||O===27){u=m=v;continue e}S=S.parentNode}}u=u.return}zi(function(){var Q=m,ne=Bn(o),ae=[];e:{var Y=tv.get(n);if(Y!==void 0){var W=Vr,Te=n;switch(n){case"keypress":if($s(o)===0)break e;case"keydown":case"keyup":W=nh;break;case"focusin":Te="focus",W=Ws;break;case"focusout":Te="blur",W=Ws;break;case"beforeblur":case"afterblur":W=Ws;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=Ll;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=Qc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=y;break;case W_:case J_:case Z_:W=$c;break;case ev:W=A;break;case"scroll":case"scrollend":W=kl;break;case"wheel":W=$;break;case"copy":case"cut":case"paste":W=Xc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=si;break;case"toggle":case"beforetoggle":W=Pe}var De=(s&4)!==0,lt=!De&&(n==="scroll"||n==="scrollend"),j=De?Y!==null?Y+"Capture":null:Y;De=[];for(var M=Q,G;M!==null;){var se=M;if(G=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||G===null||j===null||(se=ur(M,j),se!=null&&De.push(du(M,se,G))),lt)break;M=M.return}0<De.length&&(Y=new W(Y,Te,null,o,ne),ae.push({event:Y,listeners:De}))}}if((s&7)===0){e:{if(Y=n==="mouseover"||n==="pointerover",W=n==="mouseout"||n==="pointerout",Y&&o!==Vl&&(Te=o.relatedTarget||o.fromElement)&&(Ir(Te)||Te[Ar]))break e;if((W||Y)&&(Y=ne.window===ne?ne:(Y=ne.ownerDocument)?Y.defaultView||Y.parentWindow:window,W?(Te=o.relatedTarget||o.toElement,W=Q,Te=Te?Ir(Te):null,Te!==null&&(lt=l(Te),De=Te.tag,Te!==lt||De!==5&&De!==27&&De!==6)&&(Te=null)):(W=null,Te=Q),W!==Te)){if(De=Ll,se="onMouseLeave",j="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(De=si,se="onPointerLeave",j="onPointerEnter",M="pointer"),lt=W==null?Y:wn(W),G=Te==null?Y:wn(Te),Y=new De(se,M+"leave",W,o,ne),Y.target=lt,Y.relatedTarget=G,se=null,Ir(ne)===Q&&(De=new De(j,M+"enter",Te,o,ne),De.target=G,De.relatedTarget=lt,se=De),lt=se,W&&Te)t:{for(De=O1,j=W,M=Te,G=0,se=j;se;se=De(se))G++;se=0;for(var Ie=M;Ie;Ie=De(Ie))se++;for(;0<G-se;)j=De(j),G--;for(;0<se-G;)M=De(M),se--;for(;G--;){if(j===M||M!==null&&j===M.alternate){De=j;break t}j=De(j),M=De(M)}De=null}else De=null;W!==null&&ST(ae,Y,W,De,!1),Te!==null&&lt!==null&&ST(ae,lt,Te,De,!0)}}e:{if(Y=Q?wn(Q):window,W=Y.nodeName&&Y.nodeName.toLowerCase(),W==="select"||W==="input"&&Y.type==="file")var Ye=z_;else if(U_(Y))if(B_)Ye=qR;else{Ye=BR;var Ae=zR}else W=Y.nodeName,!W||W.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?Q&&Xa(Q.elementType)&&(Ye=z_):Ye=FR;if(Ye&&(Ye=Ye(n,Q))){j_(ae,Ye,o,ne);break e}Ae&&Ae(n,Y,Q),n==="focusout"&&Q&&Y.type==="number"&&Q.memoizedProps.value!=null&&Nl(Y,"number",Y.value)}switch(Ae=Q?wn(Q):window,n){case"focusin":(U_(Ae)||Ae.contentEditable==="true")&&(io=Ae,Wd=Q,Fl=null);break;case"focusout":Fl=Wd=io=null;break;case"mousedown":Jd=!0;break;case"contextmenu":case"mouseup":case"dragend":Jd=!1,$_(ae,o,ne);break;case"selectionchange":if(GR)break;case"keydown":case"keyup":$_(ae,o,ne)}var ke;if(Xe)e:{switch(n){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else ro?Js(n,o)&&(Fe="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Fe="onCompositionStart");Fe&&(kr&&o.locale!=="ko"&&(ro||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&ro&&(ke=Ml()):(Or=ne,Pl="value"in Or?Or.value:Or.textContent,ro=!0)),Ae=Kh(Q,Fe),0<Ae.length&&(Fe=new Mr(Fe,n,null,o,ne),ae.push({event:Fe,listeners:Ae}),ke?Fe.data=ke:(ke=no(o),ke!==null&&(Fe.data=ke)))),(ke=qn?kR(n,o):LR(n,o))&&(Fe=Kh(Q,"onBeforeInput"),0<Fe.length&&(Ae=new Mr("onBeforeInput","beforeinput",null,o,ne),ae.push({event:Ae,listeners:Fe}),Ae.data=ke)),C1(ae,n,Q,o,ne)}TT(ae,s)})}function du(n,s,o){return{instance:n,listener:s,currentTarget:o}}function Kh(n,s){for(var o=s+"Capture",u=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=ur(n,o),f!=null&&u.unshift(du(n,f,m)),f=ur(n,s),f!=null&&u.push(du(n,f,m))),n.tag===3)return u;n=n.return}return[]}function O1(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function ST(n,s,o,u,f){for(var m=s._reactName,v=[];o!==null&&o!==u;){var S=o,O=S.alternate,Q=S.stateNode;if(S=S.tag,O!==null&&O===u)break;S!==5&&S!==26&&S!==27||Q===null||(O=Q,f?(Q=ur(o,m),Q!=null&&v.unshift(du(o,Q,O))):f||(Q=ur(o,m),Q!=null&&v.push(du(o,Q,O)))),o=o.return}v.length!==0&&n.push({event:s,listeners:v})}var V1=/\r\n?/g,P1=/\u0000|\uFFFD/g;function AT(n){return(typeof n=="string"?n:""+n).replace(V1,`
`).replace(P1,"")}function wT(n,s){return s=AT(s),AT(n)===s}function ot(n,s,o,u,f,m){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||_n(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&_n(n,""+u);break;case"className":In(n,"class",u);break;case"tabIndex":In(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":In(n,o,u);break;case"style":Ol(n,u,m);break;case"data":if(s!=="object"){In(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Wa(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(s!=="input"&&ot(n,s,"name",f.name,f,null),ot(n,s,"formEncType",f.formEncType,f,null),ot(n,s,"formMethod",f.formMethod,f,null),ot(n,s,"formTarget",f.formTarget,f,null)):(ot(n,s,"encType",f.encType,f,null),ot(n,s,"method",f.method,f,null),ot(n,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Wa(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=lr);break;case"onScroll":u!=null&&ze("scroll",n);break;case"onScrollEnd":u!=null&&ze("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=Wa(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":ze("beforetoggle",n),ze("toggle",n),Ya(n,"popover",u);break;case"xlinkActuate":Vt(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Vt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Vt(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Vt(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Vt(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Vt(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Vt(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Vt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Vt(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ya(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Kc.get(o)||o,Ya(n,o,u))}}function Sp(n,s,o,u,f,m){switch(o){case"style":Ol(n,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof u=="string"?_n(n,u):(typeof u=="number"||typeof u=="bigint")&&_n(n,""+u);break;case"onScroll":u!=null&&ze("scroll",n);break;case"onScrollEnd":u!=null&&ze("scrollend",n);break;case"onClick":u!=null&&(n.onclick=lr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!wl.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),m=n[Qt]||null,m=m!=null?m[o]:null,typeof m=="function"&&n.removeEventListener(s,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,u,f);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):Ya(n,o,u)}}}function nn(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ze("error",n),ze("load",n);var u=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var v=o[m];if(v!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ot(n,s,m,v,o,null)}}f&&ot(n,s,"srcSet",o.srcSet,o,null),u&&ot(n,s,"src",o.src,o,null);return;case"input":ze("invalid",n);var S=m=v=f=null,O=null,Q=null;for(u in o)if(o.hasOwnProperty(u)){var ne=o[u];if(ne!=null)switch(u){case"name":f=ne;break;case"type":v=ne;break;case"checked":O=ne;break;case"defaultChecked":Q=ne;break;case"value":m=ne;break;case"defaultValue":S=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,s));break;default:ot(n,s,u,ne,o,null)}}qc(n,m,S,O,Q,v,f,!1);return;case"select":ze("invalid",n),u=v=m=null;for(f in o)if(o.hasOwnProperty(f)&&(S=o[f],S!=null))switch(f){case"value":m=S;break;case"defaultValue":v=S;break;case"multiple":u=S;default:ot(n,s,f,S,o,null)}s=m,o=v,n.multiple=!!u,s!=null?ki(n,!!u,s,!1):o!=null&&ki(n,!!u,o,!0);return;case"textarea":ze("invalid",n),m=f=u=null;for(v in o)if(o.hasOwnProperty(v)&&(S=o[v],S!=null))switch(v){case"value":u=S;break;case"defaultValue":f=S;break;case"children":m=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(i(91));break;default:ot(n,s,v,S,o,null)}Li(n,u,f,m);return;case"option":for(O in o)o.hasOwnProperty(O)&&(u=o[O],u!=null)&&(O==="selected"?n.selected=u&&typeof u!="function"&&typeof u!="symbol":ot(n,s,O,u,o,null));return;case"dialog":ze("beforetoggle",n),ze("toggle",n),ze("cancel",n),ze("close",n);break;case"iframe":case"object":ze("load",n);break;case"video":case"audio":for(u=0;u<fu.length;u++)ze(fu[u],n);break;case"image":ze("error",n),ze("load",n);break;case"details":ze("toggle",n);break;case"embed":case"source":case"link":ze("error",n),ze("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in o)if(o.hasOwnProperty(Q)&&(u=o[Q],u!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ot(n,s,Q,u,o,null)}return;default:if(Xa(s)){for(ne in o)o.hasOwnProperty(ne)&&(u=o[ne],u!==void 0&&Sp(n,s,ne,u,o,void 0));return}}for(S in o)o.hasOwnProperty(S)&&(u=o[S],u!=null&&ot(n,s,S,u,o,null))}function M1(n,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,v=null,S=null,O=null,Q=null,ne=null;for(W in o){var ae=o[W];if(o.hasOwnProperty(W)&&ae!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":O=ae;default:u.hasOwnProperty(W)||ot(n,s,W,null,u,ae)}}for(var Y in u){var W=u[Y];if(ae=o[Y],u.hasOwnProperty(Y)&&(W!=null||ae!=null))switch(Y){case"type":m=W;break;case"name":f=W;break;case"checked":Q=W;break;case"defaultChecked":ne=W;break;case"value":v=W;break;case"defaultValue":S=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,s));break;default:W!==ae&&ot(n,s,Y,W,u,ae)}}$a(n,v,S,O,Q,ne,m,f);return;case"select":W=v=S=Y=null;for(m in o)if(O=o[m],o.hasOwnProperty(m)&&O!=null)switch(m){case"value":break;case"multiple":W=O;default:u.hasOwnProperty(m)||ot(n,s,m,null,u,O)}for(f in u)if(m=u[f],O=o[f],u.hasOwnProperty(f)&&(m!=null||O!=null))switch(f){case"value":Y=m;break;case"defaultValue":S=m;break;case"multiple":v=m;default:m!==O&&ot(n,s,f,m,u,O)}s=S,o=v,u=W,Y!=null?ki(n,!!o,Y,!1):!!u!=!!o&&(s!=null?ki(n,!!o,s,!0):ki(n,!!o,o?[]:"",!1));return;case"textarea":W=Y=null;for(S in o)if(f=o[S],o.hasOwnProperty(S)&&f!=null&&!u.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:ot(n,s,S,null,u,f)}for(v in u)if(f=u[v],m=o[v],u.hasOwnProperty(v)&&(f!=null||m!=null))switch(v){case"value":Y=f;break;case"defaultValue":W=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&ot(n,s,v,f,u,m)}Hc(n,Y,W);return;case"option":for(var Te in o)Y=o[Te],o.hasOwnProperty(Te)&&Y!=null&&!u.hasOwnProperty(Te)&&(Te==="selected"?n.selected=!1:ot(n,s,Te,null,u,Y));for(O in u)Y=u[O],W=o[O],u.hasOwnProperty(O)&&Y!==W&&(Y!=null||W!=null)&&(O==="selected"?n.selected=Y&&typeof Y!="function"&&typeof Y!="symbol":ot(n,s,O,Y,u,W));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in o)Y=o[De],o.hasOwnProperty(De)&&Y!=null&&!u.hasOwnProperty(De)&&ot(n,s,De,null,u,Y);for(Q in u)if(Y=u[Q],W=o[Q],u.hasOwnProperty(Q)&&Y!==W&&(Y!=null||W!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,s));break;default:ot(n,s,Q,Y,u,W)}return;default:if(Xa(s)){for(var lt in o)Y=o[lt],o.hasOwnProperty(lt)&&Y!==void 0&&!u.hasOwnProperty(lt)&&Sp(n,s,lt,void 0,u,Y);for(ne in u)Y=u[ne],W=o[ne],!u.hasOwnProperty(ne)||Y===W||Y===void 0&&W===void 0||Sp(n,s,ne,Y,u,W);return}}for(var j in o)Y=o[j],o.hasOwnProperty(j)&&Y!=null&&!u.hasOwnProperty(j)&&ot(n,s,j,null,u,Y);for(ae in u)Y=u[ae],W=o[ae],!u.hasOwnProperty(ae)||Y===W||Y==null&&W==null||ot(n,s,ae,Y,u,W)}function IT(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function k1(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var f=o[u],m=f.transferSize,v=f.initiatorType,S=f.duration;if(m&&S&&IT(v)){for(v=0,S=f.responseEnd,u+=1;u<o.length;u++){var O=o[u],Q=O.startTime;if(Q>S)break;var ne=O.transferSize,ae=O.initiatorType;ne&&IT(ae)&&(O=O.responseEnd,v+=ne*(O<S?1:(S-Q)/(O-Q)))}if(--u,s+=8*(m+v)/(f.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Ap=null,wp=null;function Qh(n){return n.nodeType===9?n:n.ownerDocument}function RT(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function CT(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Ip(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Rp=null;function L1(){var n=window.event;return n&&n.type==="popstate"?n===Rp?!1:(Rp=n,!0):(Rp=null,!1)}var DT=typeof setTimeout=="function"?setTimeout:void 0,U1=typeof clearTimeout=="function"?clearTimeout:void 0,NT=typeof Promise=="function"?Promise:void 0,j1=typeof queueMicrotask=="function"?queueMicrotask:typeof NT<"u"?function(n){return NT.resolve(null).then(n).catch(z1)}:DT;function z1(n){setTimeout(function(){throw n})}function as(n){return n==="head"}function xT(n,s){var o=s,u=0;do{var f=o.nextSibling;if(n.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(f),Oo(s);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")mu(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,mu(o);for(var m=o.firstChild;m;){var v=m.nextSibling,S=m.nodeName;m[wr]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=v}}else o==="body"&&mu(n.ownerDocument.body);o=f}while(o);Oo(s)}function OT(n,s){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function Cp(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Cp(o),Qa(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function B1(n,s,o,u){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[wr])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=Xn(n.nextSibling),n===null)break}return null}function F1(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Xn(n.nextSibling),n===null))return null;return n}function VT(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=Xn(n.nextSibling),n===null))return null;return n}function Dp(n){return n.data==="$?"||n.data==="$~"}function Np(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function q1(n,s){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||o.readyState!=="loading")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Xn(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var xp=null;function PT(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(s===0)return Xn(n.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}n=n.nextSibling}return null}function MT(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return n;s--}else o!=="/$"&&o!=="/&"||s++}n=n.previousSibling}return null}function kT(n,s,o){switch(s=Qh(o),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function mu(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);Qa(n)}var Wn=new Map,LT=new Set;function Yh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ei=fe.d;fe.d={f:H1,r:G1,D:K1,C:Q1,L:Y1,m:$1,X:W1,S:X1,M:J1};function H1(){var n=Ei.f(),s=jh();return n||s}function G1(n){var s=zn(n);s!==null&&s.tag===5&&s.type==="form"?eE(s):Ei.r(n)}var Do=typeof document>"u"?null:document;function UT(n,s,o){var u=Do;if(u&&typeof s=="string"&&s){var f=yn(s);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),LT.has(f)||(LT.add(f),n={rel:n,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),nn(s,"link",n),Ot(s),u.head.appendChild(s)))}}function K1(n){Ei.D(n),UT("dns-prefetch",n,null)}function Q1(n,s){Ei.C(n,s),UT("preconnect",n,s)}function Y1(n,s,o){Ei.L(n,s,o);var u=Do;if(u&&n&&s){var f='link[rel="preload"][as="'+yn(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+yn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+yn(o.imageSizes)+'"]')):f+='[href="'+yn(n)+'"]';var m=f;switch(s){case"style":m=No(n);break;case"script":m=xo(n)}Wn.has(m)||(n=T({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),Wn.set(m,n),u.querySelector(f)!==null||s==="style"&&u.querySelector(pu(m))||s==="script"&&u.querySelector(gu(m))||(s=u.createElement("link"),nn(s,"link",n),Ot(s),u.head.appendChild(s)))}}function $1(n,s){Ei.m(n,s);var o=Do;if(o&&n){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+yn(u)+'"][href="'+yn(n)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=xo(n)}if(!Wn.has(m)&&(n=T({rel:"modulepreload",href:n},s),Wn.set(m,n),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(gu(m)))return}u=o.createElement("link"),nn(u,"link",n),Ot(u),o.head.appendChild(u)}}}function X1(n,s,o){Ei.S(n,s,o);var u=Do;if(u&&n){var f=Rr(u).hoistableStyles,m=No(n);s=s||"default";var v=f.get(m);if(!v){var S={loading:0,preload:null};if(v=u.querySelector(pu(m)))S.loading=5;else{n=T({rel:"stylesheet",href:n,"data-precedence":s},o),(o=Wn.get(m))&&Op(n,o);var O=v=u.createElement("link");Ot(O),nn(O,"link",n),O._p=new Promise(function(Q,ne){O.onload=Q,O.onerror=ne}),O.addEventListener("load",function(){S.loading|=1}),O.addEventListener("error",function(){S.loading|=2}),S.loading|=4,$h(v,s,u)}v={type:"stylesheet",instance:v,count:1,state:S},f.set(m,v)}}}function W1(n,s){Ei.X(n,s);var o=Do;if(o&&n){var u=Rr(o).hoistableScripts,f=xo(n),m=u.get(f);m||(m=o.querySelector(gu(f)),m||(n=T({src:n,async:!0},s),(s=Wn.get(f))&&Vp(n,s),m=o.createElement("script"),Ot(m),nn(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function J1(n,s){Ei.M(n,s);var o=Do;if(o&&n){var u=Rr(o).hoistableScripts,f=xo(n),m=u.get(f);m||(m=o.querySelector(gu(f)),m||(n=T({src:n,async:!0,type:"module"},s),(s=Wn.get(f))&&Vp(n,s),m=o.createElement("script"),Ot(m),nn(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function jT(n,s,o,u){var f=(f=ve.current)?Yh(f):null;if(!f)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=No(o.href),o=Rr(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=No(o.href);var m=Rr(f).hoistableStyles,v=m.get(n);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,v),(m=f.querySelector(pu(n)))&&!m._p&&(v.instance=m,v.state.loading=5),Wn.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Wn.set(n,o),m||Z1(f,n,o,v.state))),s&&u===null)throw Error(i(528,""));return v}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=xo(o),o=Rr(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function No(n){return'href="'+yn(n)+'"'}function pu(n){return'link[rel="stylesheet"]['+n+"]"}function zT(n){return T({},n,{"data-precedence":n.precedence,precedence:null})}function Z1(n,s,o,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),nn(s,"link",o),Ot(s),n.head.appendChild(s))}function xo(n){return'[src="'+yn(n)+'"]'}function gu(n){return"script[async]"+n}function BT(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+yn(o.href)+'"]');if(u)return s.instance=u,Ot(u),u;var f=T({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Ot(u),nn(u,"style",f),$h(u,o.precedence,n),s.instance=u;case"stylesheet":f=No(o.href);var m=n.querySelector(pu(f));if(m)return s.state.loading|=4,s.instance=m,Ot(m),m;u=zT(o),(f=Wn.get(f))&&Op(u,f),m=(n.ownerDocument||n).createElement("link"),Ot(m);var v=m;return v._p=new Promise(function(S,O){v.onload=S,v.onerror=O}),nn(m,"link",u),s.state.loading|=4,$h(m,o.precedence,n),s.instance=m;case"script":return m=xo(o.src),(f=n.querySelector(gu(m)))?(s.instance=f,Ot(f),f):(u=o,(f=Wn.get(m))&&(u=T({},o),Vp(u,f)),n=n.ownerDocument||n,f=n.createElement("script"),Ot(f),nn(f,"link",u),n.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,$h(u,o.precedence,n));return s.instance}function $h(n,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,v=0;v<u.length;v++){var S=u[v];if(S.dataset.precedence===s)m=S;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function Op(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Vp(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var Xh=null;function FT(n,s,o){if(Xh===null){var u=new Map,f=Xh=new Map;f.set(o,u)}else f=Xh,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var m=o[f];if(!(m[wr]||m[xt]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(s)||"";v=n+v;var S=u.get(v);S?S.push(m):u.set(v,[m])}}return u}function qT(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function eC(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(n=s.disabled,typeof s.precedence=="string"&&n==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function HT(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function tC(n,s,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=No(u.href),m=s.querySelector(pu(f));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=Wh.bind(n),s.then(n,n)),o.state.loading|=4,o.instance=m,Ot(m);return}m=s.ownerDocument||s,u=zT(u),(f=Wn.get(f))&&Op(u,f),m=m.createElement("link"),Ot(m);var v=m;v._p=new Promise(function(S,O){v.onload=S,v.onerror=O}),nn(m,"link",u),o.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Wh.bind(n),s.addEventListener("load",o),s.addEventListener("error",o))}}var Pp=0;function nC(n,s){return n.stylesheets&&n.count===0&&Zh(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&Zh(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+s);0<n.imgBytes&&Pp===0&&(Pp=62500*k1());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Zh(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>Pp?50:800)+s);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function Wh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Zh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Jh=null;function Zh(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Jh=new Map,s.forEach(rC,n),Jh=null,Wh.call(n))}function rC(n,s){if(!(s.state.loading&4)){var o=Jh.get(n);if(o)var u=o.get(null);else{o=new Map,Jh.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var v=f[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(o.set(v.dataset.precedence,v),u=v)}u&&o.set(null,u)}f=s.instance,v=f.getAttribute("data-precedence"),m=o.get(v)||u,m===u&&o.set(null,f),o.set(v,f),this.count++,u=Wh.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),s.state.loading|=4}}var yu={$$typeof:X,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function iC(n,s,o,u,f,m,v,S,O){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Sr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sr(0),this.hiddenUpdates=Sr(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function GT(n,s,o,u,f,m,v,S,O,Q,ne,ae){return n=new iC(n,s,o,v,O,Q,ne,ae,S),s=1,m===!0&&(s|=24),m=Cn(3,null,null,s),n.current=m,m.stateNode=n,s=dm(),s.refCount++,n.pooledCache=s,s.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:s},ym(m),n}function KT(n){return n?(n=oo,n):oo}function QT(n,s,o,u,f,m){f=KT(f),u.context===null?u.context=f:u.pendingContext=f,u=$i(s),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=Xi(n,u,s),o!==null&&(Sn(o,n,s),$l(o,n,s))}function YT(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function Mp(n,s){YT(n,s),(n=n.alternate)&&YT(n,s)}function $T(n){if(n.tag===13||n.tag===31){var s=ta(n,67108864);s!==null&&Sn(s,n,67108864),Mp(n,67108864)}}function XT(n){if(n.tag===13||n.tag===31){var s=Vn();s=qs(s);var o=ta(n,s);o!==null&&Sn(o,n,s),Mp(n,s)}}var ef=!0;function sC(n,s,o,u){var f=J.T;J.T=null;var m=fe.p;try{fe.p=2,kp(n,s,o,u)}finally{fe.p=m,J.T=f}}function aC(n,s,o,u){var f=J.T;J.T=null;var m=fe.p;try{fe.p=8,kp(n,s,o,u)}finally{fe.p=m,J.T=f}}function kp(n,s,o,u){if(ef){var f=Lp(u);if(f===null)bp(n,s,u,tf,o),JT(n,u);else if(lC(f,n,s,o,u))u.stopPropagation();else if(JT(n,u),s&4&&-1<oC.indexOf(n)){for(;f!==null;){var m=zn(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=Tr(m.pendingLanes);if(v!==0){var S=m;for(S.pendingLanes|=2,S.entangledLanes|=2;v;){var O=1<<31-At(v);S.entanglements[1]|=O,v&=~O}zr(m),(We&6)===0&&(Lh=hn()+500,hu(0))}}break;case 31:case 13:S=ta(m,2),S!==null&&Sn(S,m,2),jh(),Mp(m,2)}if(m=Lp(u),m===null&&bp(n,s,u,tf,o),m===f)break;f=m}f!==null&&u.stopPropagation()}else bp(n,s,u,null,o)}}function Lp(n){return n=Bn(n),Up(n)}var tf=null;function Up(n){if(tf=null,n=Ir(n),n!==null){var s=l(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=c(s),n!==null)return n;n=null}else if(o===31){if(n=d(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return tf=n,null}function WT(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(js()){case El:return 2;case Tl:return 8;case Pi:case Hd:return 32;case Vc:return 268435456;default:return 32}default:return 32}}var jp=!1,os=null,ls=null,us=null,_u=new Map,vu=new Map,cs=[],oC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function JT(n,s){switch(n){case"focusin":case"focusout":os=null;break;case"dragenter":case"dragleave":ls=null;break;case"mouseover":case"mouseout":us=null;break;case"pointerover":case"pointerout":_u.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":vu.delete(s.pointerId)}}function Eu(n,s,o,u,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},s!==null&&(s=zn(s),s!==null&&$T(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function lC(n,s,o,u,f){switch(s){case"focusin":return os=Eu(os,n,s,o,u,f),!0;case"dragenter":return ls=Eu(ls,n,s,o,u,f),!0;case"mouseover":return us=Eu(us,n,s,o,u,f),!0;case"pointerover":var m=f.pointerId;return _u.set(m,Eu(_u.get(m)||null,n,s,o,u,f)),!0;case"gotpointercapture":return m=f.pointerId,vu.set(m,Eu(vu.get(m)||null,n,s,o,u,f)),!0}return!1}function ZT(n){var s=Ir(n.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){n.blockedOn=s,ar(n.priority,function(){XT(o)});return}}else if(s===31){if(s=d(o),s!==null){n.blockedOn=s,ar(n.priority,function(){XT(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function nf(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=Lp(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);Vl=u,o.target.dispatchEvent(u),Vl=null}else return s=zn(o),s!==null&&$T(s),n.blockedOn=o,!1;s.shift()}return!0}function eb(n,s,o){nf(n)&&o.delete(s)}function uC(){jp=!1,os!==null&&nf(os)&&(os=null),ls!==null&&nf(ls)&&(ls=null),us!==null&&nf(us)&&(us=null),_u.forEach(eb),vu.forEach(eb)}function rf(n,s){n.blockedOn===s&&(n.blockedOn=null,jp||(jp=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,uC)))}var sf=null;function tb(n){sf!==n&&(sf=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){sf===n&&(sf=null);for(var s=0;s<n.length;s+=3){var o=n[s],u=n[s+1],f=n[s+2];if(typeof u!="function"){if(Up(u||o)===null)continue;break}var m=zn(o);m!==null&&(n.splice(s,3),s-=3,Lm(m,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function Oo(n){function s(O){return rf(O,n)}os!==null&&rf(os,n),ls!==null&&rf(ls,n),us!==null&&rf(us,n),_u.forEach(s),vu.forEach(s);for(var o=0;o<cs.length;o++){var u=cs[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<cs.length&&(o=cs[0],o.blockedOn===null);)ZT(o),o.blockedOn===null&&cs.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],m=o[u+1],v=f[Qt]||null;if(typeof m=="function")v||tb(o);else if(v){var S=null;if(m&&m.hasAttribute("formAction")){if(f=m,v=m[Qt]||null)S=v.formAction;else if(Up(f)!==null)continue}else S=v.action;typeof S=="function"?o[u+1]=S:(o.splice(u,3),u-=3),tb(o)}}}function nb(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function zp(n){this._internalRoot=n}af.prototype.render=zp.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,u=Vn();QT(o,u,n,s,null,null)},af.prototype.unmount=zp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;QT(n.current,2,null,n,null,null),jh(),s[Ar]=null}};function af(n){this._internalRoot=n}af.prototype.unstable_scheduleHydration=function(n){if(n){var s=jc();n={blockedOn:null,target:n,priority:s};for(var o=0;o<cs.length&&s!==0&&s<cs[o].priority;o++);cs.splice(o,0,n),o===0&&ZT(n)}};var rb=e.version;if(rb!=="19.2.3")throw Error(i(527,rb,"19.2.3"));fe.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=g(s),n=n!==null?_(n):null,n=n===null?null:n.stateNode,n};var cC={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var of=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!of.isDisabled&&of.supportsFiber)try{ir=of.inject(cC),Wt=of}catch{}}return bu.createRoot=function(n,s){if(!a(n))throw Error(i(299));var o=!1,u="",f=cE,m=hE,v=fE;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),s=GT(n,1,!1,null,null,o,u,null,f,m,v,nb),n[Ar]=s.current,Tp(n),new zp(s)},bu.hydrateRoot=function(n,s,o){if(!a(n))throw Error(i(299));var u=!1,f="",m=cE,v=hE,S=fE,O=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError),o.formState!==void 0&&(O=o.formState)),s=GT(n,1,!0,s,o??null,u,f,O,m,v,S,nb),s.context=KT(null),o=s.current,u=Vn(),u=qs(u),f=$i(u),f.callback=null,Xi(o,f,u),o=u,s.current.lanes=o,Bs(s,o),zr(s),n[Ar]=s.current,Tp(n),new af(s)},bu.version="19.2.3",bu}var db;function TC(){if(db)return qp.exports;db=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),qp.exports=EC(),qp.exports}var bC=TC();var mb="popstate";function SC(r={}){function e(i,a){let{pathname:l,search:c,hash:d}=i.location;return Vg("",{pathname:l,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){return typeof a=="string"?a:$u(a)}return wC(e,t,null,r)}function gt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function nr(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function AC(){return Math.random().toString(36).substring(2,10)}function pb(r,e){return{usr:r.state,key:r.key,idx:e}}function Vg(r,e,t=null,i){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?cl(e):e,state:t,key:e&&e.key||i||AC()}}function $u({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function cl(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let i=r.indexOf("?");i>=0&&(e.search=r.substring(i),r=r.substring(0,i)),r&&(e.pathname=r)}return e}function wC(r,e,t,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,c=a.history,d="POP",p=null,g=_();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function _(){return(c.state||{idx:null}).idx}function T(){d="POP";let k=_(),ie=k==null?null:k-g;g=k,p&&p({action:d,location:L.location,delta:ie})}function b(k,ie){d="PUSH";let K=Vg(L.location,k,ie);g=_()+1;let X=pb(K,g),ue=L.createHref(K);try{c.pushState(X,"",ue)}catch(he){if(he instanceof DOMException&&he.name==="DataCloneError")throw he;a.location.assign(ue)}l&&p&&p({action:d,location:L.location,delta:1})}function V(k,ie){d="REPLACE";let K=Vg(L.location,k,ie);g=_();let X=pb(K,g),ue=L.createHref(K);c.replaceState(X,"",ue),l&&p&&p({action:d,location:L.location,delta:0})}function B(k){return IC(k)}let L={get action(){return d},get location(){return r(a,c)},listen(k){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(mb,T),p=k,()=>{a.removeEventListener(mb,T),p=null}},createHref(k){return e(a,k)},createURL:B,encodeLocation(k){let ie=B(k);return{pathname:ie.pathname,search:ie.search,hash:ie.hash}},push:b,replace:V,go(k){return c.go(k)}};return L}function IC(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),gt(t,"No window.location.(origin|href) available to create URL");let i=typeof r=="string"?r:$u(r);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function J0(r,e,t="/"){return RC(r,e,t,!1)}function RC(r,e,t,i){let a=typeof e=="string"?cl(e):e,l=wi(a.pathname||"/",t);if(l==null)return null;let c=Z0(r);CC(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let g=jC(l);d=LC(c[p],g,i)}return d}function Z0(r,e=[],t=[],i="",a=!1){let l=(c,d,p=a,g)=>{let _={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(i)&&p)return;gt(_.relativePath.startsWith(i),`Absolute route path "${_.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(i.length)}let T=Ai([i,_.relativePath]),b=t.concat(_);c.children&&c.children.length>0&&(gt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),Z0(c.children,e,b,T,p)),!(c.path==null&&!c.index)&&e.push({path:T,score:MC(T,c.index),routesMeta:b})};return r.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))l(c,d);else for(let p of eA(c.path))l(c,d,!0,p)}),e}function eA(r){let e=r.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let c=eA(i.join("/")),d=[];return d.push(...c.map(p=>p===""?l:[l,p].join("/"))),a&&d.push(...c),d.map(p=>r.startsWith("/")&&p===""?"/":p)}function CC(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:kC(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var DC=/^:[\w-]+$/,NC=3,xC=2,OC=1,VC=10,PC=-2,gb=r=>r==="*";function MC(r,e){let t=r.split("/"),i=t.length;return t.some(gb)&&(i+=PC),e&&(i+=xC),t.filter(a=>!gb(a)).reduce((a,l)=>a+(DC.test(l)?NC:l===""?OC:VC),i)}function kC(r,e){return r.length===e.length&&r.slice(0,-1).every((i,a)=>i===e[a])?r[r.length-1]-e[e.length-1]:0}function LC(r,e,t=!1){let{routesMeta:i}=r,a={},l="/",c=[];for(let d=0;d<i.length;++d){let p=i[d],g=d===i.length-1,_=l==="/"?e:e.slice(l.length)||"/",T=Uf({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},_),b=p.route;if(!T&&g&&t&&!i[i.length-1].route.index&&(T=Uf({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},_)),!T)return null;Object.assign(a,T.params),c.push({params:a,pathname:Ai([l,T.pathname]),pathnameBase:qC(Ai([l,T.pathnameBase])),route:b}),T.pathnameBase!=="/"&&(l=Ai([l,T.pathnameBase]))}return c}function Uf(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,i]=UC(r.path,r.caseSensitive,r.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:i.reduce((g,{paramName:_,isOptional:T},b)=>{if(_==="*"){let B=d[b]||"";c=l.slice(0,l.length-B.length).replace(/(.)\/+$/,"$1")}const V=d[b];return T&&!V?g[_]=void 0:g[_]=(V||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:r}}function UC(r,e=!1,t=!0){nr(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let i=[],a="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(i.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(i.push({paramName:"*"}),a+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":r!==""&&r!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function jC(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return nr(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function wi(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=r.charAt(t);return i&&i!=="/"?null:r.slice(t)||"/"}var tA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zC=r=>tA.test(r);function BC(r,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof r=="string"?cl(r):r,l;if(t)if(zC(t))l=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),nr(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${t}`)}t.startsWith("/")?l=yb(t.substring(1),"/"):l=yb(t,e)}else l=e;return{pathname:l,search:HC(i),hash:GC(a)}}function yb(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Qp(r,e,t,i){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function FC(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function gy(r){let e=FC(r);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function yy(r,e,t,i=!1){let a;typeof r=="string"?a=cl(r):(a={...r},gt(!a.pathname||!a.pathname.includes("?"),Qp("?","pathname","search",a)),gt(!a.pathname||!a.pathname.includes("#"),Qp("#","pathname","hash",a)),gt(!a.search||!a.search.includes("#"),Qp("#","search","hash",a)));let l=r===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=t;else{let T=e.length-1;if(!i&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),T-=1;a.pathname=b.join("/")}d=T>=0?e[T]:"/"}let p=BC(a,d),g=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(g||_)&&(p.pathname+="/"),p}var Ai=r=>r.join("/").replace(/\/\/+/g,"/"),qC=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),HC=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,GC=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,KC=class{constructor(r,e,t,i=!1){this.status=r,this.statusText=e||"",this.internal=i,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function QC(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function YC(r){return r.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var nA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function rA(r,e){let t=r;if(typeof t!="string"||!tA.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let i=t,a=!1;if(nA)try{let l=new URL(window.location.href),c=t.startsWith("//")?new URL(l.protocol+t):new URL(t),d=wi(c.pathname,e);c.origin===l.origin&&d!=null?t=d+c.search+c.hash:a=!0}catch{nr(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:a,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var iA=["POST","PUT","PATCH","DELETE"];new Set(iA);var $C=["GET",...iA];new Set($C);var hl=z.createContext(null);hl.displayName="DataRouter";var fd=z.createContext(null);fd.displayName="DataRouterState";var XC=z.createContext(!1),sA=z.createContext({isTransitioning:!1});sA.displayName="ViewTransition";var WC=z.createContext(new Map);WC.displayName="Fetchers";var JC=z.createContext(null);JC.displayName="Await";var Un=z.createContext(null);Un.displayName="Navigation";var dc=z.createContext(null);dc.displayName="Location";var Zr=z.createContext({outlet:null,matches:[],isDataRoute:!1});Zr.displayName="Route";var _y=z.createContext(null);_y.displayName="RouteError";var aA="REACT_ROUTER_ERROR",ZC="REDIRECT",eD="ROUTE_ERROR_RESPONSE";function tD(r){if(r.startsWith(`${aA}:${ZC}:{`))try{let e=JSON.parse(r.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function nD(r){if(r.startsWith(`${aA}:${eD}:{`))try{let e=JSON.parse(r.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new KC(e.status,e.statusText,e.data)}catch{}}function rD(r,{relative:e}={}){gt(fl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=z.useContext(Un),{hash:a,pathname:l,search:c}=mc(r,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:Ai([t,l])),i.createHref({pathname:d,search:c,hash:a})}function fl(){return z.useContext(dc)!=null}function Vs(){return gt(fl(),"useLocation() may be used only in the context of a <Router> component."),z.useContext(dc).location}var oA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function lA(r){z.useContext(Un).static||z.useLayoutEffect(r)}function vy(){let{isDataRoute:r}=z.useContext(Zr);return r?gD():iD()}function iD(){gt(fl(),"useNavigate() may be used only in the context of a <Router> component.");let r=z.useContext(hl),{basename:e,navigator:t}=z.useContext(Un),{matches:i}=z.useContext(Zr),{pathname:a}=Vs(),l=JSON.stringify(gy(i)),c=z.useRef(!1);return lA(()=>{c.current=!0}),z.useCallback((p,g={})=>{if(nr(c.current,oA),!c.current)return;if(typeof p=="number"){t.go(p);return}let _=yy(p,JSON.parse(l),a,g.relative==="path");r==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Ai([e,_.pathname])),(g.replace?t.replace:t.push)(_,g.state,g)},[e,t,l,a,r])}z.createContext(null);function mc(r,{relative:e}={}){let{matches:t}=z.useContext(Zr),{pathname:i}=Vs(),a=JSON.stringify(gy(t));return z.useMemo(()=>yy(r,JSON.parse(a),i,e==="path"),[r,a,i,e])}function sD(r,e){return uA(r,e)}function uA(r,e,t,i,a){gt(fl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=z.useContext(Un),{matches:c}=z.useContext(Zr),d=c[c.length-1],p=d?d.params:{},g=d?d.pathname:"/",_=d?d.pathnameBase:"/",T=d&&d.route;{let K=T&&T.path||"";hA(g,!T||K.endsWith("*")||K.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${K}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${K}"> to <Route path="${K==="/"?"*":`${K}/*`}">.`)}let b=Vs(),V;if(e){let K=typeof e=="string"?cl(e):e;gt(_==="/"||K.pathname?.startsWith(_),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${K.pathname}" was given in the \`location\` prop.`),V=K}else V=b;let B=V.pathname||"/",L=B;if(_!=="/"){let K=_.replace(/^\//,"").split("/");L="/"+B.replace(/^\//,"").split("/").slice(K.length).join("/")}let k=J0(r,{pathname:L});nr(T||k!=null,`No routes matched location "${V.pathname}${V.search}${V.hash}" `),nr(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${V.pathname}${V.search}${V.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let ie=cD(k&&k.map(K=>Object.assign({},K,{params:Object.assign({},p,K.params),pathname:Ai([_,l.encodeLocation?l.encodeLocation(K.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:K.pathname]),pathnameBase:K.pathnameBase==="/"?_:Ai([_,l.encodeLocation?l.encodeLocation(K.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:K.pathnameBase])})),c,t,i,a);return e&&ie?z.createElement(dc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...V},navigationType:"POP"}},ie):ie}function aD(){let r=pD(),e=QC(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",r),c=z.createElement(z.Fragment,null,z.createElement("p",null," Hey developer "),z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",z.createElement("code",{style:l},"ErrorBoundary")," or"," ",z.createElement("code",{style:l},"errorElement")," prop on your route.")),z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),t?z.createElement("pre",{style:a},t):null,c)}var oD=z.createElement(aD,null),cA=class extends z.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.onError?this.props.onError(r,e):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const t=nD(r.digest);t&&(r=t)}let e=r!==void 0?z.createElement(Zr.Provider,{value:this.props.routeContext},z.createElement(_y.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?z.createElement(lD,{error:r},e):e}};cA.contextType=XC;var Yp=new WeakMap;function lD({children:r,error:e}){let{basename:t}=z.useContext(Un);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=tD(e.digest);if(i){let a=Yp.get(e);if(a)throw a;let l=rA(i.location,t);if(nA&&!Yp.get(e))if(l.isExternal||i.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:i.replace}));throw Yp.set(e,c),c}return z.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return r}function uD({routeContext:r,match:e,children:t}){let i=z.useContext(hl);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),z.createElement(Zr.Provider,{value:r},t)}function cD(r,e=[],t=null,i=null,a=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let l=r,c=t?.errors;if(c!=null){let _=l.findIndex(T=>T.route.id&&c?.[T.route.id]!==void 0);gt(_>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,_+1))}let d=!1,p=-1;if(t)for(let _=0;_<l.length;_++){let T=l[_];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(p=_),T.route.id){let{loaderData:b,errors:V}=t,B=T.route.loader&&!b.hasOwnProperty(T.route.id)&&(!V||V[T.route.id]===void 0);if(T.route.lazy||B){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}let g=t&&i?(_,T)=>{i(_,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:YC(t.matches),errorInfo:T})}:void 0;return l.reduceRight((_,T,b)=>{let V,B=!1,L=null,k=null;t&&(V=c&&T.route.id?c[T.route.id]:void 0,L=T.route.errorElement||oD,d&&(p<0&&b===0?(hA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),B=!0,k=null):p===b&&(B=!0,k=T.route.hydrateFallbackElement||null)));let ie=e.concat(l.slice(0,b+1)),K=()=>{let X;return V?X=L:B?X=k:T.route.Component?X=z.createElement(T.route.Component,null):T.route.element?X=T.route.element:X=_,z.createElement(uD,{match:T,routeContext:{outlet:_,matches:ie,isDataRoute:t!=null},children:X})};return t&&(T.route.ErrorBoundary||T.route.errorElement||b===0)?z.createElement(cA,{location:t.location,revalidation:t.revalidation,component:L,error:V,children:K(),routeContext:{outlet:null,matches:ie,isDataRoute:!0},onError:g}):K()},null)}function Ey(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hD(r){let e=z.useContext(hl);return gt(e,Ey(r)),e}function fD(r){let e=z.useContext(fd);return gt(e,Ey(r)),e}function dD(r){let e=z.useContext(Zr);return gt(e,Ey(r)),e}function Ty(r){let e=dD(r),t=e.matches[e.matches.length-1];return gt(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function mD(){return Ty("useRouteId")}function pD(){let r=z.useContext(_y),e=fD("useRouteError"),t=Ty("useRouteError");return r!==void 0?r:e.errors?.[t]}function gD(){let{router:r}=hD("useNavigate"),e=Ty("useNavigate"),t=z.useRef(!1);return lA(()=>{t.current=!0}),z.useCallback(async(a,l={})=>{nr(t.current,oA),t.current&&(typeof a=="number"?await r.navigate(a):await r.navigate(a,{fromRouteId:e,...l}))},[r,e])}var _b={};function hA(r,e,t){!e&&!_b[r]&&(_b[r]=!0,nr(!1,t))}z.memo(yD);function yD({routes:r,future:e,state:t,onError:i}){return uA(r,void 0,t,i,e)}function by({to:r,replace:e,state:t,relative:i}){gt(fl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=z.useContext(Un);nr(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=z.useContext(Zr),{pathname:c}=Vs(),d=vy(),p=yy(r,gy(l),c,i==="path"),g=JSON.stringify(p);return z.useEffect(()=>{d(JSON.parse(g),{replace:e,state:t,relative:i})},[d,g,i,e,t]),null}function _f(r){gt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function _D({basename:r="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:l=!1,unstable_useTransitions:c}){gt(!fl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=r.replace(/^\/*/,"/"),p=z.useMemo(()=>({basename:d,navigator:a,static:l,unstable_useTransitions:c,future:{}}),[d,a,l,c]);typeof t=="string"&&(t=cl(t));let{pathname:g="/",search:_="",hash:T="",state:b=null,key:V="default"}=t,B=z.useMemo(()=>{let L=wi(g,d);return L==null?null:{location:{pathname:L,search:_,hash:T,state:b,key:V},navigationType:i}},[d,g,_,T,b,V,i]);return nr(B!=null,`<Router basename="${d}"> is not able to match the URL "${g}${_}${T}" because it does not start with the basename, so the <Router> won't render anything.`),B==null?null:z.createElement(Un.Provider,{value:p},z.createElement(dc.Provider,{children:e,value:B}))}function vD({children:r,location:e}){return sD(Pg(r),e)}function Pg(r,e=[]){let t=[];return z.Children.forEach(r,(i,a)=>{if(!z.isValidElement(i))return;let l=[...e,a];if(i.type===z.Fragment){t.push.apply(t,Pg(i.props.children,l));return}gt(i.type===_f,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),gt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=Pg(i.props.children,l)),t.push(c)}),t}var vf="get",Ef="application/x-www-form-urlencoded";function dd(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function ED(r){return dd(r)&&r.tagName.toLowerCase()==="button"}function TD(r){return dd(r)&&r.tagName.toLowerCase()==="form"}function bD(r){return dd(r)&&r.tagName.toLowerCase()==="input"}function SD(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function AD(r,e){return r.button===0&&(!e||e==="_self")&&!SD(r)}var lf=null;function wD(){if(lf===null)try{new FormData(document.createElement("form"),0),lf=!1}catch{lf=!0}return lf}var ID=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function $p(r){return r!=null&&!ID.has(r)?(nr(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ef}"`),null):r}function RD(r,e){let t,i,a,l,c;if(TD(r)){let d=r.getAttribute("action");i=d?wi(d,e):null,t=r.getAttribute("method")||vf,a=$p(r.getAttribute("enctype"))||Ef,l=new FormData(r)}else if(ED(r)||bD(r)&&(r.type==="submit"||r.type==="image")){let d=r.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=r.getAttribute("formaction")||d.getAttribute("action");if(i=p?wi(p,e):null,t=r.getAttribute("formmethod")||d.getAttribute("method")||vf,a=$p(r.getAttribute("formenctype"))||$p(d.getAttribute("enctype"))||Ef,l=new FormData(d,r),!wD()){let{name:g,type:_,value:T}=r;if(_==="image"){let b=g?`${g}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else g&&l.append(g,T)}}else{if(dd(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=vf,i=null,a=Ef,c=r}return l&&a==="text/plain"&&(c=l,l=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Sy(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function CD(r,e,t,i){let a=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return t?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${i}`:a.pathname=`${a.pathname}.${i}`:a.pathname==="/"?a.pathname=`_root.${i}`:e&&wi(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${i}`,a}async function DD(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ND(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function xD(r,e,t){let i=await Promise.all(r.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await DD(l,t);return c.links?c.links():[]}return[]}));return MD(i.flat(1).filter(ND).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function vb(r,e,t,i,a,l){let c=(p,g)=>t[g]?p.route.id!==t[g].route.id:!0,d=(p,g)=>t[g].pathname!==p.pathname||t[g].route.path?.endsWith("*")&&t[g].params["*"]!==p.params["*"];return l==="assets"?e.filter((p,g)=>c(p,g)||d(p,g)):l==="data"?e.filter((p,g)=>{let _=i.routes[p.route.id];if(!_||!_.hasLoader)return!1;if(c(p,g)||d(p,g))return!0;if(p.route.shouldRevalidate){let T=p.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function OD(r,e,{includeHydrateFallback:t}={}){return VD(r.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function VD(r){return[...new Set(r)]}function PD(r){let e={},t=Object.keys(r).sort();for(let i of t)e[i]=r[i];return e}function MD(r,e){let t=new Set;return new Set(e),r.reduce((i,a)=>{let l=JSON.stringify(PD(a));return t.has(l)||(t.add(l),i.push({key:l,link:a})),i},[])}function fA(){let r=z.useContext(hl);return Sy(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function kD(){let r=z.useContext(fd);return Sy(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Ay=z.createContext(void 0);Ay.displayName="FrameworkContext";function dA(){let r=z.useContext(Ay);return Sy(r,"You must render this element inside a <HydratedRouter> element"),r}function LD(r,e){let t=z.useContext(Ay),[i,a]=z.useState(!1),[l,c]=z.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:g,onMouseLeave:_,onTouchStart:T}=e,b=z.useRef(null);z.useEffect(()=>{if(r==="render"&&c(!0),r==="viewport"){let L=ie=>{ie.forEach(K=>{c(K.isIntersecting)})},k=new IntersectionObserver(L,{threshold:.5});return b.current&&k.observe(b.current),()=>{k.disconnect()}}},[r]),z.useEffect(()=>{if(i){let L=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(L)}}},[i]);let V=()=>{a(!0)},B=()=>{a(!1),c(!1)};return t?r!=="intent"?[l,b,{}]:[l,b,{onFocus:Su(d,V),onBlur:Su(p,B),onMouseEnter:Su(g,V),onMouseLeave:Su(_,B),onTouchStart:Su(T,V)}]:[!1,b,{}]}function Su(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function UD({page:r,...e}){let{router:t}=fA(),i=z.useMemo(()=>J0(t.routes,r,t.basename),[t.routes,r,t.basename]);return i?z.createElement(zD,{page:r,matches:i,...e}):null}function jD(r){let{manifest:e,routeModules:t}=dA(),[i,a]=z.useState([]);return z.useEffect(()=>{let l=!1;return xD(r,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[r,e,t]),i}function zD({page:r,matches:e,...t}){let i=Vs(),{future:a,manifest:l,routeModules:c}=dA(),{basename:d}=fA(),{loaderData:p,matches:g}=kD(),_=z.useMemo(()=>vb(r,e,g,l,i,"data"),[r,e,g,l,i]),T=z.useMemo(()=>vb(r,e,g,l,i,"assets"),[r,e,g,l,i]),b=z.useMemo(()=>{if(r===i.pathname+i.search+i.hash)return[];let L=new Set,k=!1;if(e.forEach(K=>{let X=l.routes[K.route.id];!X||!X.hasLoader||(!_.some(ue=>ue.route.id===K.route.id)&&K.route.id in p&&c[K.route.id]?.shouldRevalidate||X.hasClientLoader?k=!0:L.add(K.route.id))}),L.size===0)return[];let ie=CD(r,d,a.unstable_trailingSlashAwareDataRequests,"data");return k&&L.size>0&&ie.searchParams.set("_routes",e.filter(K=>L.has(K.route.id)).map(K=>K.route.id).join(",")),[ie.pathname+ie.search]},[d,a.unstable_trailingSlashAwareDataRequests,p,i,l,_,e,r,c]),V=z.useMemo(()=>OD(T,l),[T,l]),B=jD(T);return z.createElement(z.Fragment,null,b.map(L=>z.createElement("link",{key:L,rel:"prefetch",as:"fetch",href:L,...t})),V.map(L=>z.createElement("link",{key:L,rel:"modulepreload",href:L,...t})),B.map(({key:L,link:k})=>z.createElement("link",{key:L,nonce:t.nonce,...k})))}function BD(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var FD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{FD&&(window.__reactRouterVersion="7.12.0")}catch{}function qD({basename:r,children:e,unstable_useTransitions:t,window:i}){let a=z.useRef();a.current==null&&(a.current=SC({window:i,v5Compat:!0}));let l=a.current,[c,d]=z.useState({action:l.action,location:l.location}),p=z.useCallback(g=>{t===!1?d(g):z.startTransition(()=>d(g))},[t]);return z.useLayoutEffect(()=>l.listen(p),[l,p]),z.createElement(_D,{basename:r,children:e,location:c.location,navigationType:c.action,navigator:l,unstable_useTransitions:t})}var mA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pA=z.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:l,replace:c,state:d,target:p,to:g,preventScrollReset:_,viewTransition:T,unstable_defaultShouldRevalidate:b,...V},B){let{basename:L,unstable_useTransitions:k}=z.useContext(Un),ie=typeof g=="string"&&mA.test(g),K=rA(g,L);g=K.to;let X=rD(g,{relative:a}),[ue,he,oe]=LD(i,V),C=QD(g,{replace:c,state:d,target:p,preventScrollReset:_,relative:a,viewTransition:T,unstable_defaultShouldRevalidate:b,unstable_useTransitions:k});function w(P){e&&e(P),P.defaultPrevented||C(P)}let D=z.createElement("a",{...V,...oe,href:K.absoluteURL||X,onClick:K.isExternal||l?e:w,ref:BD(B,he),target:p,"data-discover":!ie&&t==="render"?"true":void 0});return ue&&!ie?z.createElement(z.Fragment,null,D,z.createElement(UD,{page:X})):D});pA.displayName="Link";var HD=z.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:d,children:p,...g},_){let T=mc(c,{relative:g.relative}),b=Vs(),V=z.useContext(fd),{navigator:B,basename:L}=z.useContext(Un),k=V!=null&&JD(T)&&d===!0,ie=B.encodeLocation?B.encodeLocation(T).pathname:T.pathname,K=b.pathname,X=V&&V.navigation&&V.navigation.location?V.navigation.location.pathname:null;t||(K=K.toLowerCase(),X=X?X.toLowerCase():null,ie=ie.toLowerCase()),X&&L&&(X=wi(X,L)||X);const ue=ie!=="/"&&ie.endsWith("/")?ie.length-1:ie.length;let he=K===ie||!a&&K.startsWith(ie)&&K.charAt(ue)==="/",oe=X!=null&&(X===ie||!a&&X.startsWith(ie)&&X.charAt(ie.length)==="/"),C={isActive:he,isPending:oe,isTransitioning:k},w=he?e:void 0,D;typeof i=="function"?D=i(C):D=[i,he?"active":null,oe?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let P=typeof l=="function"?l(C):l;return z.createElement(pA,{...g,"aria-current":w,className:D,ref:_,style:P,to:c,viewTransition:d},typeof p=="function"?p(C):p)});HD.displayName="NavLink";var GD=z.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:l,method:c=vf,action:d,onSubmit:p,relative:g,preventScrollReset:_,viewTransition:T,unstable_defaultShouldRevalidate:b,...V},B)=>{let{unstable_useTransitions:L}=z.useContext(Un),k=XD(),ie=WD(d,{relative:g}),K=c.toLowerCase()==="get"?"get":"post",X=typeof d=="string"&&mA.test(d),ue=he=>{if(p&&p(he),he.defaultPrevented)return;he.preventDefault();let oe=he.nativeEvent.submitter,C=oe?.getAttribute("formmethod")||c,w=()=>k(oe||he.currentTarget,{fetcherKey:e,method:C,navigate:t,replace:a,state:l,relative:g,preventScrollReset:_,viewTransition:T,unstable_defaultShouldRevalidate:b});L&&t!==!1?z.startTransition(()=>w()):w()};return z.createElement("form",{ref:B,method:K,action:ie,onSubmit:i?p:ue,...V,"data-discover":!X&&r==="render"?"true":void 0})});GD.displayName="Form";function KD(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function gA(r){let e=z.useContext(hl);return gt(e,KD(r)),e}function QD(r,{target:e,replace:t,state:i,preventScrollReset:a,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d,unstable_useTransitions:p}={}){let g=vy(),_=Vs(),T=mc(r,{relative:l});return z.useCallback(b=>{if(AD(b,e)){b.preventDefault();let V=t!==void 0?t:$u(_)===$u(T),B=()=>g(r,{replace:V,state:i,preventScrollReset:a,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d});p?z.startTransition(()=>B()):B()}},[_,g,T,t,i,e,r,a,l,c,d,p])}var YD=0,$D=()=>`__${String(++YD)}__`;function XD(){let{router:r}=gA("useSubmit"),{basename:e}=z.useContext(Un),t=mD(),i=r.fetch,a=r.navigate;return z.useCallback(async(l,c={})=>{let{action:d,method:p,encType:g,formData:_,body:T}=RD(l,e);if(c.navigate===!1){let b=c.fetcherKey||$D();await i(b,t,c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:_,body:T,formMethod:c.method||p,formEncType:c.encType||g,flushSync:c.flushSync})}else await a(c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:_,body:T,formMethod:c.method||p,formEncType:c.encType||g,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[i,a,e,t])}function WD(r,{relative:e}={}){let{basename:t}=z.useContext(Un),i=z.useContext(Zr);gt(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...mc(r||".",{relative:e})},c=Vs();if(r==null){l.search=c.search;let d=new URLSearchParams(l.search),p=d.getAll("index");if(p.some(_=>_==="")){d.delete("index"),p.filter(T=>T).forEach(T=>d.append("index",T));let _=d.toString();l.search=_?`?${_}`:""}}return(!r||r===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Ai([t,l.pathname])),$u(l)}function JD(r,{relative:e}={}){let t=z.useContext(sA);gt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=gA("useViewTransitionState"),a=mc(r,{relative:e});if(!t.isTransitioning)return!1;let l=wi(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=wi(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Uf(a.pathname,c)!=null||Uf(a.pathname,l)!=null}const ZD=()=>{};var Eb={};const yA=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let a=r.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},eN=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const a=r[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=r[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=r[t++],c=r[t++],d=r[t++],p=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=r[t++],c=r[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},_A={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<r.length;a+=3){const l=r[a],c=a+1<r.length,d=c?r[a+1]:0,p=a+2<r.length,g=p?r[a+2]:0,_=l>>2,T=(l&3)<<4|d>>4;let b=(d&15)<<2|g>>6,V=g&63;p||(V=64,c||(b=64)),i.push(t[_],t[T],t[b],t[V])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(yA(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):eN(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<r.length;){const l=t[r.charAt(a++)],d=a<r.length?t[r.charAt(a)]:0;++a;const g=a<r.length?t[r.charAt(a)]:64;++a;const T=a<r.length?t[r.charAt(a)]:64;if(++a,l==null||d==null||g==null||T==null)throw new tN;const b=l<<2|d>>4;if(i.push(b),g!==64){const V=d<<4&240|g>>2;if(i.push(V),T!==64){const B=g<<6&192|T;i.push(B)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class tN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nN=function(r){const e=yA(r);return _A.encodeByteArray(e,!0)},jf=function(r){return nN(r).replace(/\./g,"")},vA=function(r){try{return _A.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function EA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const rN=()=>EA().__FIREBASE_DEFAULTS__,iN=()=>{if(typeof process>"u"||typeof Eb>"u")return;const r=Eb.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},sN=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&vA(r[1]);return e&&JSON.parse(e)},md=()=>{try{return ZD()||rN()||iN()||sN()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},TA=r=>md()?.emulatorHosts?.[r],bA=r=>{const e=TA(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},SA=()=>md()?.config,AA=r=>md()?.[`_${r}`];class aN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function ja(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function wy(r){return(await fetch(r,{credentials:"include"})).ok}function wA(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[jf(JSON.stringify(t)),jf(JSON.stringify(c)),""].join(".")}const Uu={};function oN(){const r={prod:[],emulator:[]};for(const e of Object.keys(Uu))Uu[e]?r.emulator.push(e):r.prod.push(e);return r}function lN(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Tb=!1;function Iy(r,e){if(typeof window>"u"||typeof document>"u"||!ja(window.location.host)||Uu[r]===e||Uu[r]||Tb)return;Uu[r]=e;function t(b){return`__firebase__banner__${b}`}const i="__firebase__banner",l=oN().prod.length>0;function c(){const b=document.getElementById(i);b&&b.remove()}function d(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function p(b,V){b.setAttribute("width","24"),b.setAttribute("id",V),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function g(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{Tb=!0,c()},b}function _(b,V){b.setAttribute("id",V),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function T(){const b=lN(i),V=t("text"),B=document.getElementById(V)||document.createElement("span"),L=t("learnmore"),k=document.getElementById(L)||document.createElement("a"),ie=t("preprendIcon"),K=document.getElementById(ie)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const X=b.element;d(X),_(k,L);const ue=g();p(K,ie),X.append(K,B,k,ue),document.body.appendChild(X)}l?(B.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,B.innerText="Preview backend running in this workspace."),B.setAttribute("id",V)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function Gt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gt())}function IA(){const r=md()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hN(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function fN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dN(){const r=Gt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function RA(){return!IA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function CA(){return!IA()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function DA(){try{return typeof indexedDB=="object"}catch{return!1}}function mN(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}const pN="FirebaseError";class ei extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=pN,Object.setPrototypeOf(this,ei.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pc.prototype.create)}}class pc{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?gN(l,i):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new ei(a,d,i)}}function gN(r,e){return r.replace(yN,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const yN=/\{\$([^}]+)}/g;function _N(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Ca(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=r[a],c=e[a];if(bb(l)&&bb(c)){if(!Ca(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function bb(r){return r!==null&&typeof r=="object"}function gc(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function xu(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,l]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function Ou(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function vN(r,e){const t=new EN(r,e);return t.subscribe.bind(t)}class EN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");TN(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=Xp),a.error===void 0&&(a.error=Xp),a.complete===void 0&&(a.complete=Xp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function TN(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Xp(){}function zt(r){return r&&r._delegate?r._delegate:r}class Cs{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const pa="[DEFAULT]";class bN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new aN;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(AN(e))try{this.getOrInitializeService({instanceIdentifier:pa})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=pa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=pa){return this.instances.has(e)}getOptions(e=pa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&c.resolve(a)}return a}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:SN(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=pa){return this.component?this.component.multipleInstances?e:pa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function SN(r){return r===pa?void 0:r}function AN(r){return r.instantiationMode==="EAGER"}class wN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new bN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var qe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(qe||(qe={}));const IN={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},RN=qe.INFO,CN={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},DN=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),a=CN[e];if(a)console[a](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ry{constructor(e){this.name=e,this._logLevel=RN,this._logHandler=DN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?IN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const NN=(r,e)=>e.some(t=>r instanceof t);let Sb,Ab;function xN(){return Sb||(Sb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ON(){return Ab||(Ab=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const NA=new WeakMap,Mg=new WeakMap,xA=new WeakMap,Wp=new WeakMap,Cy=new WeakMap;function VN(r){const e=new Promise((t,i)=>{const a=()=>{r.removeEventListener("success",l),r.removeEventListener("error",c)},l=()=>{t(bs(r.result)),a()},c=()=>{i(r.error),a()};r.addEventListener("success",l),r.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&NA.set(t,r)}).catch(()=>{}),Cy.set(e,r),e}function PN(r){if(Mg.has(r))return;const e=new Promise((t,i)=>{const a=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",c),r.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{i(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",l),r.addEventListener("error",c),r.addEventListener("abort",c)});Mg.set(r,e)}let kg={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Mg.get(r);if(e==="objectStoreNames")return r.objectStoreNames||xA.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return bs(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function MN(r){kg=r(kg)}function kN(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(Jp(this),e,...t);return xA.set(i,e.sort?e.sort():[e]),bs(i)}:ON().includes(r)?function(...e){return r.apply(Jp(this),e),bs(NA.get(this))}:function(...e){return bs(r.apply(Jp(this),e))}}function LN(r){return typeof r=="function"?kN(r):(r instanceof IDBTransaction&&PN(r),NN(r,xN())?new Proxy(r,kg):r)}function bs(r){if(r instanceof IDBRequest)return VN(r);if(Wp.has(r))return Wp.get(r);const e=LN(r);return e!==r&&(Wp.set(r,e),Cy.set(e,r)),e}const Jp=r=>Cy.get(r);function UN(r,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(r,e),d=bs(c);return i&&c.addEventListener("upgradeneeded",p=>{i(bs(c.result),p.oldVersion,p.newVersion,bs(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),a&&p.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const jN=["get","getKey","getAll","getAllKeys","count"],zN=["put","add","delete","clear"],Zp=new Map;function wb(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Zp.get(e))return Zp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=zN.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||jN.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,a?"readwrite":"readonly");let g=p.store;return i&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),a&&p.done]))[0]};return Zp.set(e,l),l}MN(r=>({...r,get:(e,t,i)=>wb(e,t)||r.get(e,t,i),has:(e,t)=>!!wb(e,t)||r.has(e,t)}));class BN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(FN(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function FN(r){return r.getComponent()?.type==="VERSION"}const Lg="@firebase/app",Ib="0.14.6";const Ii=new Ry("@firebase/app"),qN="@firebase/app-compat",HN="@firebase/analytics-compat",GN="@firebase/analytics",KN="@firebase/app-check-compat",QN="@firebase/app-check",YN="@firebase/auth",$N="@firebase/auth-compat",XN="@firebase/database",WN="@firebase/data-connect",JN="@firebase/database-compat",ZN="@firebase/functions",ex="@firebase/functions-compat",tx="@firebase/installations",nx="@firebase/installations-compat",rx="@firebase/messaging",ix="@firebase/messaging-compat",sx="@firebase/performance",ax="@firebase/performance-compat",ox="@firebase/remote-config",lx="@firebase/remote-config-compat",ux="@firebase/storage",cx="@firebase/storage-compat",hx="@firebase/firestore",fx="@firebase/ai",dx="@firebase/firestore-compat",mx="firebase",px="12.6.0";const Ug="[DEFAULT]",gx={[Lg]:"fire-core",[qN]:"fire-core-compat",[GN]:"fire-analytics",[HN]:"fire-analytics-compat",[QN]:"fire-app-check",[KN]:"fire-app-check-compat",[YN]:"fire-auth",[$N]:"fire-auth-compat",[XN]:"fire-rtdb",[WN]:"fire-data-connect",[JN]:"fire-rtdb-compat",[ZN]:"fire-fn",[ex]:"fire-fn-compat",[tx]:"fire-iid",[nx]:"fire-iid-compat",[rx]:"fire-fcm",[ix]:"fire-fcm-compat",[sx]:"fire-perf",[ax]:"fire-perf-compat",[ox]:"fire-rc",[lx]:"fire-rc-compat",[ux]:"fire-gcs",[cx]:"fire-gcs-compat",[hx]:"fire-fst",[dx]:"fire-fst-compat",[fx]:"fire-vertex","fire-js":"fire-js",[mx]:"fire-js-all"};const zf=new Map,yx=new Map,jg=new Map;function Rb(r,e){try{r.container.addComponent(e)}catch(t){Ii.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Da(r){const e=r.name;if(jg.has(e))return Ii.debug(`There were multiple attempts to register component ${e}.`),!1;jg.set(e,r);for(const t of zf.values())Rb(t,r);for(const t of yx.values())Rb(t,r);return!0}function pd(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Jn(r){return r==null?!1:r.settings!==void 0}const _x={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ss=new pc("app","Firebase",_x);class vx{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Cs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ss.create("app-deleted",{appName:this._name})}}const za=px;function OA(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i={name:Ug,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw Ss.create("bad-app-name",{appName:String(a)});if(t||(t=SA()),!t)throw Ss.create("no-options");const l=zf.get(a);if(l){if(Ca(t,l.options)&&Ca(i,l.config))return l;throw Ss.create("duplicate-app",{appName:a})}const c=new wN(a);for(const p of jg.values())c.addComponent(p);const d=new vx(t,i,c);return zf.set(a,d),d}function Dy(r=Ug){const e=zf.get(r);if(!e&&r===Ug&&SA())return OA();if(!e)throw Ss.create("no-app",{appName:r});return e}function Gr(r,e,t){let i=gx[r]??r;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ii.warn(c.join(" "));return}Da(new Cs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const Ex="firebase-heartbeat-database",Tx=1,Xu="firebase-heartbeat-store";let eg=null;function VA(){return eg||(eg=UN(Ex,Tx,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Xu)}catch(t){console.warn(t)}}}}).catch(r=>{throw Ss.create("idb-open",{originalErrorMessage:r.message})})),eg}async function bx(r){try{const t=(await VA()).transaction(Xu),i=await t.objectStore(Xu).get(PA(r));return await t.done,i}catch(e){if(e instanceof ei)Ii.warn(e.message);else{const t=Ss.create("idb-get",{originalErrorMessage:e?.message});Ii.warn(t.message)}}}async function Cb(r,e){try{const i=(await VA()).transaction(Xu,"readwrite");await i.objectStore(Xu).put(e,PA(r)),await i.done}catch(t){if(t instanceof ei)Ii.warn(t.message);else{const i=Ss.create("idb-set",{originalErrorMessage:t?.message});Ii.warn(i.message)}}}function PA(r){return`${r.name}!${r.options.appId}`}const Sx=1024,Ax=30;class wx{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Rx(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Db();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>Ax){const a=Cx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ii.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Db(),{heartbeatsToSend:t,unsentEntries:i}=Ix(this._heartbeatsCache.heartbeats),a=jf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return Ii.warn(e),""}}}function Db(){return new Date().toISOString().substring(0,10)}function Ix(r,e=Sx){const t=[];let i=r.slice();for(const a of r){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),Nb(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),Nb(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class Rx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return DA()?mN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await bx(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Cb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Cb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Nb(r){return jf(JSON.stringify({version:2,heartbeats:r})).length}function Cx(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}function Dx(r){Da(new Cs("platform-logger",e=>new BN(e),"PRIVATE")),Da(new Cs("heartbeat",e=>new wx(e),"PRIVATE")),Gr(Lg,Ib,r),Gr(Lg,Ib,"esm2020"),Gr("fire-js","")}Dx("");function MA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Nx=MA,kA=new pc("auth","Firebase",MA());const Bf=new Ry("@firebase/auth");function xx(r,...e){Bf.logLevel<=qe.WARN&&Bf.warn(`Auth (${za}): ${r}`,...e)}function Tf(r,...e){Bf.logLevel<=qe.ERROR&&Bf.error(`Auth (${za}): ${r}`,...e)}function vr(r,...e){throw Ny(r,...e)}function Kr(r,...e){return Ny(r,...e)}function LA(r,e,t){const i={...Nx(),[e]:t};return new pc("auth","Firebase",i).create(e,{appName:r.name})}function As(r){return LA(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ny(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return kA.create(r,...e)}function Ne(r,e,...t){if(!r)throw Ny(e,...t)}function Ti(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Tf(e),new Error(e)}function Ri(r,e){r||Ti(e)}function zg(){return typeof self<"u"&&self.location?.href||""}function Ox(){return xb()==="http:"||xb()==="https:"}function xb(){return typeof self<"u"&&self.location?.protocol||null}function Vx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ox()||hN()||"connection"in navigator)?navigator.onLine:!0}function Px(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class yc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ri(t>e,"Short delay should be less than long delay!"),this.isMobile=uN()||fN()}get(){return Vx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function xy(r,e){Ri(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class UA{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ti("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ti("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ti("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Mx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const kx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Lx=new yc(3e4,6e4);function Ba(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Ps(r,e,t,i,a={}){return jA(r,a,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const d=gc({key:r.config.apiKey,...c}).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const g={method:e,headers:p,...l};return cN()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&ja(r.emulatorConfig.host)&&(g.credentials="include"),UA.fetch()(await zA(r,r.config.apiHost,t,d),g)})}async function jA(r,e,t){r._canInitEmulator=!1;const i={...Mx,...e};try{const a=new jx(r),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw uf(r,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[p,g]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw uf(r,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw uf(r,"email-already-in-use",c);if(p==="USER_DISABLED")throw uf(r,"user-disabled",c);const _=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw LA(r,_,g);vr(r,_)}}catch(a){if(a instanceof ei)throw a;vr(r,"network-request-failed",{message:String(a)})}}async function gd(r,e,t,i,a={}){const l=await Ps(r,e,t,i,a);return"mfaPendingCredential"in l&&vr(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function zA(r,e,t,i){const a=`${e}${t}?${i}`,l=r,c=l.config.emulator?xy(r.config,a):`${r.config.apiScheme}://${a}`;return kx.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function Ux(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class jx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Kr(this.auth,"network-request-failed")),Lx.get())})}}function uf(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=Kr(r,e,i);return a.customData._tokenResponse=t,a}function Ob(r){return r!==void 0&&r.enterprise!==void 0}class zx{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Ux(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Bx(r,e){return Ps(r,"GET","/v2/recaptchaConfig",Ba(r,e))}async function Fx(r,e){return Ps(r,"POST","/v1/accounts:delete",e)}async function Ff(r,e){return Ps(r,"POST","/v1/accounts:lookup",e)}function ju(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function qx(r,e=!1){const t=zt(r),i=await t.getIdToken(e),a=Oy(i);Ne(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:i,authTime:ju(tg(a.auth_time)),issuedAtTime:ju(tg(a.iat)),expirationTime:ju(tg(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function tg(r){return Number(r)*1e3}function Oy(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Tf("JWT malformed, contained fewer than 3 sections"),null;try{const a=vA(t);return a?JSON.parse(a):(Tf("Failed to decode base64 JWT payload"),null)}catch(a){return Tf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function Vb(r){const e=Oy(r);return Ne(e,"internal-error"),Ne(typeof e.exp<"u","internal-error"),Ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Wu(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof ei&&Hx(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function Hx({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class Gx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Bg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ju(this.lastLoginAt),this.creationTime=ju(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function qf(r){const e=r.auth,t=await r.getIdToken(),i=await Wu(r,Ff(e,{idToken:t}));Ne(i?.users.length,e,"internal-error");const a=i.users[0];r._notifyReloadListener(a);const l=a.providerUserInfo?.length?BA(a.providerUserInfo):[],c=Qx(r.providerData,l),d=r.isAnonymous,p=!(r.email&&a.passwordHash)&&!c?.length,g=d?p:!1,_={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Bg(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(r,_)}async function Kx(r){const e=zt(r);await qf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Qx(r,e){return[...r.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function BA(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function Yx(r,e){const t=await jA(r,{},async()=>{const i=gc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=r.config,c=await zA(r,a,"/v1/token",`key=${l}`),d=await r._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:i};return r.emulatorConfig&&ja(r.emulatorConfig.host)&&(p.credentials="include"),UA.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function $x(r,e){return Ps(r,"POST","/v2/accounts:revokeToken",Ba(r,e))}class Go{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ne(e.idToken,"internal-error"),Ne(typeof e.idToken<"u","internal-error"),Ne(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Vb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ne(e.length!==0,"internal-error");const t=Vb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await Yx(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,c=new Go;return i&&(Ne(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),a&&(Ne(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(Ne(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Go,this.toJSON())}_performRefresh(){return Ti("not implemented")}}function fs(r,e){Ne(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class yr{constructor({uid:e,auth:t,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new Gx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Bg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Wu(this,this.stsTokenManager.getToken(this.auth,e));return Ne(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return qx(this,e)}reload(){return Kx(this)}_assign(e){this!==e&&(Ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new yr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await qf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Jn(this.auth.app))return Promise.reject(As(this.auth));const e=await this.getIdToken();return await Wu(this,Fx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,p=t._redirectEventId??void 0,g=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:T,emailVerified:b,isAnonymous:V,providerData:B,stsTokenManager:L}=t;Ne(T&&L,e,"internal-error");const k=Go.fromJSON(this.name,L);Ne(typeof T=="string",e,"internal-error"),fs(i,e.name),fs(a,e.name),Ne(typeof b=="boolean",e,"internal-error"),Ne(typeof V=="boolean",e,"internal-error"),fs(l,e.name),fs(c,e.name),fs(d,e.name),fs(p,e.name),fs(g,e.name),fs(_,e.name);const ie=new yr({uid:T,auth:e,email:a,emailVerified:b,displayName:i,isAnonymous:V,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:k,createdAt:g,lastLoginAt:_});return B&&Array.isArray(B)&&(ie.providerData=B.map(K=>({...K}))),p&&(ie._redirectEventId=p),ie}static async _fromIdTokenResponse(e,t,i=!1){const a=new Go;a.updateFromServerResponse(t);const l=new yr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await qf(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];Ne(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?BA(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,d=new Go;d.updateFromIdToken(i);const p=new yr({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Bg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(p,g),p}}const Pb=new Map;function bi(r){Ri(r instanceof Function,"Expected a class definition");let e=Pb.get(r);return e?(Ri(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Pb.set(r,e),e)}class FA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}FA.type="NONE";const Mb=FA;function bf(r,e,t){return`firebase:${r}:${e}:${t}`}class Ko{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=bf(this.userKey,a.apiKey,l),this.fullPersistenceKey=bf("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ff(this.auth,{idToken:e}).catch(()=>{});return t?yr._fromGetAccountInfoResponse(this.auth,t,e):null}return yr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Ko(bi(Mb),e,i);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||bi(Mb);const c=bf(i,e.config.apiKey,e.name);let d=null;for(const g of t)try{const _=await g._get(c);if(_){let T;if(typeof _=="string"){const b=await Ff(e,{idToken:_}).catch(()=>{});if(!b)break;T=await yr._fromGetAccountInfoResponse(e,b,_)}else T=yr._fromJSON(e,_);g!==l&&(d=T),l=g;break}}catch{}const p=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Ko(l,e,i):(l=p[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new Ko(l,e,i))}}function kb(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(KA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(YA(e))return"Blackberry";if($A(e))return"Webos";if(HA(e))return"Safari";if((e.includes("chrome/")||GA(e))&&!e.includes("edge/"))return"Chrome";if(QA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if(i?.length===2)return i[1]}return"Other"}function qA(r=Gt()){return/firefox\//i.test(r)}function HA(r=Gt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function GA(r=Gt()){return/crios\//i.test(r)}function KA(r=Gt()){return/iemobile/i.test(r)}function QA(r=Gt()){return/android/i.test(r)}function YA(r=Gt()){return/blackberry/i.test(r)}function $A(r=Gt()){return/webos/i.test(r)}function Vy(r=Gt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function Xx(r=Gt()){return Vy(r)&&!!window.navigator?.standalone}function Wx(){return dN()&&document.documentMode===10}function XA(r=Gt()){return Vy(r)||QA(r)||$A(r)||YA(r)||/windows phone/i.test(r)||KA(r)}function WA(r,e=[]){let t;switch(r){case"Browser":t=kb(Gt());break;case"Worker":t=`${kb(Gt())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${za}/${i}`}class Jx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,d)=>{try{const p=e(l);c(p)}catch(p){d(p)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function Zx(r,e={}){return Ps(r,"GET","/v2/passwordPolicy",Ba(r,e))}const e2=6;class t2{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??e2,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class n2{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Lb(this),this.idTokenSubscription=new Lb(this),this.beforeStateQueue=new Jx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=bi(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ko.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ff(this,{idToken:e}),i=await yr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Jn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=i?._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&d?.user&&(i=d.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await qf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Px()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Jn(this.app))return Promise.reject(As(this));const t=e?zt(e):null;return t&&Ne(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Jn(this.app)?Promise.reject(As(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Jn(this.app)?Promise.reject(As(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(bi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Zx(this),t=new t2(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new pc("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await $x(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&bi(e)||this._popupRedirectResolver;Ne(t,this,"argument-error"),this.redirectPersistenceManager=await Ko.create(this,[bi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ne(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,a);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=WA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(Jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&xx(`Error while retrieving App Check token: ${e.error}`),e?.token}}function dl(r){return zt(r)}class Lb{constructor(e){this.auth=e,this.observer=null,this.addObserver=vN(t=>this.observer=t)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let yd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function r2(r){yd=r}function JA(r){return yd.loadJS(r)}function i2(){return yd.recaptchaEnterpriseScript}function s2(){return yd.gapiScript}function a2(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class o2{constructor(){this.enterprise=new l2}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class l2{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const u2="recaptcha-enterprise",ZA="NO_RECAPTCHA";class c2{constructor(e){this.type=u2,this.auth=dl(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{Bx(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const g=new zx(p);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,c(g.siteKey)}}).catch(p=>{d(p)})})}function a(l,c,d){const p=window.grecaptcha;Ob(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(g=>{c(g)}).catch(()=>{c(ZA)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new o2().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{i(this.auth).then(d=>{if(!t&&Ob(window.grecaptcha))a(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=i2();p.length!==0&&(p+=d),JA(p).then(()=>{a(d,l,c)}).catch(g=>{c(g)})}}).catch(d=>{c(d)})})}}async function Ub(r,e,t,i=!1,a=!1){const l=new c2(r);let c;if(a)c=ZA;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,g=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function jb(r,e,t,i,a){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Ub(r,e,t,t==="getOobCode");return i(r,l)}else return i(r,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Ub(r,e,t,t==="getOobCode");return i(r,c)}else return Promise.reject(l)})}function h2(r,e){const t=pd(r,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Ca(l,e??{}))return a;vr(a,"already-initialized")}return t.initialize({options:e})}function f2(r,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(bi);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e?.popupRedirectResolver)}function d2(r,e,t){const i=dl(r);Ne(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=ew(e),{host:c,port:d}=m2(e),p=d===null?"":`:${d}`,g={url:`${l}//${c}${p}/`},_=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){Ne(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ne(Ca(g,i.config.emulator)&&Ca(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,ja(c)?(wy(`${l}//${c}${p}`),Iy("Auth",!0)):p2()}function ew(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function m2(r){const e=ew(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:zb(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:zb(c)}}}function zb(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function p2(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class Py{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ti("not implemented")}_getIdTokenResponse(e){return Ti("not implemented")}_linkToIdToken(e,t){return Ti("not implemented")}_getReauthenticationResolver(e){return Ti("not implemented")}}async function g2(r,e){return Ps(r,"POST","/v1/accounts:signUp",e)}async function y2(r,e){return gd(r,"POST","/v1/accounts:signInWithPassword",Ba(r,e))}async function _2(r,e){return gd(r,"POST","/v1/accounts:signInWithEmailLink",Ba(r,e))}async function v2(r,e){return gd(r,"POST","/v1/accounts:signInWithEmailLink",Ba(r,e))}class Ju extends Py{constructor(e,t,i,a=null){super("password",i),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Ju(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Ju(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jb(e,t,"signInWithPassword",y2);case"emailLink":return _2(e,{email:this._email,oobCode:this._password});default:vr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jb(e,i,"signUpPassword",g2);case"emailLink":return v2(e,{idToken:t,email:this._email,oobCode:this._password});default:vr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Qo(r,e){return gd(r,"POST","/v1/accounts:signInWithIdp",Ba(r,e))}const E2="http://localhost";class Na extends Py{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Na(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):vr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,...l}=t;if(!i||!a)return null;const c=new Na(i,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Qo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Qo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Qo(e,t)}buildRequest(){const e={requestUri:E2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=gc(t)}return e}}function T2(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function b2(r){const e=xu(Ou(r)).link,t=e?xu(Ou(e)).deep_link_id:null,i=xu(Ou(r)).deep_link_id;return(i?xu(Ou(i)).link:null)||i||t||e||r}class My{constructor(e){const t=xu(Ou(e)),i=t.apiKey??null,a=t.oobCode??null,l=T2(t.mode??null);Ne(i&&a&&l,"argument-error"),this.apiKey=i,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=b2(e);try{return new My(t)}catch{return null}}}class ml{constructor(){this.providerId=ml.PROVIDER_ID}static credential(e,t){return Ju._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=My.parseLink(t);return Ne(i,"argument-error"),Ju._fromEmailAndCode(e,i.code,i.tenantId)}}ml.PROVIDER_ID="password";ml.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ml.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class tw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class _c extends tw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class gs extends _c{constructor(){super("facebook.com")}static credential(e){return Na._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gs.credential(e.oauthAccessToken)}catch{return null}}}gs.FACEBOOK_SIGN_IN_METHOD="facebook.com";gs.PROVIDER_ID="facebook.com";class ys extends _c{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Na._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return ys.credential(t,i)}catch{return null}}}ys.GOOGLE_SIGN_IN_METHOD="google.com";ys.PROVIDER_ID="google.com";class _s extends _c{constructor(){super("github.com")}static credential(e){return Na._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _s.credential(e.oauthAccessToken)}catch{return null}}}_s.GITHUB_SIGN_IN_METHOD="github.com";_s.PROVIDER_ID="github.com";class vs extends _c{constructor(){super("twitter.com")}static credential(e,t){return Na._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return vs.credential(t,i)}catch{return null}}}vs.TWITTER_SIGN_IN_METHOD="twitter.com";vs.PROVIDER_ID="twitter.com";class Xo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await yr._fromIdTokenResponse(e,i,a),c=Bb(i);return new Xo({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=Bb(i);return new Xo({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function Bb(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class Hf extends ei{constructor(e,t,i,a){super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,Hf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new Hf(e,t,i,a)}}function nw(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Hf._fromErrorAndOperation(r,l,e,i):l})}async function S2(r,e,t=!1){const i=await Wu(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Xo._forOperation(r,"link",i)}async function A2(r,e,t=!1){const{auth:i}=r;if(Jn(i.app))return Promise.reject(As(i));const a="reauthenticate";try{const l=await Wu(r,nw(i,a,e,r),t);Ne(l.idToken,i,"internal-error");const c=Oy(l.idToken);Ne(c,i,"internal-error");const{sub:d}=c;return Ne(r.uid===d,i,"user-mismatch"),Xo._forOperation(r,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&vr(i,"user-mismatch"),l}}async function rw(r,e,t=!1){if(Jn(r.app))return Promise.reject(As(r));const i="signIn",a=await nw(r,i,e),l=await Xo._fromIdTokenResponse(r,i,a);return t||await r._updateCurrentUser(l.user),l}async function w2(r,e){return rw(dl(r),e)}async function I2(r){const e=dl(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function R2(r,e,t){return Jn(r.app)?Promise.reject(As(r)):w2(zt(r),ml.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&I2(r),i})}function C2(r,e,t,i){return zt(r).onIdTokenChanged(e,t,i)}function D2(r,e,t){return zt(r).beforeAuthStateChanged(e,t)}function N2(r,e,t,i){return zt(r).onAuthStateChanged(e,t,i)}function x2(r){return zt(r).signOut()}const Gf="__sak";class iw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Gf,"1"),this.storage.removeItem(Gf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const O2=1e3,V2=10;class sw extends iw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=XA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);Wx()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,V2):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},O2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}sw.type="LOCAL";const P2=sw;class aw extends iw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}aw.type="SESSION";const ow=aw;function M2(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class _d{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new _d(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const d=Array.from(c).map(async g=>g(t.origin,l)),p=await M2(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_d.receivers=[];function ky(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}class k2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,p)=>{const g=ky("",20);a.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(T){const b=T;if(b.data.eventId===g)switch(b.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(b.data.response);break;default:clearTimeout(_),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Qr(){return window}function L2(r){Qr().location.href=r}function lw(){return typeof Qr().WorkerGlobalScope<"u"&&typeof Qr().importScripts=="function"}async function U2(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function j2(){return navigator?.serviceWorker?.controller||null}function z2(){return lw()?self:null}const uw="firebaseLocalStorageDb",B2=1,Kf="firebaseLocalStorage",cw="fbase_key";class vc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function vd(r,e){return r.transaction([Kf],e?"readwrite":"readonly").objectStore(Kf)}function F2(){const r=indexedDB.deleteDatabase(uw);return new vc(r).toPromise()}function Fg(){const r=indexedDB.open(uw,B2);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(Kf,{keyPath:cw})}catch(a){t(a)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(Kf)?e(i):(i.close(),await F2(),e(await Fg()))})})}async function Fb(r,e,t){const i=vd(r,!0).put({[cw]:e,value:t});return new vc(i).toPromise()}async function q2(r,e){const t=vd(r,!1).get(e),i=await new vc(t).toPromise();return i===void 0?null:i.value}function qb(r,e){const t=vd(r,!0).delete(e);return new vc(t).toPromise()}const H2=800,G2=3;class hw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Fg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>G2)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_d._getInstance(z2()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await U2(),!this.activeServiceWorker)return;this.sender=new k2(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||j2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Fg();return await Fb(e,Gf,"1"),await qb(e,Gf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Fb(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>q2(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>qb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=vd(a,!1).getAll();return new vc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),H2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}hw.type="LOCAL";const K2=hw;new yc(3e4,6e4);function Q2(r,e){return e?bi(e):(Ne(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class Ly extends Py{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Qo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Qo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Y2(r){return rw(r.auth,new Ly(r),r.bypassAuthState)}function $2(r){const{auth:e,user:t}=r;return Ne(t,e,"internal-error"),A2(t,new Ly(r),r.bypassAuthState)}async function X2(r){const{auth:e,user:t}=r;return Ne(t,e,"internal-error"),S2(t,new Ly(r),r.bypassAuthState)}class fw{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Y2;case"linkViaPopup":case"linkViaRedirect":return X2;case"reauthViaPopup":case"reauthViaRedirect":return $2;default:vr(this.auth,"internal-error")}}resolve(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const W2=new yc(2e3,1e4);class Ho extends fw{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,Ho.currentPopupAction&&Ho.currentPopupAction.cancel(),Ho.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ne(e,this.auth,"internal-error"),e}async onExecution(){Ri(this.filter.length===1,"Popup operations only handle one event");const e=ky();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Kr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Kr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ho.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Kr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,W2.get())};e()}}Ho.currentPopupAction=null;const J2="pendingRedirect",Sf=new Map;class Z2 extends fw{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Sf.get(this.auth._key());if(!e){try{const i=await eO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Sf.set(this.auth._key(),e)}return this.bypassAuthState||Sf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function eO(r,e){const t=rO(e),i=nO(r);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function tO(r,e){Sf.set(r._key(),e)}function nO(r){return bi(r._redirectPersistence)}function rO(r){return bf(J2,r.config.apiKey,r.name)}async function iO(r,e,t=!1){if(Jn(r.app))return Promise.reject(As(r));const i=dl(r),a=Q2(i,e),c=await new Z2(i,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}const sO=600*1e3;class aO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!oO(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!dw(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Kr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=sO&&this.cachedEventUids.clear(),this.cachedEventUids.has(Hb(e))}saveEventToCache(e){this.cachedEventUids.add(Hb(e)),this.lastProcessedEventTime=Date.now()}}function Hb(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function dw({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function oO(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dw(r);default:return!1}}async function lO(r,e={}){return Ps(r,"GET","/v1/projects",e)}const uO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cO=/^https?/;async function hO(r){if(r.config.emulator)return;const{authorizedDomains:e}=await lO(r);for(const t of e)try{if(fO(t))return}catch{}vr(r,"unauthorized-domain")}function fO(r){const e=zg(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!cO.test(t))return!1;if(uO.test(r))return i===r;const a=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}const dO=new yc(3e4,6e4);function Gb(){const r=Qr().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function mO(r){return new Promise((e,t)=>{function i(){Gb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Gb(),t(Kr(r,"network-request-failed"))},timeout:dO.get()})}if(Qr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Qr().gapi?.load)i();else{const a=a2("iframefcb");return Qr()[a]=()=>{gapi.load?i():t(Kr(r,"network-request-failed"))},JA(`${s2()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw Af=null,e})}let Af=null;function pO(r){return Af=Af||mO(r),Af}const gO=new yc(5e3,15e3),yO="__/auth/iframe",_O="emulator/auth/iframe",vO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function TO(r){const e=r.config;Ne(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?xy(e,_O):`https://${r.config.authDomain}/${yO}`,i={apiKey:e.apiKey,appName:r.name,v:za},a=EO.get(r.config.apiHost);a&&(i.eid=a);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${gc(i).slice(1)}`}async function bO(r){const e=await pO(r),t=Qr().gapi;return Ne(t,r,"internal-error"),e.open({where:document.body,url:TO(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vO,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const c=Kr(r,"network-request-failed"),d=Qr().setTimeout(()=>{l(c)},gO.get());function p(){Qr().clearTimeout(d),a(i)}i.ping(p).then(p,()=>{l(c)})}))}const SO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},AO=500,wO=600,IO="_blank",RO="http://localhost";class Kb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function CO(r,e,t,i=AO,a=wO){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const p={...SO,width:i.toString(),height:a.toString(),top:l,left:c},g=Gt().toLowerCase();t&&(d=GA(g)?IO:t),qA(g)&&(e=e||RO,p.scrollbars="yes");const _=Object.entries(p).reduce((b,[V,B])=>`${b}${V}=${B},`,"");if(Xx(g)&&d!=="_self")return DO(e||"",d),new Kb(null);const T=window.open(e||"",d,_);Ne(T,r,"popup-blocked");try{T.focus()}catch{}return new Kb(T)}function DO(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const NO="__/auth/handler",xO="emulator/auth/handler",OO=encodeURIComponent("fac");async function Qb(r,e,t,i,a,l){Ne(r.config.authDomain,r,"auth-domain-config-required"),Ne(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:za,eventId:a};if(e instanceof tw){e.setDefaultLanguage(r.languageCode),c.providerId=e.providerId||"",_N(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries({}))c[_]=T}if(e instanceof _c){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(c.scopes=_.join(","))}r.tenantId&&(c.tid=r.tenantId);const d=c;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const p=await r._getAppCheckToken(),g=p?`#${OO}=${encodeURIComponent(p)}`:"";return`${VO(r)}?${gc(d).slice(1)}${g}`}function VO({config:r}){return r.emulator?xy(r,xO):`https://${r.authDomain}/${NO}`}const ng="webStorageSupport";class PO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ow,this._completeRedirectFn=iO,this._overrideRedirectResult=tO}async _openPopup(e,t,i,a){Ri(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await Qb(e,t,i,zg(),a);return CO(e,l,ky())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await Qb(e,t,i,zg(),a);return L2(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Ri(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await bO(e),i=new aO(e);return t.register("authEvent",a=>(Ne(a?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ng,{type:ng},a=>{const l=a?.[0]?.[ng];l!==void 0&&t(!!l),vr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=hO(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return XA()||HA()||Vy()}}const MO=PO;var Yb="@firebase/auth",$b="1.12.0";class kO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function LO(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function UO(r){Da(new Cs("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;Ne(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:c,authDomain:d,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:WA(r)},g=new n2(i,a,l,p);return f2(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Da(new Cs("auth-internal",e=>{const t=dl(e.getProvider("auth").getImmediate());return(i=>new kO(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gr(Yb,$b,LO(r)),Gr(Yb,$b,"esm2020")}const jO=300,zO=AA("authIdTokenMaxAge")||jO;let Xb=null;const BO=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>zO)return;const a=t?.token;Xb!==a&&(Xb=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function FO(r=Dy()){const e=pd(r,"auth");if(e.isInitialized())return e.getImmediate();const t=h2(r,{popupRedirectResolver:MO,persistence:[K2,P2,ow]}),i=AA("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=BO(l.toString());D2(t,c,()=>c(t.currentUser)),C2(t,d=>c(d))}}const a=TA("auth");return a&&d2(t,`http://${a}`),t}function qO(){return document.getElementsByTagName("head")?.[0]??document}r2({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=a=>{const l=Kr("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",qO().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});UO("Browser");var Wb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ws,mw;(function(){var r;function e(C,w){function D(){}D.prototype=w.prototype,C.F=w.prototype,C.prototype=new D,C.prototype.constructor=C,C.D=function(P,x,U){for(var N=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)N[Le-2]=arguments[Le];return w.prototype[x].apply(P,N)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(C,w,D){D||(D=0);const P=Array(16);if(typeof w=="string")for(var x=0;x<16;++x)P[x]=w.charCodeAt(D++)|w.charCodeAt(D++)<<8|w.charCodeAt(D++)<<16|w.charCodeAt(D++)<<24;else for(x=0;x<16;++x)P[x]=w[D++]|w[D++]<<8|w[D++]<<16|w[D++]<<24;w=C.g[0],D=C.g[1],x=C.g[2];let U=C.g[3],N;N=w+(U^D&(x^U))+P[0]+3614090360&4294967295,w=D+(N<<7&4294967295|N>>>25),N=U+(x^w&(D^x))+P[1]+3905402710&4294967295,U=w+(N<<12&4294967295|N>>>20),N=x+(D^U&(w^D))+P[2]+606105819&4294967295,x=U+(N<<17&4294967295|N>>>15),N=D+(w^x&(U^w))+P[3]+3250441966&4294967295,D=x+(N<<22&4294967295|N>>>10),N=w+(U^D&(x^U))+P[4]+4118548399&4294967295,w=D+(N<<7&4294967295|N>>>25),N=U+(x^w&(D^x))+P[5]+1200080426&4294967295,U=w+(N<<12&4294967295|N>>>20),N=x+(D^U&(w^D))+P[6]+2821735955&4294967295,x=U+(N<<17&4294967295|N>>>15),N=D+(w^x&(U^w))+P[7]+4249261313&4294967295,D=x+(N<<22&4294967295|N>>>10),N=w+(U^D&(x^U))+P[8]+1770035416&4294967295,w=D+(N<<7&4294967295|N>>>25),N=U+(x^w&(D^x))+P[9]+2336552879&4294967295,U=w+(N<<12&4294967295|N>>>20),N=x+(D^U&(w^D))+P[10]+4294925233&4294967295,x=U+(N<<17&4294967295|N>>>15),N=D+(w^x&(U^w))+P[11]+2304563134&4294967295,D=x+(N<<22&4294967295|N>>>10),N=w+(U^D&(x^U))+P[12]+1804603682&4294967295,w=D+(N<<7&4294967295|N>>>25),N=U+(x^w&(D^x))+P[13]+4254626195&4294967295,U=w+(N<<12&4294967295|N>>>20),N=x+(D^U&(w^D))+P[14]+2792965006&4294967295,x=U+(N<<17&4294967295|N>>>15),N=D+(w^x&(U^w))+P[15]+1236535329&4294967295,D=x+(N<<22&4294967295|N>>>10),N=w+(x^U&(D^x))+P[1]+4129170786&4294967295,w=D+(N<<5&4294967295|N>>>27),N=U+(D^x&(w^D))+P[6]+3225465664&4294967295,U=w+(N<<9&4294967295|N>>>23),N=x+(w^D&(U^w))+P[11]+643717713&4294967295,x=U+(N<<14&4294967295|N>>>18),N=D+(U^w&(x^U))+P[0]+3921069994&4294967295,D=x+(N<<20&4294967295|N>>>12),N=w+(x^U&(D^x))+P[5]+3593408605&4294967295,w=D+(N<<5&4294967295|N>>>27),N=U+(D^x&(w^D))+P[10]+38016083&4294967295,U=w+(N<<9&4294967295|N>>>23),N=x+(w^D&(U^w))+P[15]+3634488961&4294967295,x=U+(N<<14&4294967295|N>>>18),N=D+(U^w&(x^U))+P[4]+3889429448&4294967295,D=x+(N<<20&4294967295|N>>>12),N=w+(x^U&(D^x))+P[9]+568446438&4294967295,w=D+(N<<5&4294967295|N>>>27),N=U+(D^x&(w^D))+P[14]+3275163606&4294967295,U=w+(N<<9&4294967295|N>>>23),N=x+(w^D&(U^w))+P[3]+4107603335&4294967295,x=U+(N<<14&4294967295|N>>>18),N=D+(U^w&(x^U))+P[8]+1163531501&4294967295,D=x+(N<<20&4294967295|N>>>12),N=w+(x^U&(D^x))+P[13]+2850285829&4294967295,w=D+(N<<5&4294967295|N>>>27),N=U+(D^x&(w^D))+P[2]+4243563512&4294967295,U=w+(N<<9&4294967295|N>>>23),N=x+(w^D&(U^w))+P[7]+1735328473&4294967295,x=U+(N<<14&4294967295|N>>>18),N=D+(U^w&(x^U))+P[12]+2368359562&4294967295,D=x+(N<<20&4294967295|N>>>12),N=w+(D^x^U)+P[5]+4294588738&4294967295,w=D+(N<<4&4294967295|N>>>28),N=U+(w^D^x)+P[8]+2272392833&4294967295,U=w+(N<<11&4294967295|N>>>21),N=x+(U^w^D)+P[11]+1839030562&4294967295,x=U+(N<<16&4294967295|N>>>16),N=D+(x^U^w)+P[14]+4259657740&4294967295,D=x+(N<<23&4294967295|N>>>9),N=w+(D^x^U)+P[1]+2763975236&4294967295,w=D+(N<<4&4294967295|N>>>28),N=U+(w^D^x)+P[4]+1272893353&4294967295,U=w+(N<<11&4294967295|N>>>21),N=x+(U^w^D)+P[7]+4139469664&4294967295,x=U+(N<<16&4294967295|N>>>16),N=D+(x^U^w)+P[10]+3200236656&4294967295,D=x+(N<<23&4294967295|N>>>9),N=w+(D^x^U)+P[13]+681279174&4294967295,w=D+(N<<4&4294967295|N>>>28),N=U+(w^D^x)+P[0]+3936430074&4294967295,U=w+(N<<11&4294967295|N>>>21),N=x+(U^w^D)+P[3]+3572445317&4294967295,x=U+(N<<16&4294967295|N>>>16),N=D+(x^U^w)+P[6]+76029189&4294967295,D=x+(N<<23&4294967295|N>>>9),N=w+(D^x^U)+P[9]+3654602809&4294967295,w=D+(N<<4&4294967295|N>>>28),N=U+(w^D^x)+P[12]+3873151461&4294967295,U=w+(N<<11&4294967295|N>>>21),N=x+(U^w^D)+P[15]+530742520&4294967295,x=U+(N<<16&4294967295|N>>>16),N=D+(x^U^w)+P[2]+3299628645&4294967295,D=x+(N<<23&4294967295|N>>>9),N=w+(x^(D|~U))+P[0]+4096336452&4294967295,w=D+(N<<6&4294967295|N>>>26),N=U+(D^(w|~x))+P[7]+1126891415&4294967295,U=w+(N<<10&4294967295|N>>>22),N=x+(w^(U|~D))+P[14]+2878612391&4294967295,x=U+(N<<15&4294967295|N>>>17),N=D+(U^(x|~w))+P[5]+4237533241&4294967295,D=x+(N<<21&4294967295|N>>>11),N=w+(x^(D|~U))+P[12]+1700485571&4294967295,w=D+(N<<6&4294967295|N>>>26),N=U+(D^(w|~x))+P[3]+2399980690&4294967295,U=w+(N<<10&4294967295|N>>>22),N=x+(w^(U|~D))+P[10]+4293915773&4294967295,x=U+(N<<15&4294967295|N>>>17),N=D+(U^(x|~w))+P[1]+2240044497&4294967295,D=x+(N<<21&4294967295|N>>>11),N=w+(x^(D|~U))+P[8]+1873313359&4294967295,w=D+(N<<6&4294967295|N>>>26),N=U+(D^(w|~x))+P[15]+4264355552&4294967295,U=w+(N<<10&4294967295|N>>>22),N=x+(w^(U|~D))+P[6]+2734768916&4294967295,x=U+(N<<15&4294967295|N>>>17),N=D+(U^(x|~w))+P[13]+1309151649&4294967295,D=x+(N<<21&4294967295|N>>>11),N=w+(x^(D|~U))+P[4]+4149444226&4294967295,w=D+(N<<6&4294967295|N>>>26),N=U+(D^(w|~x))+P[11]+3174756917&4294967295,U=w+(N<<10&4294967295|N>>>22),N=x+(w^(U|~D))+P[2]+718787259&4294967295,x=U+(N<<15&4294967295|N>>>17),N=D+(U^(x|~w))+P[9]+3951481745&4294967295,C.g[0]=C.g[0]+w&4294967295,C.g[1]=C.g[1]+(x+(N<<21&4294967295|N>>>11))&4294967295,C.g[2]=C.g[2]+x&4294967295,C.g[3]=C.g[3]+U&4294967295}i.prototype.v=function(C,w){w===void 0&&(w=C.length);const D=w-this.blockSize,P=this.C;let x=this.h,U=0;for(;U<w;){if(x==0)for(;U<=D;)a(this,C,U),U+=this.blockSize;if(typeof C=="string"){for(;U<w;)if(P[x++]=C.charCodeAt(U++),x==this.blockSize){a(this,P),x=0;break}}else for(;U<w;)if(P[x++]=C[U++],x==this.blockSize){a(this,P),x=0;break}}this.h=x,this.o+=w},i.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var w=1;w<C.length-8;++w)C[w]=0;w=this.o*8;for(var D=C.length-8;D<C.length;++D)C[D]=w&255,w/=256;for(this.v(C),C=Array(16),w=0,D=0;D<4;++D)for(let P=0;P<32;P+=8)C[w++]=this.g[D]>>>P&255;return C};function l(C,w){var D=d;return Object.prototype.hasOwnProperty.call(D,C)?D[C]:D[C]=w(C)}function c(C,w){this.h=w;const D=[];let P=!0;for(let x=C.length-1;x>=0;x--){const U=C[x]|0;P&&U==w||(D[x]=U,P=!1)}this.g=D}var d={};function p(C){return-128<=C&&C<128?l(C,function(w){return new c([w|0],w<0?-1:0)}):new c([C|0],C<0?-1:0)}function g(C){if(isNaN(C)||!isFinite(C))return T;if(C<0)return k(g(-C));const w=[];let D=1;for(let P=0;C>=D;P++)w[P]=C/D|0,D*=4294967296;return new c(w,0)}function _(C,w){if(C.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(C.charAt(0)=="-")return k(_(C.substring(1),w));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=g(Math.pow(w,8));let P=T;for(let U=0;U<C.length;U+=8){var x=Math.min(8,C.length-U);const N=parseInt(C.substring(U,U+x),w);x<8?(x=g(Math.pow(w,x)),P=P.j(x).add(g(N))):(P=P.j(D),P=P.add(g(N)))}return P}var T=p(0),b=p(1),V=p(16777216);r=c.prototype,r.m=function(){if(L(this))return-k(this).m();let C=0,w=1;for(let D=0;D<this.g.length;D++){const P=this.i(D);C+=(P>=0?P:4294967296+P)*w,w*=4294967296}return C},r.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(B(this))return"0";if(L(this))return"-"+k(this).toString(C);const w=g(Math.pow(C,6));var D=this;let P="";for(;;){const x=ue(D,w).g;D=ie(D,x.j(w));let U=((D.g.length>0?D.g[0]:D.h)>>>0).toString(C);if(D=x,B(D))return U+P;for(;U.length<6;)U="0"+U;P=U+P}},r.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function B(C){if(C.h!=0)return!1;for(let w=0;w<C.g.length;w++)if(C.g[w]!=0)return!1;return!0}function L(C){return C.h==-1}r.l=function(C){return C=ie(this,C),L(C)?-1:B(C)?0:1};function k(C){const w=C.g.length,D=[];for(let P=0;P<w;P++)D[P]=~C.g[P];return new c(D,~C.h).add(b)}r.abs=function(){return L(this)?k(this):this},r.add=function(C){const w=Math.max(this.g.length,C.g.length),D=[];let P=0;for(let x=0;x<=w;x++){let U=P+(this.i(x)&65535)+(C.i(x)&65535),N=(U>>>16)+(this.i(x)>>>16)+(C.i(x)>>>16);P=N>>>16,U&=65535,N&=65535,D[x]=N<<16|U}return new c(D,D[D.length-1]&-2147483648?-1:0)};function ie(C,w){return C.add(k(w))}r.j=function(C){if(B(this)||B(C))return T;if(L(this))return L(C)?k(this).j(k(C)):k(k(this).j(C));if(L(C))return k(this.j(k(C)));if(this.l(V)<0&&C.l(V)<0)return g(this.m()*C.m());const w=this.g.length+C.g.length,D=[];for(var P=0;P<2*w;P++)D[P]=0;for(P=0;P<this.g.length;P++)for(let x=0;x<C.g.length;x++){const U=this.i(P)>>>16,N=this.i(P)&65535,Le=C.i(x)>>>16,ut=C.i(x)&65535;D[2*P+2*x]+=N*ut,K(D,2*P+2*x),D[2*P+2*x+1]+=U*ut,K(D,2*P+2*x+1),D[2*P+2*x+1]+=N*Le,K(D,2*P+2*x+1),D[2*P+2*x+2]+=U*Le,K(D,2*P+2*x+2)}for(C=0;C<w;C++)D[C]=D[2*C+1]<<16|D[2*C];for(C=w;C<2*w;C++)D[C]=0;return new c(D,0)};function K(C,w){for(;(C[w]&65535)!=C[w];)C[w+1]+=C[w]>>>16,C[w]&=65535,w++}function X(C,w){this.g=C,this.h=w}function ue(C,w){if(B(w))throw Error("division by zero");if(B(C))return new X(T,T);if(L(C))return w=ue(k(C),w),new X(k(w.g),k(w.h));if(L(w))return w=ue(C,k(w)),new X(k(w.g),w.h);if(C.g.length>30){if(L(C)||L(w))throw Error("slowDivide_ only works with positive integers.");for(var D=b,P=w;P.l(C)<=0;)D=he(D),P=he(P);var x=oe(D,1),U=oe(P,1);for(P=oe(P,2),D=oe(D,2);!B(P);){var N=U.add(P);N.l(C)<=0&&(x=x.add(D),U=N),P=oe(P,1),D=oe(D,1)}return w=ie(C,x.j(w)),new X(x,w)}for(x=T;C.l(w)>=0;){for(D=Math.max(1,Math.floor(C.m()/w.m())),P=Math.ceil(Math.log(D)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),U=g(D),N=U.j(w);L(N)||N.l(C)>0;)D-=P,U=g(D),N=U.j(w);B(U)&&(U=b),x=x.add(U),C=ie(C,N)}return new X(x,C)}r.B=function(C){return ue(this,C).h},r.and=function(C){const w=Math.max(this.g.length,C.g.length),D=[];for(let P=0;P<w;P++)D[P]=this.i(P)&C.i(P);return new c(D,this.h&C.h)},r.or=function(C){const w=Math.max(this.g.length,C.g.length),D=[];for(let P=0;P<w;P++)D[P]=this.i(P)|C.i(P);return new c(D,this.h|C.h)},r.xor=function(C){const w=Math.max(this.g.length,C.g.length),D=[];for(let P=0;P<w;P++)D[P]=this.i(P)^C.i(P);return new c(D,this.h^C.h)};function he(C){const w=C.g.length+1,D=[];for(let P=0;P<w;P++)D[P]=C.i(P)<<1|C.i(P-1)>>>31;return new c(D,C.h)}function oe(C,w){const D=w>>5;w%=32;const P=C.g.length-D,x=[];for(let U=0;U<P;U++)x[U]=w>0?C.i(U+D)>>>w|C.i(U+D+1)<<32-w:C.i(U+D);return new c(x,C.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,mw=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=_,ws=c}).apply(typeof Wb<"u"?Wb:typeof self<"u"?self:typeof window<"u"?window:{});var cf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var pw,Vu,gw,wf,qg,yw,_w,vw;(function(){var r,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof cf=="object"&&cf];for(var y=0;y<h.length;++y){var E=h[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=t(this);function a(h,y){if(y)e:{var E=i;h=h.split(".");for(var A=0;A<h.length-1;A++){var q=h[A];if(!(q in E))break e;E=E[q]}h=h[h.length-1],A=E[h],y=y(A),y!=A&&y!=null&&e(E,h,{configurable:!0,writable:!0,value:y})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(y){var E=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&E.push([A,y[A]]);return E}});var l=l||{},c=this||self;function d(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function p(h,y,E){return h.call.apply(h.bind,arguments)}function g(h,y,E){return g=p,g.apply(null,arguments)}function _(h,y){var E=Array.prototype.slice.call(arguments,1);return function(){var A=E.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function T(h,y){function E(){}E.prototype=y.prototype,h.Z=y.prototype,h.prototype=new E,h.prototype.constructor=h,h.Ob=function(A,q,$){for(var pe=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)pe[Pe-2]=arguments[Pe];return y.prototype[q].apply(A,pe)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function V(h){const y=h.length;if(y>0){const E=Array(y);for(let A=0;A<y;A++)E[A]=h[A];return E}return[]}function B(h,y){for(let A=1;A<arguments.length;A++){const q=arguments[A];var E=typeof q;if(E=E!="object"?E:q?Array.isArray(q)?"array":E:"null",E=="array"||E=="object"&&typeof q.length=="number"){E=h.length||0;const $=q.length||0;h.length=E+$;for(let pe=0;pe<$;pe++)h[E+pe]=q[pe]}else h.push(q)}}class L{constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function k(h){c.setTimeout(()=>{throw h},0)}function ie(){var h=C;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class K{constructor(){this.h=this.g=null}add(y,E){const A=X.get();A.set(y,E),this.h?this.h.next=A:this.g=A,this.h=A}}var X=new L(()=>new ue,h=>h.reset());class ue{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let he,oe=!1,C=new K,w=()=>{const h=Promise.resolve(void 0);he=()=>{h.then(D)}};function D(){for(var h;h=ie();){try{h.h.call(h.g)}catch(E){k(E)}var y=X;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}oe=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};c.addEventListener("test",E,y),c.removeEventListener("test",E,y)}catch{}return h})();function N(h){return/^[\s\xa0]*$/.test(h)}function Le(h,y){x.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}T(Le,x),Le.prototype.init=function(h,y){const E=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(E=="mouseover"?y=h.fromElement:E=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Le.Z.h.call(this)},Le.prototype.h=function(){Le.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ut="closure_listenable_"+(Math.random()*1e6|0),J=0;function fe(h,y,E,A,q){this.listener=h,this.proxy=null,this.src=y,this.type=E,this.capture=!!A,this.ha=q,this.key=++J,this.da=this.fa=!1}function _e(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function re(h,y,E){for(const A in h)y.call(E,h[A],A,h)}function ee(h,y){for(const E in h)y.call(void 0,h[E],E,h)}function I(h){const y={};for(const E in h)y[E]=h[E];return y}const H="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Z(h,y){let E,A;for(let q=1;q<arguments.length;q++){A=arguments[q];for(E in A)h[E]=A[E];for(let $=0;$<H.length;$++)E=H[$],Object.prototype.hasOwnProperty.call(A,E)&&(h[E]=A[E])}}function le(h){this.src=h,this.g={},this.h=0}le.prototype.add=function(h,y,E,A,q){const $=h.toString();h=this.g[$],h||(h=this.g[$]=[],this.h++);const pe=ve(h,y,A,q);return pe>-1?(y=h[pe],E||(y.fa=!1)):(y=new fe(y,this.src,$,!!A,q),y.fa=E,h.push(y)),y};function Ee(h,y){const E=y.type;if(E in h.g){var A=h.g[E],q=Array.prototype.indexOf.call(A,y,void 0),$;($=q>=0)&&Array.prototype.splice.call(A,q,1),$&&(_e(y),h.g[E].length==0&&(delete h.g[E],h.h--))}}function ve(h,y,E,A){for(let q=0;q<h.length;++q){const $=h[q];if(!$.da&&$.listener==y&&$.capture==!!E&&$.ha==A)return q}return-1}var me="closure_lm_"+(Math.random()*1e6|0),Se={};function ye(h,y,E,A,q){if(Array.isArray(y)){for(let $=0;$<y.length;$++)ye(h,y[$],E,A,q);return null}return E=vl(E),h&&h[ut]?h.J(y,E,d(A)?!!A.capture:!1,q):Ce(h,y,E,!1,A,q)}function Ce(h,y,E,A,q,$){if(!y)throw Error("Invalid event type");const pe=d(q)?!!q.capture:!!q;let Pe=rr(h);if(Pe||(h[me]=Pe=new le(h)),E=Pe.add(y,E,A,pe,$),E.proxy)return E;if(A=Ge(),E.proxy=A,A.src=h,A.listener=E,h.addEventListener)U||(q=pe),q===void 0&&(q=!1),h.addEventListener(y.toString(),A,q);else if(h.attachEvent)h.attachEvent(St(y.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Ge(){function h(E){return y.call(h.src,h.listener,E)}const y=Ha;return h}function bt(h,y,E,A,q){if(Array.isArray(y))for(var $=0;$<y.length;$++)bt(h,y[$],E,A,q);else A=d(A)?!!A.capture:!!A,E=vl(E),h&&h[ut]?(h=h.i,$=String(y).toString(),$ in h.g&&(y=h.g[$],E=ve(y,E,A,q),E>-1&&(_e(y[E]),Array.prototype.splice.call(y,E,1),y.length==0&&(delete h.g[$],h.h--)))):h&&(h=rr(h))&&(y=h.g[y.toString()],h=-1,y&&(h=ve(y,E,A,q)),(E=h>-1?y[h]:null)&&Ft(E))}function Ft(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[ut])Ee(y.i,h);else{var E=h.type,A=h.proxy;y.removeEventListener?y.removeEventListener(E,A,h.capture):y.detachEvent?y.detachEvent(St(E),A):y.addListener&&y.removeListener&&y.removeListener(A),(E=rr(y))?(Ee(E,h),E.h==0&&(E.src=null,y[me]=null)):_e(h)}}}function St(h){return h in Se?Se[h]:Se[h]="on"+h}function Ha(h,y){if(h.da)h=!0;else{y=new Le(y,this);const E=h.listener,A=h.ha||h.src;h.fa&&Ft(h),h=E.call(A,y)}return h}function rr(h){return h=h[me],h instanceof le?h:null}var Us="__closure_events_fn_"+(Math.random()*1e9>>>0);function vl(h){return typeof h=="function"?h:(h[Us]||(h[Us]=function(y){return h.handleEvent(y)}),h[Us])}function Dt(){P.call(this),this.i=new le(this),this.M=this,this.G=null}T(Dt,P),Dt.prototype[ut]=!0,Dt.prototype.removeEventListener=function(h,y,E,A){bt(this,h,y,E,A)};function qt(h,y){var E,A=h.G;if(A)for(E=[];A;A=A.G)E.push(A);if(h=h.M,A=y.type||y,typeof y=="string")y=new x(y,h);else if(y instanceof x)y.target=y.target||h;else{var q=y;y=new x(A,h),Z(y,q)}q=!0;let $,pe;if(E)for(pe=E.length-1;pe>=0;pe--)$=y.g=E[pe],q=Vi($,A,!0,y)&&q;if($=y.g=h,q=Vi($,A,!0,y)&&q,q=Vi($,A,!1,y)&&q,E)for(pe=0;pe<E.length;pe++)$=y.g=E[pe],q=Vi($,A,!1,y)&&q}Dt.prototype.N=function(){if(Dt.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const E=h.g[y];for(let A=0;A<E.length;A++)_e(E[A]);delete h.g[y],h.h--}}this.G=null},Dt.prototype.J=function(h,y,E,A){return this.i.add(String(h),y,!1,E,A)},Dt.prototype.K=function(h,y,E,A){return this.i.add(String(h),y,!0,E,A)};function Vi(h,y,E,A){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let q=!0;for(let $=0;$<y.length;++$){const pe=y[$];if(pe&&!pe.da&&pe.capture==E){const Pe=pe.listener,wt=pe.ha||pe.src;pe.fa&&Ee(h.i,pe),q=Pe.call(wt,A)!==!1&&q}}return q&&!A.defaultPrevented}function qd(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function Oc(h){h.g=qd(()=>{h.g=null,h.i&&(h.i=!1,Oc(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class hn extends P{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Oc(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function js(h){P.call(this),this.h=h,this.g={}}T(js,P);var El=[];function Tl(h){re(h.g,function(y,E){this.g.hasOwnProperty(E)&&Ft(y)},h),h.g={}}js.prototype.N=function(){js.Z.N.call(this),Tl(this)},js.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pi=c.JSON.stringify,Hd=c.JSON.parse,Vc=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Pc(){}function Mc(){}var ir={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Wt(){x.call(this,"d")}T(Wt,x);function jn(){x.call(this,"c")}T(jn,x);var At={},kc=null;function Ga(){return kc=kc||new Dt}At.Ia="serverreachability";function Lc(h){x.call(this,At.Ia,h)}T(Lc,x);function Er(h){const y=Ga();qt(y,new Lc(y))}At.STAT_EVENT="statevent";function zs(h,y){x.call(this,At.STAT_EVENT,h),this.stat=y}T(zs,x);function Nt(h){const y=Ga();qt(y,new zs(y,h))}At.Ja="timingevent";function Tr(h,y){x.call(this,At.Ja,h),this.size=y}T(Tr,x);function br(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function sr(){this.g=!0}sr.prototype.ua=function(){this.g=!1};function Gd(h,y,E,A,q,$){h.info(function(){if(h.g)if($){var pe="",Pe=$.split("&");for(let Xe=0;Xe<Pe.length;Xe++){var wt=Pe[Xe].split("=");if(wt.length>1){const dt=wt[0];wt=wt[1];const qn=dt.split("_");pe=qn.length>=2&&qn[1]=="type"?pe+(dt+"="+wt+"&"):pe+(dt+"=redacted&")}}}else pe=null;else pe=$;return"XMLHTTP REQ ("+A+") [attempt "+q+"]: "+y+`
`+E+`
`+pe})}function Uc(h,y,E,A,q,$,pe){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+q+"]: "+y+`
`+E+`
`+$+" "+pe})}function Sr(h,y,E,A){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Kd(h,E)+(A?" "+A:"")})}function Bs(h,y){h.info(function(){return"TIMEOUT: "+y})}sr.prototype.info=function(){};function Kd(h,y){if(!h.g)return y;if(!y)return null;try{const $=JSON.parse(y);if($){for(h=0;h<$.length;h++)if(Array.isArray($[h])){var E=$[h];if(!(E.length<2)){var A=E[1];if(Array.isArray(A)&&!(A.length<1)){var q=A[0];if(q!="noop"&&q!="stop"&&q!="close")for(let pe=1;pe<A.length;pe++)A[pe]=""}}}}return Pi($)}catch{return y}}var Fs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},bl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Sl;function qs(){}T(qs,Pc),qs.prototype.g=function(){return new XMLHttpRequest},Sl=new qs;function ni(h){return encodeURIComponent(String(h))}function jc(h){var y=1;h=h.split(":");const E=[];for(;y>0&&h.length;)E.push(h.shift()),y--;return h.length&&E.push(h.join(":")),E}function ar(h,y,E,A){this.j=h,this.i=y,this.l=E,this.S=A||1,this.V=new js(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new or}function or(){this.i=null,this.g="",this.h=!1}var xt={},Qt={};function Ar(h,y,E){h.M=1,h.A=Hs(Vt(y)),h.u=E,h.R=!0,Ka(h,null)}function Ka(h,y){h.F=Date.now(),wr(h),h.B=Vt(h.A);var E=h.B,A=h.S;Array.isArray(A)||(A=[String(A)]),Xa(E.i,"t",A),h.C=0,E=h.j.L,h.h=new or,h.g=eh(h.j,E?y:null,!h.u),h.P>0&&(h.O=new hn(g(h.Y,h,h.g),h.P)),y=h.V,E=h.g,A=h.ba;var q="readystatechange";Array.isArray(q)||(q&&(El[0]=q.toString()),q=El);for(let $=0;$<q.length;$++){const pe=ye(E,q[$],A||y.handleEvent,!1,y.h||y);if(!pe)break;y.g[pe.key]=pe}y=h.J?I(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),Er(),Gd(h.i,h.v,h.B,h.l,h.S,h.u)}ar.prototype.ba=function(h){h=h.target;const y=this.O;y&&cr(h)==3?y.j():this.Y(h)},ar.prototype.Y=function(h){try{if(h==this.g)e:{const Pe=cr(this.g),wt=this.g.ya(),Xe=this.g.ca();if(!(Pe<3)&&(Pe!=3||this.g&&(this.h.h||this.g.la()||Jt(this.g)))){this.K||Pe!=4||wt==7||(wt==8||Xe<=0?Er(3):Er(2)),Ir(this);var y=this.g.ca();this.X=y;var E=Qd(this);if(this.o=y==200,Uc(this.i,this.v,this.B,this.l,this.S,Pe,y),this.o){if(this.U&&!this.L){t:{if(this.g){var A,q=this.g;if((A=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(A)){var $=A;break t}}$=null}if(h=$)Sr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Rr(this,h);else{this.o=!1,this.m=3,Nt(12),wn(this),zn(this);break e}}if(this.R){h=!0;let dt;for(;!this.K&&this.C<E.length;)if(dt=Bc(this,E),dt==Qt){Pe==4&&(this.m=4,Nt(14),h=!1),Sr(this.i,this.l,null,"[Incomplete Response]");break}else if(dt==xt){this.m=4,Nt(15),Sr(this.i,this.l,E,"[Invalid Chunk]"),h=!1;break}else Sr(this.i,this.l,dt,null),Rr(this,dt);if(zc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pe!=4||E.length!=0||this.h.h||(this.m=1,Nt(16),h=!1),this.o=this.o&&h,!h)Sr(this.i,this.l,E,"[Invalid Chunked Response]"),wn(this),zn(this);else if(E.length>0&&!this.W){this.W=!0;var pe=this.j;pe.g==this&&pe.aa&&!pe.P&&(pe.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Ul(pe),pe.P=!0,Nt(11))}}else Sr(this.i,this.l,E,null),Rr(this,E);Pe==4&&wn(this),this.o&&!this.K&&(Pe==4?Xc(this.j,this):(this.o=!1,wr(this)))}else ii(this.g),y==400&&E.indexOf("Unknown SID")>0?(this.m=3,Nt(12)):(this.m=0,Nt(13)),wn(this),zn(this)}}}catch{}};function Qd(h){if(!zc(h))return h.g.la();const y=Jt(h.g);if(y==="")return"";let E="";const A=y.length,q=cr(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return wn(h),zn(h),"";h.h.i=new c.TextDecoder}for(let $=0;$<A;$++)h.h.h=!0,E+=h.h.i.decode(y[$],{stream:!(q&&$==A-1)});return y.length=0,h.h.g+=E,h.C=0,h.h.g}function zc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Bc(h,y){var E=h.C,A=y.indexOf(`
`,E);return A==-1?Qt:(E=Number(y.substring(E,A)),isNaN(E)?xt:(A+=1,A+E>y.length?Qt:(y=y.slice(A,A+E),h.C=A+E,y)))}ar.prototype.cancel=function(){this.K=!0,wn(this)};function wr(h){h.T=Date.now()+h.H,Qa(h,h.H)}function Qa(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=br(g(h.aa,h),y)}function Ir(h){h.D&&(c.clearTimeout(h.D),h.D=null)}ar.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Bs(this.i,this.B),this.M!=2&&(Er(),Nt(17)),wn(this),this.m=2,zn(this)):Qa(this,this.T-h)};function zn(h){h.j.I==0||h.K||Xc(h.j,h)}function wn(h){Ir(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Tl(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Rr(h,y){try{var E=h.j;if(E.I!=0&&(E.g==h||Dr(E.h,h))){if(!h.L&&Dr(E.h,h)&&E.I==3){try{var A=E.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var q=A;if(q[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<h.F)to(E),Fi(E);else break e;Ws(E),Nt(18)}}else E.xa=q[1],0<E.xa-E.K&&q[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=br(g(E.Va,E),6e3));Cr(E.h)<=1&&E.ta&&(E.ta=void 0)}else Mr(E,11)}else if((h.L||E.g==h)&&to(E),!N(y))for(q=E.Ba.g.parse(y),y=0;y<q.length;y++){let Xe=q[y];const dt=Xe[0];if(!(dt<=E.K))if(E.K=dt,Xe=Xe[1],E.I==2)if(Xe[0]=="c"){E.M=Xe[1],E.ba=Xe[2];const qn=Xe[3];qn!=null&&(E.ka=qn,E.j.info("VER="+E.ka));const kr=Xe[4];kr!=null&&(E.za=kr,E.j.info("SVER="+E.za));const hr=Xe[5];hr!=null&&typeof hr=="number"&&hr>0&&(A=1.5*hr,E.O=A,E.j.info("backChannelRequestTimeoutMs_="+A)),A=E;const fr=h.g;if(fr){const Js=fr.g?fr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Js){var $=A.h;$.g||Js.indexOf("spdy")==-1&&Js.indexOf("quic")==-1&&Js.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Il($,$.h),$.h=null))}if(A.G){const no=fr.g?fr.g.getResponseHeader("X-HTTP-Session-Id"):null;no&&(A.wa=no,Ze(A.J,A.G,no))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-h.F,E.j.info("Handshake RTT: "+E.T+"ms")),A=E;var pe=h;if(A.na=Zc(A,A.L?A.ba:null,A.W),pe.L){Rl(A.h,pe);var Pe=pe,wt=A.O;wt&&(Pe.H=wt),Pe.D&&(Ir(Pe),wr(Pe)),A.g=pe}else Yc(A);E.i.length>0&&Pr(E)}else Xe[0]!="stop"&&Xe[0]!="close"||Mr(E,7);else E.I==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?Mr(E,7):kl(E):Xe[0]!="noop"&&E.l&&E.l.qa(Xe),E.A=0)}}Er(4)}catch{}}var Ot=class{constructor(h,y){this.g=h,this.map=y}};function Al(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function wl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Cr(h){return h.h?1:h.g?h.g.size:0}function Dr(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Il(h,y){h.g?h.g.add(y):h.h=y}function Rl(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Al.prototype.cancel=function(){if(this.i=Cl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Cl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const E of h.g.values())y=y.concat(E.G);return y}return V(h.i)}var Fc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ya(h,y){if(h){h=h.split("&");for(let E=0;E<h.length;E++){const A=h[E].indexOf("=");let q,$=null;A>=0?(q=h[E].substring(0,A),$=h[E].substring(A+1)):q=h[E],y(q,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function In(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof In?(this.l=h.l,Yt(this,h.j),this.o=h.o,this.g=h.g,Mi(this,h.u),this.h=h.h,Dl(this,Kc(h.i)),this.m=h.m):h&&(y=String(h).match(Fc))?(this.l=!1,Yt(this,y[1]||"",!0),this.o=Nr(y[2]||""),this.g=Nr(y[3]||"",!0),Mi(this,y[4]),this.h=Nr(y[5]||"",!0),Dl(this,y[6]||"",!0),this.m=Nr(y[7]||"")):(this.l=!1,this.i=new Li(null,this.l))}In.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Gs(y,$a,!0),":");var E=this.g;return(E||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Gs(y,$a,!0),"@"),h.push(ni(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&h.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(Gs(E,E.charAt(0)=="/"?Nl:qc,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",Gs(E,Hc)),h.join("")},In.prototype.resolve=function(h){const y=Vt(this);let E=!!h.j;E?Yt(y,h.j):E=!!h.o,E?y.o=h.o:E=!!h.g,E?y.g=h.g:E=h.u!=null;var A=h.h;if(E)Mi(y,h.u);else if(E=!!h.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var q=y.h.lastIndexOf("/");q!=-1&&(A=y.h.slice(0,q+1)+A)}if(q=A,q==".."||q==".")A="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){A=q.lastIndexOf("/",0)==0,q=q.split("/");const $=[];for(let pe=0;pe<q.length;){const Pe=q[pe++];Pe=="."?A&&pe==q.length&&$.push(""):Pe==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),A&&pe==q.length&&$.push("")):($.push(Pe),A=!0)}A=$.join("/")}else A=q}return E?y.h=A:E=h.i.toString()!=="",E?Dl(y,Kc(h.i)):E=!!h.m,E&&(y.m=h.m),y};function Vt(h){return new In(h)}function Yt(h,y,E){h.j=E?Nr(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Mi(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Dl(h,y,E){y instanceof Li?(h.i=y,Wa(h.i,h.l)):(E||(y=Gs(y,ki)),h.i=new Li(y,h.l))}function Ze(h,y,E){h.i.set(y,E)}function Hs(h){return Ze(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Nr(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Gs(h,y,E){return typeof h=="string"?(h=encodeURI(h).replace(y,yn),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function yn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var $a=/[#\/\?@]/g,qc=/[#\?:]/g,Nl=/[#\?]/g,ki=/[#\?@]/g,Hc=/#/g;function Li(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function _n(h){h.g||(h.g=new Map,h.h=0,h.i&&Ya(h.i,function(y,E){h.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}r=Li.prototype,r.add=function(h,y){_n(this),this.i=null,h=Ui(this,h);let E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(y),this.h+=1,this};function Gc(h,y){_n(h),y=Ui(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function xl(h,y){return _n(h),y=Ui(h,y),h.g.has(y)}r.forEach=function(h,y){_n(this),this.g.forEach(function(E,A){E.forEach(function(q){h.call(y,q,A,this)},this)},this)};function Ol(h,y){_n(h);let E=[];if(typeof y=="string")xl(h,y)&&(E=E.concat(h.g.get(Ui(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)E=E.concat(h[y]);return E}r.set=function(h,y){return _n(this),this.i=null,h=Ui(this,h),xl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},r.get=function(h,y){return h?(h=Ol(this,h),h.length>0?String(h[0]):y):y};function Xa(h,y,E){Gc(h,y),E.length>0&&(h.i=null,h.g.set(Ui(h,y),V(E)),h.h+=E.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var E=y[A];const q=ni(E);E=Ol(this,E);for(let $=0;$<E.length;$++){let pe=q;E[$]!==""&&(pe+="="+ni(E[$])),h.push(pe)}}return this.i=h.join("&")};function Kc(h){const y=new Li;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Ui(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Wa(h,y){y&&!h.j&&(_n(h),h.i=null,h.g.forEach(function(E,A){const q=A.toLowerCase();A!=q&&(Gc(this,A),Xa(this,q,E))},h)),h.j=y}function lr(h,y){const E=new sr;if(c.Image){const A=new Image;A.onload=_(Bn,E,"TestLoadImage: loaded",!0,y,A),A.onerror=_(Bn,E,"TestLoadImage: error",!1,y,A),A.onabort=_(Bn,E,"TestLoadImage: abort",!1,y,A),A.ontimeout=_(Bn,E,"TestLoadImage: timeout",!1,y,A),c.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else y(!1)}function Vl(h,y){const E=new sr,A=new AbortController,q=setTimeout(()=>{A.abort(),Bn(E,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:A.signal}).then($=>{clearTimeout(q),$.ok?Bn(E,"TestPingServer: ok",!0,y):Bn(E,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(q),Bn(E,"TestPingServer: error",!1,y)})}function Bn(h,y,E,A,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),A(E)}catch{}}function ji(){this.g=new Vc}function xr(h){this.i=h.Sb||null,this.h=h.ab||!1}T(xr,Pc),xr.prototype.g=function(){return new Ks(this.i,this.h)};function Ks(h,y){Dt.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Ks,Dt),r=Ks.prototype,r.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,ur(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,zi(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ur(this)),this.g&&(this.readyState=3,ur(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ja(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ja(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?zi(this):ur(this),this.readyState==3&&Ja(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,zi(this))},r.Na=function(h){this.g&&(this.response=h,zi(this))},r.ga=function(){this.g&&zi(this)};function zi(h){h.readyState=4,h.l=null,h.j=null,h.B=null,ur(h)}r.setRequestHeader=function(h,y){this.A.append(h,y)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var E=y.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=y.next();return h.join(`\r
`)};function ur(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ks.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Fn(h){let y="";return re(h,function(E,A){y+=A,y+=":",y+=E,y+=`\r
`}),y}function Qs(h,y,E){e:{for(A in E){var A=!1;break e}A=!0}A||(E=Fn(E),typeof h=="string"?E!=null&&ni(E):Ze(h,y,E))}function st(h){Dt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(st,Dt);var Or=/^https?$/i,Pl=["POST","PUT"];r=st.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,y,E,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Sl.g(),this.g.onreadystatechange=b(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch($){Ys(this,$);return}if(h=E||"",E=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var q in A)E.set(q,A[q]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const $ of A.keys())E.set($,A.get($));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(E.keys()).find($=>$.toLowerCase()=="content-type"),q=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Pl,y,void 0)>=0)||A||q||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,pe]of E)this.g.setRequestHeader($,pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch($){Ys(this,$)}};function Ys(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Ml(h),ri(h)}function Ml(h){h.A||(h.A=!0,qt(h,"complete"),qt(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,qt(this,"complete"),qt(this,"abort"),ri(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ri(this,!0)),st.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?$s(this):this.Xa())},r.Xa=function(){$s(this)};function $s(h){if(h.h&&typeof l<"u"){if(h.v&&cr(h)==4)setTimeout(h.Ca.bind(h),0);else if(qt(h,"readystatechange"),cr(h)==4){h.h=!1;try{const $=h.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var E;if(!(E=y)){var A;if(A=$===0){let pe=String(h.D).match(Fc)[1]||null;!pe&&c.self&&c.self.location&&(pe=c.self.location.protocol.slice(0,-1)),A=!Or.test(pe?pe.toLowerCase():"")}E=A}if(E)qt(h,"complete"),qt(h,"success");else{h.o=6;try{var q=cr(h)>2?h.g.statusText:""}catch{q=""}h.l=q+" ["+h.ca()+"]",Ml(h)}}finally{ri(h)}}}}function ri(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const E=h.g;h.g=null,y||qt(h,"ready");try{E.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function cr(h){return h.g?h.g.readyState:0}r.ca=function(){try{return cr(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Hd(y)}};function Jt(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ii(h){const y={};h=(h.g&&cr(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(N(h[A]))continue;var E=jc(h[A]);const q=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const $=y[q]||[];y[q]=$,$.push(E)}ee(y,function(A){return A.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vr(h,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||y}function Bi(h){this.za=0,this.i=[],this.j=new sr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Vr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Vr("baseRetryDelayMs",5e3,h),this.Za=Vr("retryDelaySeedMs",1e4,h),this.Ta=Vr("forwardChannelMaxRetries",2,h),this.va=Vr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Al(h&&h.concurrentRequestLimit),this.Ba=new ji,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Bi.prototype,r.ka=8,r.I=1,r.connect=function(h,y,E,A){Nt(0),this.W=h,this.H=y||{},E&&A!==void 0&&(this.H.OSID=E,this.H.OAID=A),this.F=this.X,this.J=Zc(this,null,this.W),Pr(this)};function kl(h){if(Za(h),h.I==3){var y=h.V++,E=Vt(h.J);if(Ze(E,"SID",h.M),Ze(E,"RID",y),Ze(E,"TYPE","terminate"),Xs(h,E),y=new ar(h,h.j,y),y.M=2,y.A=Hs(Vt(E)),E=!1,c.navigator&&c.navigator.sendBeacon)try{E=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!E&&c.Image&&(new Image().src=y.A,E=!0),E||(y.g=eh(y.j,null),y.g.ea(y.A)),y.F=Date.now(),wr(y)}Jc(h)}function Fi(h){h.g&&(Ul(h),h.g.cancel(),h.g=null)}function Za(h){Fi(h),h.v&&(c.clearTimeout(h.v),h.v=null),to(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Pr(h){if(!wl(h.h)&&!h.m){h.m=!0;var y=h.Ea;he||w(),oe||(he(),oe=!0),C.add(y,h),h.D=0}}function eo(h,y){return Cr(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=br(g(h.Ea,h,y),Wc(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const q=new ar(this,this.j,h);let $=this.o;if(this.U&&($?($=I($),Z($,this.U)):$=this.U),this.u!==null||this.R||(q.J=$,$=null),this.S)e:{for(var y=0,E=0;E<this.i.length;E++){t:{var A=this.i[E];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=E;break e}if(y===4096||E===this.i.length-1){y=E+1;break e}}y=1e3}else y=1e3;y=Qc(this,q,y),E=Vt(this.J),Ze(E,"RID",h),Ze(E,"CVER",22),this.G&&Ze(E,"X-HTTP-Session-Id",this.G),Xs(this,E),$&&(this.R?y="headers="+ni(Fn($))+"&"+y:this.u&&Qs(E,this.u,$)),Il(this.h,q),this.Ra&&Ze(E,"TYPE","init"),this.S?(Ze(E,"$req",y),Ze(E,"SID","null"),q.U=!0,Ar(q,E,null)):Ar(q,E,y),this.I=2}}else this.I==3&&(h?Ll(this,h):this.i.length==0||wl(this.h)||Ll(this))};function Ll(h,y){var E;y?E=y.l:E=h.V++;const A=Vt(h.J);Ze(A,"SID",h.M),Ze(A,"RID",E),Ze(A,"AID",h.K),Xs(h,A),h.u&&h.o&&Qs(A,h.u,h.o),E=new ar(h,h.j,E,h.D+1),h.u===null&&(E.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Qc(h,E,1e3),E.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Il(h.h,E),Ar(E,A,y)}function Xs(h,y){h.H&&re(h.H,function(E,A){Ze(y,A,E)}),h.l&&re({},function(E,A){Ze(y,A,E)})}function Qc(h,y,E){E=Math.min(h.i.length,E);const A=h.l?g(h.l.Ka,h.l,h):null;e:{var q=h.i;let Pe=-1;for(;;){const wt=["count="+E];Pe==-1?E>0?(Pe=q[0].g,wt.push("ofs="+Pe)):Pe=0:wt.push("ofs="+Pe);let Xe=!0;for(let dt=0;dt<E;dt++){var $=q[dt].g;const qn=q[dt].map;if($-=Pe,$<0)Pe=Math.max(0,q[dt].g-100),Xe=!1;else try{$="req"+$+"_"||"";try{var pe=qn instanceof Map?qn:Object.entries(qn);for(const[kr,hr]of pe){let fr=hr;d(hr)&&(fr=Pi(hr)),wt.push($+kr+"="+encodeURIComponent(fr))}}catch(kr){throw wt.push($+"type="+encodeURIComponent("_badmap")),kr}}catch{A&&A(qn)}}if(Xe){pe=wt.join("&");break e}}pe=void 0}return h=h.i.splice(0,E),y.G=h,pe}function Yc(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;he||w(),oe||(he(),oe=!0),C.add(y,h),h.A=0}}function Ws(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=br(g(h.Da,h),Wc(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,$c(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=br(g(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Nt(10),Fi(this),$c(this))};function Ul(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function $c(h){h.g=new ar(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Vt(h.na);Ze(y,"RID","rpc"),Ze(y,"SID",h.M),Ze(y,"AID",h.K),Ze(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ze(y,"TO",h.ia),Ze(y,"TYPE","xmlhttp"),Xs(h,y),h.u&&h.o&&Qs(y,h.u,h.o),h.O&&(h.g.H=h.O);var E=h.g;h=h.ba,E.M=1,E.A=Hs(Vt(y)),E.u=null,E.R=!0,Ka(E,h)}r.Va=function(){this.C!=null&&(this.C=null,Fi(this),Ws(this),Nt(19))};function to(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Xc(h,y){var E=null;if(h.g==y){to(h),Ul(h),h.g=null;var A=2}else if(Dr(h.h,y))E=y.G,Rl(h.h,y),A=1;else return;if(h.I!=0){if(y.o)if(A==1){E=y.u?y.u.length:0,y=Date.now()-y.F;var q=h.D;A=Ga(),qt(A,new Tr(A,E)),Pr(h)}else Yc(h);else if(q=y.m,q==3||q==0&&y.X>0||!(A==1&&eo(h,y)||A==2&&Ws(h)))switch(E&&E.length>0&&(y=h.h,y.i=y.i.concat(E)),q){case 1:Mr(h,5);break;case 4:Mr(h,10);break;case 3:Mr(h,6);break;default:Mr(h,2)}}}function Wc(h,y){let E=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(E*=2),E*y}function Mr(h,y){if(h.j.info("Error code "+y),y==2){var E=g(h.bb,h),A=h.Ua;const q=!A;A=new In(A||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Yt(A,"https"),Hs(A),q?lr(A.toString(),E):Vl(A.toString(),E)}else Nt(2);h.I=0,h.l&&h.l.pa(y),Jc(h),Za(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Nt(2)):(this.j.info("Failed to ping google.com"),Nt(1))};function Jc(h){if(h.I=0,h.ja=[],h.l){const y=Cl(h.h);(y.length!=0||h.i.length!=0)&&(B(h.ja,y),B(h.ja,h.i),h.h.i.length=0,V(h.i),h.i.length=0),h.l.oa()}}function Zc(h,y,E){var A=E instanceof In?Vt(E):new In(E);if(A.g!="")y&&(A.g=y+"."+A.g),Mi(A,A.u);else{var q=c.location;A=q.protocol,y=y?y+"."+q.hostname:q.hostname,q=+q.port;const $=new In(null);A&&Yt($,A),y&&($.g=y),q&&Mi($,q),E&&($.h=E),A=$}return E=h.G,y=h.wa,E&&y&&Ze(A,E,y),Ze(A,"VER",h.ka),Xs(h,A),A}function eh(h,y,E){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new st(new xr({ab:E})):new st(h.ma),y.Fa(h.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function th(){}r=th.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function qi(){}qi.prototype.g=function(h,y){return new fn(h,y)};function fn(h,y){Dt.call(this),this.g=new Bi(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!N(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!N(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new si(this)}T(fn,Dt),fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){kl(this.g)},fn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.v&&(E={},E.__data__=Pi(h),h=E);y.i.push(new Ot(y.Ya++,h)),y.I==3&&Pr(y)},fn.prototype.N=function(){this.g.l=null,delete this.j,kl(this.g),delete this.g,fn.Z.N.call(this)};function nh(h){Wt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const E in y){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}T(nh,Wt);function rh(){jn.call(this),this.status=1}T(rh,jn);function si(h){this.g=h}T(si,th),si.prototype.ra=function(){qt(this.g,"a")},si.prototype.qa=function(h){qt(this.g,new nh(h))},si.prototype.pa=function(h){qt(this.g,new rh)},si.prototype.oa=function(){qt(this.g,"b")},qi.prototype.createWebChannel=qi.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,vw=function(){return new qi},_w=function(){return Ga()},yw=At,qg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Fs.NO_ERROR=0,Fs.TIMEOUT=8,Fs.HTTP_ERROR=6,wf=Fs,bl.COMPLETE="complete",gw=bl,Mc.EventType=ir,ir.OPEN="a",ir.CLOSE="b",ir.ERROR="c",ir.MESSAGE="d",Dt.prototype.listen=Dt.prototype.J,Vu=Mc,st.prototype.listenOnce=st.prototype.K,st.prototype.getLastError=st.prototype.Ha,st.prototype.getLastErrorCode=st.prototype.ya,st.prototype.getStatus=st.prototype.ca,st.prototype.getResponseJson=st.prototype.La,st.prototype.getResponseText=st.prototype.la,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Fa,pw=st}).apply(typeof cf<"u"?cf:typeof self<"u"?self:typeof window<"u"?window:{});const Jb="@firebase/firestore",Zb="4.9.3";class rn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rn.UNAUTHENTICATED=new rn(null),rn.GOOGLE_CREDENTIALS=new rn("google-credentials-uid"),rn.FIRST_PARTY=new rn("first-party-uid"),rn.MOCK_USER=new rn("mock-user");let pl="12.7.0";const xa=new Ry("@firebase/firestore");function jo(){return xa.logLevel}function ce(r,...e){if(xa.logLevel<=qe.DEBUG){const t=e.map(Uy);xa.debug(`Firestore (${pl}): ${r}`,...t)}}function mn(r,...e){if(xa.logLevel<=qe.ERROR){const t=e.map(Uy);xa.error(`Firestore (${pl}): ${r}`,...t)}}function Oa(r,...e){if(xa.logLevel<=qe.WARN){const t=e.map(Uy);xa.warn(`Firestore (${pl}): ${r}`,...t)}}function Uy(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function be(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Ew(r,i,t)}function Ew(r,e,t){let i=`FIRESTORE (${pl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw mn(i),new Error(i)}function we(r,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,r||Ew(e,a,i)}function Oe(r,e){return r}const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends ei{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Yr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Tw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class HO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(rn.UNAUTHENTICATED)))}shutdown(){}}class GO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class KO{constructor(e){this.t=e,this.currentUser=rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){we(this.o===void 0,42304);let i=this.i;const a=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new Yr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Yr,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await a(this.currentUser)}))},d=p=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Yr)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(we(typeof i.accessToken=="string",31837,{l:i}),new Tw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string",2055,{h:e}),new rn(e)}}class QO{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=rn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class YO{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new QO(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(rn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class eS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $O{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Jn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){we(this.o===void 0,3512);const i=l=>{l.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ce("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const a=l=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new eS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(we(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new eS(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function XO(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}class jy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=XO(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function xe(r,e){return r<e?-1:r>e?1:0}function Hg(r,e){const t=Math.min(r.length,e.length);for(let i=0;i<t;i++){const a=r.charAt(i),l=e.charAt(i);if(a!==l)return rg(a)===rg(l)?xe(a,l):rg(a)?1:-1}return xe(r.length,e.length)}const WO=55296,JO=57343;function rg(r){const e=r.charCodeAt(0);return e>=WO&&e<=JO}function Wo(r,e,t){return r.length===e.length&&r.every(((i,a)=>t(i,e[a])))}function bw(r){return r+"\0"}const tS="__name__";class Fr{constructor(e,t,i){t===void 0?t=0:t>e.length&&be(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&be(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Fr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Fr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=Fr.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return xe(e.length,t.length)}static compareSegments(e,t){const i=Fr.isNumericId(e),a=Fr.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?Fr.extractNumericId(e).compare(Fr.extractNumericId(t)):Hg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ws.fromString(e.substring(4,e.length-2))}}class Je extends Fr{construct(e,t,i){return new Je(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new de(te.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((a=>a.length>0)))}return new Je(t)}static emptyPath(){return new Je([])}}const ZO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _t extends Fr{construct(e,t,i){return new _t(e,t,i)}static isValidIdentifier(e){return ZO.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_t.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===tS}static keyField(){return new _t([tS])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new de(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new de(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new de(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(i+=d,a++):(l(),a++)}if(l(),c)throw new de(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _t(t)}static emptyPath(){return new _t([])}}class ge{constructor(e){this.path=e}static fromPath(e){return new ge(Je.fromString(e))}static fromName(e){return new ge(Je.fromString(e).popFirst(5))}static empty(){return new ge(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Je.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new Je(e.slice()))}}function Sw(r,e,t){if(!t)throw new de(te.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function eV(r,e,t,i){if(e===!0&&i===!0)throw new de(te.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function nS(r){if(!ge.isDocumentKey(r))throw new de(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function rS(r){if(ge.isDocumentKey(r))throw new de(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Aw(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Ed(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":be(12329,{type:typeof r})}function kn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new de(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ed(r);throw new de(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function jt(r,e){const t={typeString:r};return e&&(t.value=e),t}function Ec(r,e){if(!Aw(r))throw new de(te.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const a=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const c=r[i];if(a&&typeof c!==a){t=`JSON field '${i}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new de(te.INVALID_ARGUMENT,t);return!0}const iS=-62135596800,sS=1e6;class nt{static now(){return nt.fromMillis(Date.now())}static fromDate(e){return nt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*sS);return new nt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<iS)throw new de(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/sS}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ec(e,nt._jsonSchema))return new nt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-iS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nt._jsonSchemaVersion="firestore/timestamp/1.0",nt._jsonSchema={type:jt("string",nt._jsonSchemaVersion),seconds:jt("number"),nanoseconds:jt("number")};class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new nt(0,0))}static max(){return new Re(new nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Zu=-1;class Qf{constructor(e,t,i,a){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=a}}function Gg(r){return r.fields.find((e=>e.kind===2))}function ga(r){return r.fields.filter((e=>e.kind!==2))}Qf.UNKNOWN_ID=-1;class If{constructor(e,t){this.fieldPath=e,this.kind=t}}class ec{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ec(0,Ln.min())}}function tV(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,a=Re.fromTimestamp(i===1e9?new nt(t+1,0):new nt(t,i));return new Ln(a,ge.empty(),e)}function ww(r){return new Ln(r.readTime,r.key,Zu)}class Ln{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ln(Re.min(),ge.empty(),Zu)}static max(){return new Ln(Re.max(),ge.empty(),Zu)}}function zy(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ge.comparator(r.documentKey,e.documentKey),t!==0?t:xe(r.largestBatchId,e.largestBatchId))}const Iw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Rw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Fa(r){if(r.code!==te.FAILED_PRECONDITION||r.message!==Iw)throw r;ce("LocalStore","Unexpectedly lost primary lease")}class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new F(((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof F?t:F.resolve(t)}catch(t){return F.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):F.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):F.reject(t)}static resolve(e){return new F(((t,i)=>{t(e)}))}static reject(e){return new F(((t,i)=>{i(e)}))}static waitFor(e){return new F(((t,i)=>{let a=0,l=0,c=!1;e.forEach((d=>{++a,d.next((()=>{++l,c&&l===a&&t()}),(p=>i(p)))})),c=!0,l===a&&t()}))}static or(e){let t=F.resolve(!1);for(const i of e)t=t.next((a=>a?F.resolve(a):i()));return t}static forEach(e,t){const i=[];return e.forEach(((a,l)=>{i.push(t.call(this,a,l))})),this.waitFor(i)}static mapArray(e,t){return new F(((i,a)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const g=p;t(e[g]).next((_=>{c[g]=_,++d,d===l&&i(c)}),(_=>a(_)))}}))}static doWhile(e,t){return new F(((i,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):i()};l()}))}}const Pn="SimpleDb";class Td{static open(e,t,i,a){try{return new Td(t,e.transaction(a,i))}catch(l){throw new zu(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Yr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new zu(e,t.error)):this.S.resolve()},this.transaction.onerror=i=>{const a=By(i.target.error);this.S.reject(new zu(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ce(Pn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new rV(t)}}class Is{static delete(e){return ce(Pn,"Removing database:",e),_a(EA().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!DA())return!1;if(Is.F())return!0;const e=Gt(),t=Is.M(e),i=0<t&&t<10,a=Cw(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||l)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,t,i){this.name=e,this.version=t,this.N=i,this.B=null,Is.M(Gt())===12.2&&mn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ce(Pn,"Opening database:",this.name),this.db=await new Promise(((t,i)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;t(c)},a.onblocked=()=>{i(new zu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?i(new de(te.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?i(new de(te.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):i(new zu(e,c))},a.onupgradeneeded=l=>{ce(Pn,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.N.k(c,a.transaction,l.oldVersion,this.version).next((()=>{ce(Pn,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,a){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const d=Td.open(this.db,e,l?"readonly":"readwrite",i),p=a(d).next((g=>(d.C(),g))).catch((g=>(d.abort(g),F.reject(g)))).toPromise();return p.catch((()=>{})),await d.D,p}catch(d){const p=d,g=p.name!=="FirebaseError"&&c<3;if(ce(Pn,"Transaction failed with error:",p.message,"Retrying:",g),this.close(),!g)return Promise.reject(p)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Cw(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class nV{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return _a(this.U.delete())}}class zu extends de{constructor(e,t){super(te.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ms(r){return r.name==="IndexedDbTransactionError"}class rV{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(ce(Pn,"PUT",this.store.name,e,t),i=this.store.put(t,e)):(ce(Pn,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),_a(i)}add(e){return ce(Pn,"ADD",this.store.name,e,e),_a(this.store.add(e))}get(e){return _a(this.store.get(e)).next((t=>(t===void 0&&(t=null),ce(Pn,"GET",this.store.name,e,t),t)))}delete(e){return ce(Pn,"DELETE",this.store.name,e),_a(this.store.delete(e))}count(){return ce(Pn,"COUNT",this.store.name),_a(this.store.count())}J(e,t){const i=this.options(e,t),a=i.index?this.store.index(i.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(i.range);return new F(((c,d)=>{l.onerror=p=>{d(p.target.error)},l.onsuccess=p=>{c(p.target.result)}}))}{const l=this.cursor(i),c=[];return this.H(l,((d,p)=>{c.push(p)})).next((()=>c))}}Y(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new F(((a,l)=>{i.onerror=c=>{l(c.target.error)},i.onsuccess=c=>{a(c.target.result)}}))}Z(e,t){ce(Pn,"DELETE ALL",this.store.name);const i=this.options(e,t);i.X=!1;const a=this.cursor(i);return this.H(a,((l,c,d)=>d.delete()))}ee(e,t){let i;t?i=e:(i={},t=e);const a=this.cursor(i);return this.H(a,t)}te(e){const t=this.cursor({});return new F(((i,a)=>{t.onerror=l=>{const c=By(l.target.error);a(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next((d=>{d?c.continue():i()})):i()}}))}H(e,t){const i=[];return new F(((a,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void a();const p=new nV(d),g=t(d.primaryKey,d.value,p);if(g instanceof F){const _=g.catch((T=>(p.done(),F.reject(T))));i.push(_)}p.isDone?a():p.G===null?d.continue():d.continue(p.G)}})).next((()=>F.waitFor(i)))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function _a(r){return new F(((e,t)=>{r.onsuccess=i=>{const a=i.target.result;e(a)},r.onerror=i=>{const a=By(i.target.error);t(a)}}))}let aS=!1;function By(r){const e=Is.M(Gt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const i=new de("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return aS||(aS=!0,setTimeout((()=>{throw i}),0)),i}}return r}const Bu="IndexBackfiller";class iV{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ce(Bu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ce(Bu,`Documents written: ${t}`)}catch(t){Ms(t)?ce(Bu,"Ignoring IndexedDB error during index backfill: ",t):await Fa(t)}await this.re(6e4)}))}}class sV{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const i=new Set;let a=t,l=!0;return F.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!i.has(c))return ce(Bu,`Processing collection: ${c}`),this.oe(e,c,a).next((d=>{a-=d,i.add(c)}));l=!1})))).next((()=>t-a))}oe(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,i).next((l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(a,l))).next((d=>(ce(Bu,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d)))).next((()=>c.size))}))))}_e(e,t){let i=e;return t.changes.forEach(((a,l)=>{const c=ww(l);zy(c,i)>0&&(i=c)})),new Ln(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}class er{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}er.ce=-1;const Sa=-1;function bd(r){return r==null}function tc(r){return r===0&&1/r==-1/0}function aV(r){return typeof r=="number"&&Number.isInteger(r)&&!tc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const Yf="";function cn(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=oS(e)),e=oV(r.get(t),e);return oS(e)}function oV(r,e){let t=e;const i=r.length;for(let a=0;a<i;a++){const l=r.charAt(a);switch(l){case"\0":t+="";break;case Yf:t+="";break;default:t+=l}}return t}function oS(r){return r+Yf+""}function qr(r){const e=r.length;if(we(e>=2,64408,{path:r}),e===2)return we(r.charAt(0)===Yf&&r.charAt(1)==="",56145,{path:r}),Je.emptyPath();const t=e-2,i=[];let a="";for(let l=0;l<e;){const c=r.indexOf(Yf,l);switch((c<0||c>t)&&be(50515,{path:r}),r.charAt(c+1)){case"":const d=r.substring(l,c);let p;a.length===0?p=d:(a+=d,p=a,a=""),i.push(p);break;case"":a+=r.substring(l,c),a+="\0";break;case"":a+=r.substring(l,c+1);break;default:be(61167,{path:r})}l=c+2}return new Je(i)}const ya="remoteDocuments",Tc="owner",Vo="owner",nc="mutationQueues",lV="userId",gr="mutations",lS="batchId",ba="userMutationsIndex",uS=["userId","batchId"];function Rf(r,e){return[r,cn(e)]}function Dw(r,e,t){return[r,cn(e),t]}const uV={},Jo="documentMutations",$f="remoteDocumentsV14",cV=["prefixPath","collectionGroup","readTime","documentId"],Cf="documentKeyIndex",hV=["prefixPath","collectionGroup","documentId"],Nw="collectionGroupIndex",fV=["collectionGroup","readTime","prefixPath","documentId"],rc="remoteDocumentGlobal",Kg="remoteDocumentGlobalKey",Zo="targets",xw="queryTargetsIndex",dV=["canonicalId","targetId"],el="targetDocuments",mV=["targetId","path"],Fy="documentTargetsIndex",pV=["path","targetId"],Xf="targetGlobalKey",Aa="targetGlobal",ic="collectionParents",gV=["collectionId","parent"],tl="clientMetadata",yV="clientId",Sd="bundles",_V="bundleId",Ad="namedQueries",vV="name",qy="indexConfiguration",EV="indexId",Qg="collectionGroupIndex",TV="collectionGroup",Fu="indexState",bV=["indexId","uid"],Ow="sequenceNumberIndex",SV=["uid","sequenceNumber"],qu="indexEntries",AV=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Vw="documentKeyIndex",wV=["indexId","uid","orderedDocumentKey"],wd="documentOverlays",IV=["userId","collectionPath","documentId"],Yg="collectionPathOverlayIndex",RV=["userId","collectionPath","largestBatchId"],Pw="collectionGroupOverlayIndex",CV=["userId","collectionGroup","largestBatchId"],Hy="globals",DV="name",Mw=[nc,gr,Jo,ya,Zo,Tc,Aa,el,tl,rc,ic,Sd,Ad],NV=[...Mw,wd],kw=[nc,gr,Jo,$f,Zo,Tc,Aa,el,tl,rc,ic,Sd,Ad,wd],Lw=kw,Gy=[...Lw,qy,Fu,qu],xV=Gy,Uw=[...Gy,Hy],OV=Uw;class $g extends Rw{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Kt(r,e){const t=Oe(r);return Is.O(t.le,e)}function cS(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function ks(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function jw(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class yt{constructor(e,t){this.comparator=e,this.root=t||sn.EMPTY}insert(e,t){return new yt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,sn.BLACK,null,null))}remove(e){return new yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hf(this.root,e,this.comparator,!1)}getReverseIterator(){return new hf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hf(this.root,e,this.comparator,!0)}}class hf{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class sn{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??sn.RED,this.left=a??sn.EMPTY,this.right=l??sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new sn(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return sn.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw be(27949);return e+(this.isRed()?0:1)}}sn.EMPTY=null,sn.RED=!0,sn.BLACK=!1;sn.EMPTY=new class{constructor(){this.size=0}get key(){throw be(57766)}get value(){throw be(16141)}get color(){throw be(16727)}get left(){throw be(29726)}get right(){throw be(36894)}copy(e,t,i,a,l){return this}insert(e,t,i){return new sn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class it{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new hS(this.data.getIterator())}getIteratorFrom(e){return new hS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof it)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new it(this.comparator);return t.data=e,t}}class hS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Po(r){return r.hasNext()?r.getNext():void 0}class An{constructor(e){this.fields=e,e.sort(_t.comparator)}static empty(){return new An([])}unionWith(e){let t=new it(_t.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new An(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class zw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Bt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new zw("Invalid base64 string: "+l):l}})(e);return new Bt(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new Bt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bt.EMPTY_BYTE_STRING=new Bt("");const VV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ci(r){if(we(!!r,39018),typeof r=="string"){let e=0;const t=VV.exec(r);if(we(!!t,46558,{timestamp:r}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:pt(r.seconds),nanos:pt(r.nanos)}}function pt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Di(r){return typeof r=="string"?Bt.fromBase64String(r):Bt.fromUint8Array(r)}const Bw="server_timestamp",Fw="__type__",qw="__previous_value__",Hw="__local_write_time__";function Ky(r){return(r?.mapValue?.fields||{})[Fw]?.stringValue===Bw}function Id(r){const e=r.mapValue.fields[qw];return Ky(e)?Id(e):e}function sc(r){const e=Ci(r.mapValue.fields[Hw].timestampValue);return new nt(e.seconds,e.nanos)}class PV{constructor(e,t,i,a,l,c,d,p,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=_}}const Wf="(default)";class Va{constructor(e,t){this.projectId=e,this.database=t||Wf}static empty(){return new Va("","")}get isDefaultDatabase(){return this.database===Wf}isEqual(e){return e instanceof Va&&e.projectId===this.projectId&&e.database===this.database}}const Qy="__type__",Gw="__max__",Ts={mapValue:{fields:{__type__:{stringValue:Gw}}}},Yy="__vector__",nl="value",Df={nullValue:"NULL_VALUE"};function Ds(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Ky(r)?4:Kw(r)?9007199254740991:Rd(r)?10:11:be(28295,{value:r})}function Wr(r,e){if(r===e)return!0;const t=Ds(r);if(t!==Ds(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return sc(r).isEqual(sc(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Ci(a.timestampValue),d=Ci(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(a,l){return Di(a.bytesValue).isEqual(Di(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(a,l){return pt(a.geoPointValue.latitude)===pt(l.geoPointValue.latitude)&&pt(a.geoPointValue.longitude)===pt(l.geoPointValue.longitude)})(r,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return pt(a.integerValue)===pt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=pt(a.doubleValue),d=pt(l.doubleValue);return c===d?tc(c)===tc(d):isNaN(c)&&isNaN(d)}return!1})(r,e);case 9:return Wo(r.arrayValue.values||[],e.arrayValue.values||[],Wr);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(cS(c)!==cS(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!Wr(c[p],d[p])))return!1;return!0})(r,e);default:return be(52216,{left:r})}}function ac(r,e){return(r.values||[]).find((t=>Wr(t,e)))!==void 0}function Ns(r,e){if(r===e)return 0;const t=Ds(r),i=Ds(e);if(t!==i)return xe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return xe(r.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=pt(l.integerValue||l.doubleValue),p=pt(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(r,e);case 3:return fS(r.timestampValue,e.timestampValue);case 4:return fS(sc(r),sc(e));case 5:return Hg(r.stringValue,e.stringValue);case 6:return(function(l,c){const d=Di(l),p=Di(c);return d.compareTo(p)})(r.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),p=c.split("/");for(let g=0;g<d.length&&g<p.length;g++){const _=xe(d[g],p[g]);if(_!==0)return _}return xe(d.length,p.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=xe(pt(l.latitude),pt(c.latitude));return d!==0?d:xe(pt(l.longitude),pt(c.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return dS(r.arrayValue,e.arrayValue);case 10:return(function(l,c){const d=l.fields||{},p=c.fields||{},g=d[nl]?.arrayValue,_=p[nl]?.arrayValue,T=xe(g?.values?.length||0,_?.values?.length||0);return T!==0?T:dS(g,_)})(r.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Ts.mapValue&&c===Ts.mapValue)return 0;if(l===Ts.mapValue)return 1;if(c===Ts.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),g=c.fields||{},_=Object.keys(g);p.sort(),_.sort();for(let T=0;T<p.length&&T<_.length;++T){const b=Hg(p[T],_[T]);if(b!==0)return b;const V=Ns(d[p[T]],g[_[T]]);if(V!==0)return V}return xe(p.length,_.length)})(r.mapValue,e.mapValue);default:throw be(23264,{he:t})}}function fS(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return xe(r,e);const t=Ci(r),i=Ci(e),a=xe(t.seconds,i.seconds);return a!==0?a:xe(t.nanos,i.nanos)}function dS(r,e){const t=r.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=Ns(t[a],i[a]);if(l)return l}return xe(t.length,i.length)}function rl(r){return Xg(r)}function Xg(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=Ci(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Di(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return ge.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=Xg(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${Xg(t.fields[c])}`;return a+"}"})(r.mapValue):be(61005,{value:r})}function Nf(r){switch(Ds(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Id(r);return e?16+Nf(e):16;case 5:return 2*r.stringValue.length;case 6:return Di(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,l)=>a+Nf(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let a=0;return ks(i.fields,((l,c)=>{a+=l.length+Nf(c)})),a})(r.mapValue);default:throw be(13486,{value:r})}}function oc(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Wg(r){return!!r&&"integerValue"in r}function lc(r){return!!r&&"arrayValue"in r}function mS(r){return!!r&&"nullValue"in r}function pS(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function xf(r){return!!r&&"mapValue"in r}function Rd(r){return(r?.mapValue?.fields||{})[Qy]?.stringValue===Yy}function Hu(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return ks(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Hu(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Hu(r.arrayValue.values[t]);return e}return{...r}}function Kw(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===Gw}const Qw={mapValue:{fields:{[Qy]:{stringValue:Yy},[nl]:{arrayValue:{}}}}};function MV(r){return"nullValue"in r?Df:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?oc(Va.empty(),ge.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?Rd(r)?Qw:{mapValue:{}}:be(35942,{value:r})}function kV(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?oc(Va.empty(),ge.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?Qw:"mapValue"in r?Rd(r)?{mapValue:{}}:Ts:be(61959,{value:r})}function gS(r,e){const t=Ns(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function yS(r,e){const t=Ns(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class un{constructor(e){this.value=e}static empty(){return new un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!xf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hu(t)}setAll(e){let t=_t.emptyPath(),i={},a=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,a),i={},a=[],t=d.popLast()}c?i[d.lastSegment()]=Hu(c):a.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());xf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];xf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){ks(t,((a,l)=>e[a]=l));for(const a of i)delete e[a]}clone(){return new un(Hu(this.value))}}function Yw(r){const e=[];return ks(r.fields,((t,i)=>{const a=new _t([t]);if(xf(i)){const l=Yw(i.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new An(e)}class Tt{constructor(e,t,i,a,l,c,d){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Tt(e,0,Re.min(),Re.min(),Re.min(),un.empty(),0)}static newFoundDocument(e,t,i,a){return new Tt(e,1,t,Re.min(),i,a,0)}static newNoDocument(e,t){return new Tt(e,2,t,Re.min(),Re.min(),un.empty(),0)}static newUnknownDocument(e,t){return new Tt(e,3,t,Re.min(),Re.min(),un.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class il{constructor(e,t){this.position=e,this.inclusive=t}}function _S(r,e,t){let i=0;for(let a=0;a<r.position.length;a++){const l=e[a],c=r.position[a];if(l.field.isKeyField()?i=ge.comparator(ge.fromName(c.referenceValue),t.key):i=Ns(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function vS(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Wr(r.position[t],e.position[t]))return!1;return!0}class uc{constructor(e,t="asc"){this.field=e,this.dir=t}}function LV(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class $w{}class He extends $w{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new UV(e,t,i):t==="array-contains"?new BV(e,i):t==="in"?new tI(e,i):t==="not-in"?new FV(e,i):t==="array-contains-any"?new qV(e,i):new He(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new jV(e,i):new zV(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ns(t,this.value)):t!==null&&Ds(this.value)===Ds(t)&&this.matchesComparison(Ns(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rt extends $w{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new rt(e,t)}matches(e){return sl(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function sl(r){return r.op==="and"}function Jg(r){return r.op==="or"}function $y(r){return Xw(r)&&sl(r)}function Xw(r){for(const e of r.filters)if(e instanceof rt)return!1;return!0}function Zg(r){if(r instanceof He)return r.field.canonicalString()+r.op.toString()+rl(r.value);if($y(r))return r.filters.map((e=>Zg(e))).join(",");{const e=r.filters.map((t=>Zg(t))).join(",");return`${r.op}(${e})`}}function Ww(r,e){return r instanceof He?(function(i,a){return a instanceof He&&i.op===a.op&&i.field.isEqual(a.field)&&Wr(i.value,a.value)})(r,e):r instanceof rt?(function(i,a){return a instanceof rt&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((l,c,d)=>l&&Ww(c,a.filters[d])),!0):!1})(r,e):void be(19439)}function Jw(r,e){const t=r.filters.concat(e);return rt.create(t,r.op)}function Zw(r){return r instanceof He?(function(t){return`${t.field.canonicalString()} ${t.op} ${rl(t.value)}`})(r):r instanceof rt?(function(t){return t.op.toString()+" {"+t.getFilters().map(Zw).join(" ,")+"}"})(r):"Filter"}class UV extends He{constructor(e,t,i){super(e,t,i),this.key=ge.fromName(i.referenceValue)}matches(e){const t=ge.comparator(e.key,this.key);return this.matchesComparison(t)}}class jV extends He{constructor(e,t){super(e,"in",t),this.keys=eI("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class zV extends He{constructor(e,t){super(e,"not-in",t),this.keys=eI("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function eI(r,e){return(e.arrayValue?.values||[]).map((t=>ge.fromName(t.referenceValue)))}class BV extends He{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return lc(t)&&ac(t.arrayValue,this.value)}}class tI extends He{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ac(this.value.arrayValue,t)}}class FV extends He{constructor(e,t){super(e,"not-in",t)}matches(e){if(ac(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ac(this.value.arrayValue,t)}}class qV extends He{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!lc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>ac(this.value.arrayValue,i)))}}class HV{constructor(e,t=null,i=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function ey(r,e=null,t=[],i=[],a=null,l=null,c=null){return new HV(r,e,t,i,a,l,c)}function Pa(r){const e=Oe(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Zg(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),bd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>rl(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>rl(i))).join(",")),e.Te=t}return e.Te}function bc(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!LV(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Ww(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!vS(r.startAt,e.startAt)&&vS(r.endAt,e.endAt)}function Jf(r){return ge.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function Zf(r,e){return r.filters.filter((t=>t instanceof He&&t.field.isEqual(e)))}function ES(r,e,t){let i=Df,a=!0;for(const l of Zf(r,e)){let c=Df,d=!0;switch(l.op){case"<":case"<=":c=MV(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,d=!1;break;case"!=":case"not-in":c=Df}gS({value:i,inclusive:a},{value:c,inclusive:d})<0&&(i=c,a=d)}if(t!==null){for(let l=0;l<r.orderBy.length;++l)if(r.orderBy[l].field.isEqual(e)){const c=t.position[l];gS({value:i,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(i=c,a=t.inclusive);break}}return{value:i,inclusive:a}}function TS(r,e,t){let i=Ts,a=!0;for(const l of Zf(r,e)){let c=Ts,d=!0;switch(l.op){case">=":case">":c=kV(l.value),d=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,d=!1;break;case"!=":case"not-in":c=Ts}yS({value:i,inclusive:a},{value:c,inclusive:d})>0&&(i=c,a=d)}if(t!==null){for(let l=0;l<r.orderBy.length;++l)if(r.orderBy[l].field.isEqual(e)){const c=t.position[l];yS({value:i,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(i=c,a=t.inclusive);break}}return{value:i,inclusive:a}}class gl{constructor(e,t=null,i=[],a=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function GV(r,e,t,i,a,l,c,d){return new gl(r,e,t,i,a,l,c,d)}function Sc(r){return new gl(r)}function bS(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function nI(r){return r.collectionGroup!==null}function Gu(r){const e=Oe(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new it(_t.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new uc(l,i))})),t.has(_t.keyField().canonicalString())||e.Ie.push(new uc(_t.keyField(),i))}return e.Ie}function tr(r){const e=Oe(r);return e.Ee||(e.Ee=KV(e,Gu(r))),e.Ee}function KV(r,e){if(r.limitType==="F")return ey(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new uc(a.field,l)}));const t=r.endAt?new il(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new il(r.startAt.position,r.startAt.inclusive):null;return ey(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function ty(r,e){const t=r.filters.concat([e]);return new gl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function ny(r,e,t){return new gl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Cd(r,e){return bc(tr(r),tr(e))&&r.limitType===e.limitType}function rI(r){return`${Pa(tr(r))}|lt:${r.limitType}`}function zo(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((a=>Zw(a))).join(", ")}]`),bd(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((a=>rl(a))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((a=>rl(a))).join(",")),`Target(${i})`})(tr(r))}; limitType=${r.limitType})`}function Ac(r,e){return e.isFoundDocument()&&(function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):ge.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,a){for(const l of Gu(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0})(r,e)&&(function(i,a){return!(i.startAt&&!(function(c,d,p){const g=_S(c,d,p);return c.inclusive?g<=0:g<0})(i.startAt,Gu(i),a)||i.endAt&&!(function(c,d,p){const g=_S(c,d,p);return c.inclusive?g>=0:g>0})(i.endAt,Gu(i),a))})(r,e)}function QV(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function iI(r){return(e,t)=>{let i=!1;for(const a of Gu(r)){const l=YV(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function YV(r,e,t){const i=r.field.isKeyField()?ge.comparator(e.key,t.key):(function(l,c,d){const p=c.data.field(l),g=d.data.field(l);return p!==null&&g!==null?Ns(p,g):be(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return be(19790,{direction:r.dir})}}class xi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){ks(this.inner,((t,i)=>{for(const[a,l]of i)e(a,l)}))}isEmpty(){return jw(this.inner)}size(){return this.innerSize}}const $V=new yt(ge.comparator);function Mn(){return $V}const sI=new yt(ge.comparator);function Pu(...r){let e=sI;for(const t of r)e=e.insert(t.key,t);return e}function aI(r){let e=sI;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Hr(){return Ku()}function oI(){return Ku()}function Ku(){return new xi((r=>r.toString()),((r,e)=>r.isEqual(e)))}const XV=new yt(ge.comparator),WV=new it(ge.comparator);function Ue(...r){let e=WV;for(const t of r)e=e.add(t);return e}const JV=new it(xe);function ZV(){return JV}function Xy(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tc(e)?"-0":e}}function lI(r){return{integerValue:""+r}}function eP(r,e){return aV(e)?lI(e):Xy(r,e)}class Dd{constructor(){this._=void 0}}function tP(r,e,t){return r instanceof cc?(function(a,l){const c={fields:{[Fw]:{stringValue:Bw},[Hw]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Ky(l)&&(l=Id(l)),l&&(c.fields[qw]=l),{mapValue:c}})(t,e):r instanceof al?cI(r,e):r instanceof ol?hI(r,e):(function(a,l){const c=uI(a,l),d=SS(c)+SS(a.Ae);return Wg(c)&&Wg(a.Ae)?lI(d):Xy(a.serializer,d)})(r,e)}function nP(r,e,t){return r instanceof al?cI(r,e):r instanceof ol?hI(r,e):t}function uI(r,e){return r instanceof hc?(function(i){return Wg(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class cc extends Dd{}class al extends Dd{constructor(e){super(),this.elements=e}}function cI(r,e){const t=fI(e);for(const i of r.elements)t.some((a=>Wr(a,i)))||t.push(i);return{arrayValue:{values:t}}}class ol extends Dd{constructor(e){super(),this.elements=e}}function hI(r,e){let t=fI(e);for(const i of r.elements)t=t.filter((a=>!Wr(a,i)));return{arrayValue:{values:t}}}class hc extends Dd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function SS(r){return pt(r.integerValue||r.doubleValue)}function fI(r){return lc(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class rP{constructor(e,t){this.field=e,this.transform=t}}function iP(r,e){return r.field.isEqual(e.field)&&(function(i,a){return i instanceof al&&a instanceof al||i instanceof ol&&a instanceof ol?Wo(i.elements,a.elements,Wr):i instanceof hc&&a instanceof hc?Wr(i.Ae,a.Ae):i instanceof cc&&a instanceof cc})(r.transform,e.transform)}class sP{constructor(e,t){this.version=e,this.transformResults=t}}class pn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new pn}static exists(e){return new pn(void 0,e)}static updateTime(e){return new pn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Of(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Nd{}function dI(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new xd(r.key,pn.none()):new yl(r.key,r.data,pn.none());{const t=r.data,i=un.empty();let a=new it(_t.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new Oi(r.key,i,new An(a.toArray()),pn.none())}}function aP(r,e,t){r instanceof yl?(function(a,l,c){const d=a.value.clone(),p=wS(a.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(r,e,t):r instanceof Oi?(function(a,l,c){if(!Of(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=wS(a.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(mI(a)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(r,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Qu(r,e,t,i){return r instanceof yl?(function(l,c,d,p){if(!Of(l.precondition,c))return d;const g=l.value.clone(),_=IS(l.fieldTransforms,p,c);return g.setAll(_),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(r,e,t,i):r instanceof Oi?(function(l,c,d,p){if(!Of(l.precondition,c))return d;const g=IS(l.fieldTransforms,p,c),_=c.data;return _.setAll(mI(l)),_.setAll(g),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(r,e,t,i):(function(l,c,d){return Of(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(r,e,t)}function oP(r,e){let t=null;for(const i of r.fieldTransforms){const a=e.data.field(i.field),l=uI(i.transform,a||null);l!=null&&(t===null&&(t=un.empty()),t.set(i.field,l))}return t||null}function AS(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Wo(i,a,((l,c)=>iP(l,c)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class yl extends Nd{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Oi extends Nd{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function mI(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function wS(r,e,t){const i=new Map;we(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let a=0;a<t.length;a++){const l=r[a],c=l.transform,d=e.data.field(l.field);i.set(l.field,nP(c,d,t[a]))}return i}function IS(r,e,t){const i=new Map;for(const a of r){const l=a.transform,c=t.data.field(a.field);i.set(a.field,tP(l,c,e))}return i}class xd extends Nd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class pI extends Nd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Wy{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&aP(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Qu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Qu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=oI();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const p=dI(c,d);p!==null&&i.set(a.key,p),c.isValidDocument()||c.convertToNoDocument(Re.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ue())}isEqual(e){return this.batchId===e.batchId&&Wo(this.mutations,e.mutations,((t,i)=>AS(t,i)))&&Wo(this.baseMutations,e.baseMutations,((t,i)=>AS(t,i)))}}class Jy{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){we(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let a=(function(){return XV})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new Jy(e,t,i,a)}}class Zy{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class lP{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ut,Qe;function uP(r){switch(r){case te.OK:return be(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return be(15467,{code:r})}}function gI(r){if(r===void 0)return mn("GRPC error has no .code"),te.UNKNOWN;switch(r){case Ut.OK:return te.OK;case Ut.CANCELLED:return te.CANCELLED;case Ut.UNKNOWN:return te.UNKNOWN;case Ut.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case Ut.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case Ut.INTERNAL:return te.INTERNAL;case Ut.UNAVAILABLE:return te.UNAVAILABLE;case Ut.UNAUTHENTICATED:return te.UNAUTHENTICATED;case Ut.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case Ut.NOT_FOUND:return te.NOT_FOUND;case Ut.ALREADY_EXISTS:return te.ALREADY_EXISTS;case Ut.PERMISSION_DENIED:return te.PERMISSION_DENIED;case Ut.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case Ut.ABORTED:return te.ABORTED;case Ut.OUT_OF_RANGE:return te.OUT_OF_RANGE;case Ut.UNIMPLEMENTED:return te.UNIMPLEMENTED;case Ut.DATA_LOSS:return te.DATA_LOSS;default:return be(39323,{code:r})}}(Qe=Ut||(Ut={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";function cP(){return new TextEncoder}const hP=new ws([4294967295,4294967295],0);function RS(r){const e=cP().encode(r),t=new mw;return t.update(e),new Uint8Array(t.digest())}function CS(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ws([t,i],0),new ws([a,l],0)]}class e_{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Mu(`Invalid padding: ${t}`);if(i<0)throw new Mu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Mu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Mu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ws.fromNumber(this.ge)}ye(e,t,i){let a=e.add(t.multiply(ws.fromNumber(i)));return a.compare(hP)===1&&(a=new ws([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=RS(e),[i,a]=CS(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);if(!this.we(c))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new e_(l,a,t);return i.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=RS(e),[i,a]=CS(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Mu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Od{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,wc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Od(Re.min(),a,new yt(xe),Mn(),Ue())}}class wc{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new wc(i,t,Ue(),Ue(),Ue())}}class Vf{constructor(e,t,i,a){this.be=e,this.removedTargetIds=t,this.key=i,this.De=a}}class yI{constructor(e,t){this.targetId=e,this.Ce=t}}class _I{constructor(e,t,i=Bt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class DS{constructor(){this.ve=0,this.Fe=NS(),this.Me=Bt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ue(),t=Ue(),i=Ue();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:be(38017,{changeType:l})}})),new wc(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=NS()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,we(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class fP{constructor(e){this.Ge=e,this.ze=new Map,this.je=Mn(),this.Je=ff(),this.He=ff(),this.Ye=new yt(xe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:be(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,i=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Jf(l))if(i===0){const c=new ge(l.path);this.et(t,c,Tt.newNoDocument(c,Re.min()))}else we(i===1,20013,{expectedCount:i});else{const c=this._t(t);if(c!==i){const d=this.ut(e),p=d?this.ct(d,e,c):1;if(p!==0){this.it(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=Di(i).toUint8Array()}catch(p){if(p instanceof zw)return Oa("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new e_(c,a,l)}catch(p){return Oa(p instanceof Mu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let a=0;return i.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&Jf(d.target)){const p=new ge(d.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,Tt.newNoDocument(p,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let i=Ue();this.He.forEach(((l,c)=>{let d=!0;c.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new Od(e,t,this.Ye,this.je,i);return this.je=Mn(),this.Je=ff(),this.He=ff(),this.Ye=new yt(xe),a}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new DS,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new it(xe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new it(xe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ce("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new DS),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function ff(){return new yt(ge.comparator)}function NS(){return new yt(ge.comparator)}const dP={asc:"ASCENDING",desc:"DESCENDING"},mP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pP={and:"AND",or:"OR"};class gP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ry(r,e){return r.useProto3Json||bd(e)?e:{value:e}}function ll(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vI(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function yP(r,e){return ll(r,e.toTimestamp())}function gn(r){return we(!!r,49232),Re.fromTimestamp((function(t){const i=Ci(t);return new nt(i.seconds,i.nanos)})(r))}function t_(r,e){return iy(r,e).canonicalString()}function iy(r,e){const t=(function(a){return new Je(["projects",a.projectId,"databases",a.database])})(r).child("documents");return e===void 0?t:t.child(e)}function EI(r){const e=Je.fromString(r);return we(DI(e),10190,{key:e.toString()}),e}function ed(r,e){return t_(r.databaseId,e.path)}function wa(r,e){const t=EI(e);if(t.get(1)!==r.databaseId.projectId)throw new de(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new de(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ge(SI(t))}function TI(r,e){return t_(r.databaseId,e)}function bI(r){const e=EI(r);return e.length===4?Je.emptyPath():SI(e)}function sy(r){return new Je(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function SI(r){return we(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function xS(r,e,t){return{name:ed(r,e),fields:t.value.mapValue.fields}}function _P(r,e,t){const i=wa(r,e.name),a=gn(e.updateTime),l=e.createTime?gn(e.createTime):Re.min(),c=new un({mapValue:{fields:e.fields}}),d=Tt.newFoundDocument(i,a,l,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function vP(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:be(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,_){return g.useProto3Json?(we(_===void 0||typeof _=="string",58123),Bt.fromBase64String(_||"")):(we(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Bt.fromUint8Array(_||new Uint8Array))})(r,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(g){const _=g.code===void 0?te.UNKNOWN:gI(g.code);return new de(_,g.message||"")})(c);t=new _I(i,a,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=wa(r,i.document.name),l=gn(i.document.updateTime),c=i.document.createTime?gn(i.document.createTime):Re.min(),d=new un({mapValue:{fields:i.document.fields}}),p=Tt.newFoundDocument(a,l,c,d),g=i.targetIds||[],_=i.removedTargetIds||[];t=new Vf(g,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=wa(r,i.document),l=i.readTime?gn(i.readTime):Re.min(),c=Tt.newNoDocument(a,l),d=i.removedTargetIds||[];t=new Vf([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=wa(r,i.document),l=i.removedTargetIds||[];t=new Vf([],l,a,null)}else{if(!("filter"in e))return be(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new lP(a,l),d=i.targetId;t=new yI(d,c)}}return t}function td(r,e){let t;if(e instanceof yl)t={update:xS(r,e.key,e.value)};else if(e instanceof xd)t={delete:ed(r,e.key)};else if(e instanceof Oi)t={update:xS(r,e.key,e.data),updateMask:wP(e.fieldMask)};else{if(!(e instanceof pI))return be(16599,{Vt:e.type});t={verify:ed(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,c){const d=c.transform;if(d instanceof cc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof al)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof ol)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof hc)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw be(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:yP(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:be(27497)})(r,e.precondition)),t}function ay(r,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?pn.updateTime(gn(l.updateTime)):l.exists!==void 0?pn.exists(l.exists):pn.none()})(e.currentDocument):pn.none(),i=e.updateTransforms?e.updateTransforms.map((a=>(function(c,d){let p=null;if("setToServerValue"in d)we(d.setToServerValue==="REQUEST_TIME",16630,{proto:d}),p=new cc;else if("appendMissingElements"in d){const _=d.appendMissingElements.values||[];p=new al(_)}else if("removeAllFromArray"in d){const _=d.removeAllFromArray.values||[];p=new ol(_)}else"increment"in d?p=new hc(c,d.increment):be(16584,{proto:d});const g=_t.fromServerFormat(d.fieldPath);return new rP(g,p)})(r,a))):[];if(e.update){e.update.name;const a=wa(r,e.update.name),l=new un({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(p){const g=p.fieldPaths||[];return new An(g.map((_=>_t.fromServerFormat(_))))})(e.updateMask);return new Oi(a,l,c,t,i)}return new yl(a,l,t,i)}if(e.delete){const a=wa(r,e.delete);return new xd(a,t)}if(e.verify){const a=wa(r,e.verify);return new pI(a,t)}return be(1463,{proto:e})}function EP(r,e){return r&&r.length>0?(we(e!==void 0,14353),r.map((t=>(function(a,l){let c=a.updateTime?gn(a.updateTime):gn(l);return c.isEqual(Re.min())&&(c=gn(l)),new sP(c,a.transformResults||[])})(t,e)))):[]}function AI(r,e){return{documents:[TI(r,e.path)]}}function wI(r,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=TI(r,a);const l=(function(g){if(g.length!==0)return CI(rt.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((_=>(function(b){return{field:Bo(b.field),direction:bP(b.dir)}})(_)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=ry(r,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:a}}function II(r){let e=bI(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){we(i===1,65062);const _=t.from[0];_.allDescendants?a=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(T){const b=RI(T);return b instanceof rt&&$y(b)?b.getFilters():[b]})(t.where));let c=[];t.orderBy&&(c=(function(T){return T.map((b=>(function(B){return new uc(Fo(B.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(B.direction))})(b)))})(t.orderBy));let d=null;t.limit&&(d=(function(T){let b;return b=typeof T=="object"?T.value:T,bd(b)?null:b})(t.limit));let p=null;t.startAt&&(p=(function(T){const b=!!T.before,V=T.values||[];return new il(V,b)})(t.startAt));let g=null;return t.endAt&&(g=(function(T){const b=!T.before,V=T.values||[];return new il(V,b)})(t.endAt)),GV(e,a,c,l,d,"F",p,g)}function TP(r,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function RI(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Fo(t.unaryFilter.field);return He.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=Fo(t.unaryFilter.field);return He.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Fo(t.unaryFilter.field);return He.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Fo(t.unaryFilter.field);return He.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return be(61313);default:return be(60726)}})(r):r.fieldFilter!==void 0?(function(t){return He.create(Fo(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return be(58110);default:return be(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return rt.create(t.compositeFilter.filters.map((i=>RI(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return be(1026)}})(t.compositeFilter.op))})(r):be(30097,{filter:r})}function bP(r){return dP[r]}function SP(r){return mP[r]}function AP(r){return pP[r]}function Bo(r){return{fieldPath:r.canonicalString()}}function Fo(r){return _t.fromServerFormat(r.fieldPath)}function CI(r){return r instanceof He?(function(t){if(t.op==="=="){if(pS(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NAN"}};if(mS(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(pS(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NOT_NAN"}};if(mS(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bo(t.field),op:SP(t.op),value:t.value}}})(r):r instanceof rt?(function(t){const i=t.getFilters().map((a=>CI(a)));return i.length===1?i[0]:{compositeFilter:{op:AP(t.op),filters:i}}})(r):be(54877,{filter:r})}function wP(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function DI(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class Si{constructor(e,t,i,a,l=Re.min(),c=Re.min(),d=Bt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new Si(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Si(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Si(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Si(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class NI{constructor(e){this.yt=e}}function IP(r,e){let t;if(e.document)t=_P(r.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=ge.fromSegments(e.noDocument.path),a=ka(e.noDocument.readTime);t=Tt.newNoDocument(i,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return be(56709);{const i=ge.fromSegments(e.unknownDocument.path),a=ka(e.unknownDocument.version);t=Tt.newUnknownDocument(i,a)}}return e.readTime&&t.setReadTime((function(a){const l=new nt(a[0],a[1]);return Re.fromTimestamp(l)})(e.readTime)),t}function OS(r,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:nd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=(function(l,c){return{name:ed(l,c.key),fields:c.data.value.mapValue.fields,updateTime:ll(l,c.version.toTimestamp()),createTime:ll(l,c.createTime.toTimestamp())}})(r.yt,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:Ma(e.version)};else{if(!e.isUnknownDocument())return be(57904,{document:e});i.unknownDocument={path:t.path.toArray(),version:Ma(e.version)}}return i}function nd(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Ma(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ka(r){const e=new nt(r.seconds,r.nanoseconds);return Re.fromTimestamp(e)}function va(r,e){const t=(e.baseMutations||[]).map((l=>ay(r.yt,l)));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const d=e.mutations[l+1];c.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const i=e.mutations.map((l=>ay(r.yt,l))),a=nt.fromMillis(e.localWriteTimeMs);return new Wy(e.batchId,a,t,i)}function ku(r){const e=ka(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?ka(r.lastLimboFreeSnapshotVersion):Re.min();let i;return i=(function(l){return l.documents!==void 0})(r.query)?(function(l){const c=l.documents.length;return we(c===1,1966,{count:c}),tr(Sc(bI(l.documents[0])))})(r.query):(function(l){return tr(II(l))})(r.query),new Si(i,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,Bt.fromBase64String(r.resumeToken))}function xI(r,e){const t=Ma(e.snapshotVersion),i=Ma(e.lastLimboFreeSnapshotVersion);let a;a=Jf(e.target)?AI(r.yt,e.target):wI(r.yt,e.target).ft;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Pa(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:a}}function OI(r){const e=II({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?ny(e,e.limit,"L"):e}function ig(r,e){return new Zy(e.largestBatchId,ay(r.yt,e.overlayMutation))}function VS(r,e){const t=e.path.lastSegment();return[r,cn(e.path.popLast()),t]}function PS(r,e,t,i){return{indexId:r,uid:e,sequenceNumber:t,readTime:Ma(i.readTime),documentKey:cn(i.documentKey.path),largestBatchId:i.largestBatchId}}class RP{getBundleMetadata(e,t){return MS(e).get(t).next((i=>{if(i)return(function(l){return{id:l.bundleId,createTime:ka(l.createTime),version:l.version}})(i)}))}saveBundleMetadata(e,t){return MS(e).put((function(a){return{bundleId:a.id,createTime:Ma(gn(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return kS(e).get(t).next((i=>{if(i)return(function(l){return{name:l.name,query:OI(l.bundledQuery),readTime:ka(l.readTime)}})(i)}))}saveNamedQuery(e,t){return kS(e).put((function(a){return{name:a.name,readTime:Ma(gn(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function MS(r){return Kt(r,Sd)}function kS(r){return Kt(r,Ad)}class Vd{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const i=t.uid||"";return new Vd(e,i)}getOverlay(e,t){return Au(e).get(VS(this.userId,t)).next((i=>i?ig(this.serializer,i):null))}getOverlays(e,t){const i=Hr();return F.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){const a=[];return i.forEach(((l,c)=>{const d=new Zy(t,c);a.push(this.St(e,d))})),F.waitFor(a)}removeOverlaysForBatchId(e,t,i){const a=new Set;t.forEach((c=>a.add(cn(c.getCollectionPath()))));const l=[];return a.forEach((c=>{const d=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);l.push(Au(e).Z(Yg,d))})),F.waitFor(l)}getOverlaysForCollection(e,t,i){const a=Hr(),l=cn(t),c=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Au(e).J(Yg,c).next((d=>{for(const p of d){const g=ig(this.serializer,p);a.set(g.getKey(),g)}return a}))}getOverlaysForCollectionGroup(e,t,i,a){const l=Hr();let c;const d=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Au(e).ee({index:Pw,range:d},((p,g,_)=>{const T=ig(this.serializer,g);l.size()<a||T.largestBatchId===c?(l.set(T.getKey(),T),c=T.largestBatchId):_.done()})).next((()=>l))}St(e,t){return Au(e).put((function(a,l,c){const[d,p,g]=VS(l,c.mutation.key);return{userId:l,collectionPath:p,documentId:g,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:td(a.yt,c.mutation)}})(this.serializer,this.userId,t))}}function Au(r){return Kt(r,wd)}class CP{bt(e){return Kt(e,Hy)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const i=t?.value;return i?Bt.fromUint8Array(i):Bt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class Ea{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(pt(e.integerValue));else if("doubleValue"in e){const i=pt(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),tc(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),typeof i=="string"&&(i=Ci(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Di(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?Kw(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Rd(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):be(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const i=e.fields||{};this.Ft(t,55);for(const a of Object.keys(i))this.Ot(a,t),this.Ct(i[a],t)}kt(e,t){const i=e.fields||{};this.Ft(t,53);const a=nl,l=i[a].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(pt(l)),this.Ot(a,t),this.Ct(i[a],t)}Qt(e,t){const i=e.values||[];this.Ft(t,50);for(const a of i)this.Ct(a,t)}Lt(e,t){this.Ft(t,37),ge.fromName(e).path.forEach((i=>{this.Ft(t,60),this.Ut(i,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Ea.Kt=new Ea;const Mo=255;function DP(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function LS(r){const e=64-(function(i){let a=0;for(let l=0;l<8;++l){const c=DP(255&i[l]);if(a+=c,c!==8)break}return a})(r);return Math.ceil(e/8)}class NP{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Gt(i.value),i=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Jt(i.value),i=t.next();this.Ht()}Yt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const a=t.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Zt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Jt(i);else if(i<2048)this.Jt(960|i>>>6),this.Jt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i);else{const a=t.codePointAt(0);this.Jt(240|a>>>18),this.Jt(128|63&a>>>12),this.Jt(128|63&a>>>6),this.Jt(128|63&a)}}this.Ht()}Xt(e){const t=this.en(e),i=LS(t);this.tn(1+i),this.buffer[this.position++]=255&i;for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=255&t[a]}nn(e){const t=this.en(e),i=LS(t);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}rn(){this.sn(Mo),this.sn(255)}_n(){this.an(Mo),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)})(e),i=!!(128&t[0]);t[0]^=i?255:128;for(let a=1;a<t.length;++a)t[a]^=i?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Mo?(this.sn(Mo),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Mo?(this.an(Mo),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const a=new Uint8Array(i);a.set(this.buffer),this.buffer=a}}class xP{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class OP{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class wu{constructor(){this.cn=new NP,this.ln=new xP(this.cn),this.hn=new OP(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class Ta{constructor(e,t,i,a){this.Tn=e,this.In=t,this.En=i,this.dn=a}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.dn,0),t!==e?i.set([0],this.dn.length):++i[i.length-1],new Ta(this.Tn,this.In,this.En,i)}Rn(e,t,i){return{indexId:this.Tn,uid:e,arrayValue:Pf(this.En),directionalValue:Pf(this.dn),orderedDocumentKey:Pf(t),documentKey:i.path.toArray()}}Vn(e,t,i){const a=this.Rn(e,t,i);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function ds(r,e){let t=r.Tn-e.Tn;return t!==0?t:(t=US(r.En,e.En),t!==0?t:(t=US(r.dn,e.dn),t!==0?t:ge.comparator(r.In,e.In)))}function US(r,e){for(let t=0;t<r.length&&t<e.length;++t){const i=r[t]-e[t];if(i!==0)return i}return r.length-e.length}function Pf(r){return CA()?(function(t){let i="";for(let a=0;a<t.length;a++)i+=String.fromCharCode(t[a]);return i})(r):r}function jS(r){return typeof r!="string"?r:(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(r)}class zS{constructor(e){this.mn=new it(((t,i)=>_t.comparator(t.field,i.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const i=t;i.isInequality()?this.mn=this.mn.add(i):this.gn.push(i)}}get pn(){return this.mn.size>1}yn(e){if(we(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=Gg(e);if(t!==void 0&&!this.wn(t))return!1;const i=ga(e);let a=new Set,l=0,c=0;for(;l<i.length&&this.wn(i[l]);++l)a=a.add(i[l].fieldPath.canonicalString());if(l===i.length)return!0;if(this.mn.size>0){const d=this.mn.getIterator().getNext();if(!a.has(d.field.canonicalString())){const p=i[l];if(!this.Sn(d,p)||!this.bn(this.fn[c++],p))return!1}++l}for(;l<i.length;++l){const d=i[l];if(c>=this.fn.length||!this.bn(this.fn[c++],d))return!1}return!0}Dn(){if(this.pn)return null;let e=new it(_t.comparator);const t=[];for(const i of this.gn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new If(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new If(i.field,0))}for(const i of this.fn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new If(i.field,i.dir==="asc"?0:1)));return new Qf(Qf.UNKNOWN_ID,this.collectionId,t,ec.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function VI(r){if(we(r instanceof He||r instanceof rt,20012),r instanceof He){if(r instanceof tI){const t=r.value.arrayValue?.values?.map((i=>He.create(r.field,"==",i)))||[];return rt.create(t,"or")}return r}const e=r.filters.map((t=>VI(t)));return rt.create(e,r.op)}function VP(r){if(r.getFilters().length===0)return[];const e=uy(VI(r));return we(PI(e),7391),oy(e)||ly(e)?[e]:e.getFilters()}function oy(r){return r instanceof He}function ly(r){return r instanceof rt&&$y(r)}function PI(r){return oy(r)||ly(r)||(function(t){if(t instanceof rt&&Jg(t)){for(const i of t.getFilters())if(!oy(i)&&!ly(i))return!1;return!0}return!1})(r)}function uy(r){if(we(r instanceof He||r instanceof rt,34018),r instanceof He)return r;if(r.filters.length===1)return uy(r.filters[0]);const e=r.filters.map((i=>uy(i)));let t=rt.create(e,r.op);return t=rd(t),PI(t)?t:(we(t instanceof rt,64498),we(sl(t),40251),we(t.filters.length>1,57927),t.filters.reduce(((i,a)=>n_(i,a))))}function n_(r,e){let t;return we(r instanceof He||r instanceof rt,38388),we(e instanceof He||e instanceof rt,25473),t=r instanceof He?e instanceof He?(function(a,l){return rt.create([a,l],"and")})(r,e):BS(r,e):e instanceof He?BS(e,r):(function(a,l){if(we(a.filters.length>0&&l.filters.length>0,48005),sl(a)&&sl(l))return Jw(a,l.getFilters());const c=Jg(a)?a:l,d=Jg(a)?l:a,p=c.filters.map((g=>n_(g,d)));return rt.create(p,"or")})(r,e),rd(t)}function BS(r,e){if(sl(e))return Jw(e,r.getFilters());{const t=e.filters.map((i=>n_(r,i)));return rt.create(t,"or")}}function rd(r){if(we(r instanceof He||r instanceof rt,11850),r instanceof He)return r;const e=r.getFilters();if(e.length===1)return rd(e[0]);if(Xw(r))return r;const t=e.map((a=>rd(a))),i=[];return t.forEach((a=>{a instanceof He?i.push(a):a instanceof rt&&(a.op===r.op?i.push(...a.filters):i.push(a))})),i.length===1?i[0]:rt.create(i,r.op)}class PP{constructor(){this.Cn=new r_}addToCollectionParentIndex(e,t){return this.Cn.add(t),F.resolve()}getCollectionParents(e,t){return F.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return F.resolve()}deleteFieldIndex(e,t){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,t){return F.resolve()}getDocumentsMatchingTarget(e,t){return F.resolve(null)}getIndexType(e,t){return F.resolve(0)}getFieldIndexes(e,t){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,t){return F.resolve(Ln.min())}getMinOffsetFromCollectionGroup(e,t){return F.resolve(Ln.min())}updateCollectionGroup(e,t,i){return F.resolve()}updateIndexEntries(e,t){return F.resolve()}}class r_{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new it(Je.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new it(Je.comparator)).toArray()}}const FS="IndexedDbIndexManager",df=new Uint8Array(0);class MP{constructor(e,t){this.databaseId=t,this.vn=new r_,this.Fn=new xi((i=>Pa(i)),((i,a)=>bc(i,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const i=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const l={collectionId:i,parent:cn(a)};return qS(e).put(l)}return F.resolve()}getCollectionParents(e,t){const i=[],a=IDBKeyRange.bound([t,""],[bw(t),""],!1,!0);return qS(e).J(a).next((l=>{for(const c of l){if(c.collectionId!==t)break;i.push(qr(c.parent))}return i}))}addFieldIndex(e,t){const i=Iu(e),a=(function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map((p=>[p.fieldPath.canonicalString(),p.kind]))}})(t);delete a.indexId;const l=i.add(a);if(t.indexState){const c=Lo(e);return l.next((d=>{c.put(PS(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const i=Iu(e),a=Lo(e),l=ko(e);return i.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Iu(e),i=ko(e),a=Lo(e);return t.Z().next((()=>i.Z())).next((()=>a.Z()))}createTargetIndexes(e,t){return F.forEach(this.Mn(t),(i=>this.getIndexType(e,i).next((a=>{if(a===0||a===1){const l=new zS(i).Dn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const i=ko(e);let a=!0;const l=new Map;return F.forEach(this.Mn(t),(c=>this.xn(e,c).next((d=>{a&&(a=!!d),l.set(c,d)})))).next((()=>{if(a){let c=Ue();const d=[];return F.forEach(l,((p,g)=>{ce(FS,`Using index ${(function(X){return`id=${X.indexId}|cg=${X.collectionGroup}|f=${X.fields.map((ue=>`${ue.fieldPath}:${ue.kind}`)).join(",")}`})(p)} to execute ${Pa(t)}`);const _=(function(X,ue){const he=Gg(ue);if(he===void 0)return null;for(const oe of Zf(X,he.fieldPath))switch(oe.op){case"array-contains-any":return oe.value.arrayValue.values||[];case"array-contains":return[oe.value]}return null})(g,p),T=(function(X,ue){const he=new Map;for(const oe of ga(ue))for(const C of Zf(X,oe.fieldPath))switch(C.op){case"==":case"in":he.set(oe.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return he.set(oe.fieldPath.canonicalString(),C.value),Array.from(he.values())}return null})(g,p),b=(function(X,ue){const he=[];let oe=!0;for(const C of ga(ue)){const w=C.kind===0?ES(X,C.fieldPath,X.startAt):TS(X,C.fieldPath,X.startAt);he.push(w.value),oe&&(oe=w.inclusive)}return new il(he,oe)})(g,p),V=(function(X,ue){const he=[];let oe=!0;for(const C of ga(ue)){const w=C.kind===0?TS(X,C.fieldPath,X.endAt):ES(X,C.fieldPath,X.endAt);he.push(w.value),oe&&(oe=w.inclusive)}return new il(he,oe)})(g,p),B=this.On(p,g,b),L=this.On(p,g,V),k=this.Nn(p,g,T),ie=this.Bn(p.indexId,_,B,b.inclusive,L,V.inclusive,k);return F.forEach(ie,(K=>i.Y(K,t.limit).next((X=>{X.forEach((ue=>{const he=ge.fromSegments(ue.documentKey);c.has(he)||(c=c.add(he),d.push(he))}))}))))})).next((()=>d))}return F.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=VP(rt.create(e.filters,"and")).map((i=>ey(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,i,a,l,c,d){const p=(t!=null?t.length:1)*Math.max(i.length,l.length),g=p/(t!=null?t.length:1),_=[];for(let T=0;T<p;++T){const b=t?this.Ln(t[T/g]):df,V=this.kn(e,b,i[T%g],a),B=this.qn(e,b,l[T%g],c),L=d.map((k=>this.kn(e,b,k,!0)));_.push(...this.createRange(V,B,L))}return _}kn(e,t,i,a){const l=new Ta(e,ge.empty(),t,i);return a?l:l.An()}qn(e,t,i,a){const l=new Ta(e,ge.empty(),t,i);return a?l.An():l}xn(e,t){const i=new zS(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((l=>{let c=null;for(const d of l)i.yn(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c}))}getIndexType(e,t){let i=2;const a=this.Mn(t);return F.forEach(a,(l=>this.xn(e,l).next((c=>{c?i!==0&&c.fields.length<(function(p){let g=new it(_t.comparator),_=!1;for(const T of p.filters)for(const b of T.getFlattenedFilters())b.field.isKeyField()||(b.op==="array-contains"||b.op==="array-contains-any"?_=!0:g=g.add(b.field));for(const T of p.orderBy)T.field.isKeyField()||(g=g.add(T.field));return g.size+(_?1:0)})(l)&&(i=1):i=0})))).next((()=>(function(c){return c.limit!==null})(t)&&a.length>1&&i===2?1:i))}Qn(e,t){const i=new wu;for(const a of ga(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const c=i.Pn(a.kind);Ea.Kt.Dt(l,c)}return i.un()}Ln(e){const t=new wu;return Ea.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const i=new wu;return Ea.Kt.Dt(oc(this.databaseId,t),i.Pn((function(l){const c=ga(l);return c.length===0?0:c[c.length-1].kind})(e))),i.un()}Nn(e,t,i){if(i===null)return[];let a=[];a.push(new wu);let l=0;for(const c of ga(e)){const d=i[l++];for(const p of a)if(this.Un(t,c.fieldPath)&&lc(d))a=this.Kn(a,c,d);else{const g=p.Pn(c.kind);Ea.Kt.Dt(d,g)}}return this.Wn(a)}On(e,t,i){return this.Nn(e,t,i.position)}Wn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].un();return t}Kn(e,t,i){const a=[...e],l=[];for(const c of i.arrayValue.values||[])for(const d of a){const p=new wu;p.seed(d.un()),Ea.Kt.Dt(c,p.Pn(t.kind)),l.push(p)}return l}Un(e,t){return!!e.filters.find((i=>i instanceof He&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(e,t){const i=Iu(e),a=Lo(e);return(t?i.J(Qg,IDBKeyRange.bound(t,t)):i.J()).next((l=>{const c=[];return F.forEach(l,(d=>a.get([d.indexId,this.uid]).next((p=>{c.push((function(_,T){const b=T?new ec(T.sequenceNumber,new Ln(ka(T.readTime),new ge(qr(T.documentKey)),T.largestBatchId)):ec.empty(),V=_.fields.map((([B,L])=>new If(_t.fromServerFormat(B),L)));return new Qf(_.indexId,_.collectionGroup,V,b)})(d,p))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((i,a)=>{const l=i.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:xe(i.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,i){const a=Iu(e),l=Lo(e);return this.Gn(e).next((c=>a.J(Qg,IDBKeyRange.bound(t,t)).next((d=>F.forEach(d,(p=>l.put(PS(p.indexId,this.uid,c,i))))))))}updateIndexEntries(e,t){const i=new Map;return F.forEach(t,((a,l)=>{const c=i.get(a.collectionGroup);return(c?F.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next((d=>(i.set(a.collectionGroup,d),F.forEach(d,(p=>this.zn(e,a,p).next((g=>{const _=this.jn(l,p);return g.isEqual(_)?F.resolve():this.Jn(e,l,p,g,_)})))))))}))}Hn(e,t,i,a){return ko(e).put(a.Rn(this.uid,this.$n(i,t.key),t.key))}Yn(e,t,i,a){return ko(e).delete(a.Vn(this.uid,this.$n(i,t.key),t.key))}zn(e,t,i){const a=ko(e);let l=new it(ds);return a.ee({index:Vw,range:IDBKeyRange.only([i.indexId,this.uid,Pf(this.$n(i,t))])},((c,d)=>{l=l.add(new Ta(i.indexId,t,jS(d.arrayValue),jS(d.directionalValue)))})).next((()=>l))}jn(e,t){let i=new it(ds);const a=this.Qn(t,e);if(a==null)return i;const l=Gg(t);if(l!=null){const c=e.data.field(l.fieldPath);if(lc(c))for(const d of c.arrayValue.values||[])i=i.add(new Ta(t.indexId,e.key,this.Ln(d),a))}else i=i.add(new Ta(t.indexId,e.key,df,a));return i}Jn(e,t,i,a,l){ce(FS,"Updating index entries for document '%s'",t.key);const c=[];return(function(p,g,_,T,b){const V=p.getIterator(),B=g.getIterator();let L=Po(V),k=Po(B);for(;L||k;){let ie=!1,K=!1;if(L&&k){const X=_(L,k);X<0?K=!0:X>0&&(ie=!0)}else L!=null?K=!0:ie=!0;ie?(T(k),k=Po(B)):K?(b(L),L=Po(V)):(L=Po(V),k=Po(B))}})(a,l,ds,(d=>{c.push(this.Hn(e,t,i,d))}),(d=>{c.push(this.Yn(e,t,i,d))})),F.waitFor(c)}Gn(e){let t=1;return Lo(e).ee({index:Ow,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,a,l)=>{l.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,i){i=i.sort(((c,d)=>ds(c,d))).filter(((c,d,p)=>!d||ds(c,p[d-1])!==0));const a=[];a.push(e);for(const c of i){const d=ds(c,e),p=ds(c,t);if(d===0)a[0]=e.An();else if(d>0&&p<0)a.push(c),a.push(c.An());else if(p>0)break}a.push(t);const l=[];for(let c=0;c<a.length;c+=2){if(this.Zn(a[c],a[c+1]))return[];const d=a[c].Vn(this.uid,df,ge.empty()),p=a[c+1].Vn(this.uid,df,ge.empty());l.push(IDBKeyRange.bound(d,p))}return l}Zn(e,t){return ds(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(HS)}getMinOffset(e,t){return F.mapArray(this.Mn(t),(i=>this.xn(e,i).next((a=>a||be(44426))))).next(HS)}}function qS(r){return Kt(r,ic)}function ko(r){return Kt(r,qu)}function Iu(r){return Kt(r,qy)}function Lo(r){return Kt(r,Fu)}function HS(r){we(r.length!==0,28825);let e=r[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<r.length;i++){const a=r[i].indexState.offset;zy(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Ln(e.readTime,e.documentKey,t)}const GS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},MI=41943040;class ln{static withCacheSize(e){return new ln(e,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}function kI(r,e,t){const i=r.store(gr),a=r.store(Jo),l=[],c=IDBKeyRange.only(t.batchId);let d=0;const p=i.ee({range:c},((_,T,b)=>(d++,b.delete())));l.push(p.next((()=>{we(d===1,47070,{batchId:t.batchId})})));const g=[];for(const _ of t.mutations){const T=Dw(e,_.key.path,t.batchId);l.push(a.delete(T)),g.push(_.key)}return F.waitFor(l).next((()=>g))}function id(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw be(14731);e=r.noDocument}return JSON.stringify(e).length}ln.DEFAULT_COLLECTION_PERCENTILE=10,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ln.DEFAULT=new ln(MI,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ln.DISABLED=new ln(-1,0,0);class Pd{constructor(e,t,i,a){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=a,this.Xn={}}static wt(e,t,i,a){we(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new Pd(l,t,i,a)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ms(e).ee({index:ba,range:i},((a,l,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,i,a){const l=qo(e),c=ms(e);return c.add({}).next((d=>{we(typeof d=="number",49019);const p=new Wy(d,t,i,a),g=(function(V,B,L){const k=L.baseMutations.map((K=>td(V.yt,K))),ie=L.mutations.map((K=>td(V.yt,K)));return{userId:B,batchId:L.batchId,localWriteTimeMs:L.localWriteTime.toMillis(),baseMutations:k,mutations:ie}})(this.serializer,this.userId,p),_=[];let T=new it(((b,V)=>xe(b.canonicalString(),V.canonicalString())));for(const b of a){const V=Dw(this.userId,b.key.path,d);T=T.add(b.key.path.popLast()),_.push(c.put(g)),_.push(l.put(V,uV))}return T.forEach((b=>{_.push(this.indexManager.addToCollectionParentIndex(e,b))})),e.addOnCommittedListener((()=>{this.Xn[d]=p.keys()})),F.waitFor(_).next((()=>p))}))}lookupMutationBatch(e,t){return ms(e).get(t).next((i=>i?(we(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:t}),va(this.serializer,i)):null))}er(e,t){return this.Xn[t]?F.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((i=>{if(i){const a=i.keys();return this.Xn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=IDBKeyRange.lowerBound([this.userId,i]);let l=null;return ms(e).ee({index:ba,range:a},((c,d,p)=>{d.userId===this.userId&&(we(d.batchId>=i,47524,{tr:i}),l=va(this.serializer,d)),p.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=Sa;return ms(e).ee({index:ba,range:t,reverse:!0},((a,l,c)=>{i=l.batchId,c.done()})).next((()=>i))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Sa],[this.userId,Number.POSITIVE_INFINITY]);return ms(e).J(ba,t).next((i=>i.map((a=>va(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=Rf(this.userId,t.path),a=IDBKeyRange.lowerBound(i),l=[];return qo(e).ee({range:a},((c,d,p)=>{const[g,_,T]=c,b=qr(_);if(g===this.userId&&t.path.isEqual(b))return ms(e).get(T).next((V=>{if(!V)throw be(61480,{nr:c,batchId:T});we(V.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:V.userId,batchId:T}),l.push(va(this.serializer,V))}));p.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new it(xe);const a=[];return t.forEach((l=>{const c=Rf(this.userId,l.path),d=IDBKeyRange.lowerBound(c),p=qo(e).ee({range:d},((g,_,T)=>{const[b,V,B]=g,L=qr(V);b===this.userId&&l.path.isEqual(L)?i=i.add(B):T.done()}));a.push(p)})),F.waitFor(a).next((()=>this.rr(e,i)))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1,l=Rf(this.userId,i),c=IDBKeyRange.lowerBound(l);let d=new it(xe);return qo(e).ee({range:c},((p,g,_)=>{const[T,b,V]=p,B=qr(b);T===this.userId&&i.isPrefixOf(B)?B.length===a&&(d=d.add(V)):_.done()})).next((()=>this.rr(e,d)))}rr(e,t){const i=[],a=[];return t.forEach((l=>{a.push(ms(e).get(l).next((c=>{if(c===null)throw be(35274,{batchId:l});we(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:l}),i.push(va(this.serializer,c))})))})),F.waitFor(a).next((()=>i))}removeMutationBatch(e,t){return kI(e.le,this.userId,t).next((i=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),F.forEach(i,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return F.resolve();const i=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),a=[];return qo(e).ee({range:i},((l,c,d)=>{if(l[0]===this.userId){const p=qr(l[1]);a.push(p)}else d.done()})).next((()=>{we(a.length===0,56720,{sr:a.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return LI(e,this.userId,t)}_r(e){return UI(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Sa,lastStreamToken:""}))}}function LI(r,e,t){const i=Rf(e,t.path),a=i[1],l=IDBKeyRange.lowerBound(i);let c=!1;return qo(r).ee({range:l,X:!0},((d,p,g)=>{const[_,T,b]=d;_===e&&T===a&&(c=!0),g.done()})).next((()=>c))}function ms(r){return Kt(r,gr)}function qo(r){return Kt(r,Jo)}function UI(r){return Kt(r,nc)}class La{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new La(0)}static cr(){return new La(-1)}}class kP{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const i=new La(t.highestTargetId);return t.highestTargetId=i.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Re.fromTimestamp(new nt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,i){return this.lr(e).next((a=>(a.highestListenSequenceNumber=t,i&&(a.lastRemoteSnapshotVersion=i.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.hr(e,a))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((i=>(i.targetCount+=1,this.Tr(t,i),this.hr(e,i))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Uo(e).delete(t.targetId))).next((()=>this.lr(e))).next((i=>(we(i.targetCount>0,8065),i.targetCount-=1,this.hr(e,i))))}removeTargets(e,t,i){let a=0;const l=[];return Uo(e).ee(((c,d)=>{const p=ku(d);p.sequenceNumber<=t&&i.get(p.targetId)===null&&(a++,l.push(this.removeTargetData(e,p)))})).next((()=>F.waitFor(l))).next((()=>a))}forEachTarget(e,t){return Uo(e).ee(((i,a)=>{const l=ku(a);t(l)}))}lr(e){return KS(e).get(Xf).next((t=>(we(t!==null,2888),t)))}hr(e,t){return KS(e).put(Xf,t)}Pr(e,t){return Uo(e).put(xI(this.serializer,t))}Tr(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const i=Pa(t),a=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let l=null;return Uo(e).ee({range:a,index:xw},((c,d,p)=>{const g=ku(d);bc(t,g.target)&&(l=g,p.done())})).next((()=>l))}addMatchingKeys(e,t,i){const a=[],l=Es(e);return t.forEach((c=>{const d=cn(c.path);a.push(l.put({targetId:i,path:d})),a.push(this.referenceDelegate.addReference(e,i,c))})),F.waitFor(a)}removeMatchingKeys(e,t,i){const a=Es(e);return F.forEach(t,(l=>{const c=cn(l.path);return F.waitFor([a.delete([i,c]),this.referenceDelegate.removeReference(e,i,l)])}))}removeMatchingKeysForTargetId(e,t){const i=Es(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(a)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),a=Es(e);let l=Ue();return a.ee({range:i,X:!0},((c,d,p)=>{const g=qr(c[1]),_=new ge(g);l=l.add(_)})).next((()=>l))}containsKey(e,t){const i=cn(t.path),a=IDBKeyRange.bound([i],[bw(i)],!1,!0);let l=0;return Es(e).ee({index:Fy,X:!0,range:a},(([c,d],p,g)=>{c!==0&&(l++,g.done())})).next((()=>l>0))}At(e,t){return Uo(e).get(t).next((i=>i?ku(i):null))}}function Uo(r){return Kt(r,Zo)}function KS(r){return Kt(r,Aa)}function Es(r){return Kt(r,el)}const QS="LruGarbageCollector",LP=1048576;function YS([r,e],[t,i]){const a=xe(r,t);return a===0?xe(e,i):a}class UP{constructor(e){this.Ir=e,this.buffer=new it(YS),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();YS(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class jI{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ce(QS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ms(t)?ce(QS,"Ignoring IndexedDB error during garbage collection: ",t):await Fa(t)}await this.Vr(3e5)}))}}class jP{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return F.resolve(er.ce);const i=new UP(t);return this.mr.forEachTarget(e,(a=>i.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>i.Ar(a))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(GS)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),GS):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,a,l,c,d,p,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),a=this.params.maximumSequenceNumbersToCollect):a=T,c=Date.now(),this.nthSequenceNumber(e,a)))).next((T=>(i=T,d=Date.now(),this.removeTargets(e,i,t)))).next((T=>(l=T,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(g=Date.now(),jo()<=qe.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${T} documents in `+(g-p)+`ms
Total Duration: ${g-_}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:T}))))}}function zI(r,e){return new jP(r,e)}class zP{constructor(e,t){this.db=e,this.garbageCollector=zI(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((i,a)=>t(a)))}addReference(e,t,i){return mf(e,i)}removeReference(e,t,i){return mf(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return mf(e,t)}br(e,t){return(function(a,l){let c=!1;return UI(a).te((d=>LI(a,d,l).next((p=>(p&&(c=!0),F.resolve(!p)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.Sr(e,((c,d)=>{if(d<=t){const p=this.br(e,c).next((g=>{if(!g)return l++,i.getEntry(e,c).next((()=>(i.removeEntry(c,Re.min()),Es(e).delete((function(T){return[0,cn(T.path)]})(c)))))}));a.push(p)}})).next((()=>F.waitFor(a))).next((()=>i.apply(e))).next((()=>l))}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return mf(e,t)}Sr(e,t){const i=Es(e);let a,l=er.ce;return i.ee({index:Fy},(([c,d],{path:p,sequenceNumber:g})=>{c===0?(l!==er.ce&&t(new ge(qr(a)),l),l=g,a=p):l=er.ce})).next((()=>{l!==er.ce&&t(new ge(qr(a)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function mf(r,e){return Es(r).put((function(i,a){return{targetId:0,path:cn(i.path),sequenceNumber:a}})(e,r.currentSequenceNumber))}class BI{constructor(){this.changes=new xi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?F.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class BP{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return ma(e).put(i)}removeEntry(e,t,i){return ma(e).delete((function(l,c){const d=l.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],nd(c),d[d.length-1]]})(t,i))}updateMetadata(e,t){return this.getMetadata(e).next((i=>(i.byteSize+=t,this.Dr(e,i))))}getEntry(e,t){let i=Tt.newInvalidDocument(t);return ma(e).ee({index:Cf,range:IDBKeyRange.only(Ru(t))},((a,l)=>{i=this.Cr(t,l)})).next((()=>i))}vr(e,t){let i={size:0,document:Tt.newInvalidDocument(t)};return ma(e).ee({index:Cf,range:IDBKeyRange.only(Ru(t))},((a,l)=>{i={document:this.Cr(t,l),size:id(l)}})).next((()=>i))}getEntries(e,t){let i=Mn();return this.Fr(e,t,((a,l)=>{const c=this.Cr(a,l);i=i.insert(a,c)})).next((()=>i))}Mr(e,t){let i=Mn(),a=new yt(ge.comparator);return this.Fr(e,t,((l,c)=>{const d=this.Cr(l,c);i=i.insert(l,d),a=a.insert(l,id(c))})).next((()=>({documents:i,Or:a})))}Fr(e,t,i){if(t.isEmpty())return F.resolve();let a=new it(WS);t.forEach((p=>a=a.add(p)));const l=IDBKeyRange.bound(Ru(a.first()),Ru(a.last())),c=a.getIterator();let d=c.getNext();return ma(e).ee({index:Cf,range:l},((p,g,_)=>{const T=ge.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;d&&WS(d,T)<0;)i(d,null),d=c.getNext();d&&d.isEqual(T)&&(i(d,g),d=c.hasNext()?c.getNext():null),d?_.j(Ru(d)):_.done()})).next((()=>{for(;d;)i(d,null),d=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,i,a,l){const c=t.path,d=[c.popLast().toArray(),c.lastSegment(),nd(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],p=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ma(e).J(IDBKeyRange.bound(d,p,!0)).next((g=>{l?.incrementDocumentReadCount(g.length);let _=Mn();for(const T of g){const b=this.Cr(ge.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);b.isFoundDocument()&&(Ac(t,b)||a.has(b.key))&&(_=_.insert(b.key,b))}return _}))}getAllFromCollectionGroup(e,t,i,a){let l=Mn();const c=XS(t,i),d=XS(t,Ln.max());return ma(e).ee({index:Nw,range:IDBKeyRange.bound(c,d,!0)},((p,g,_)=>{const T=this.Cr(ge.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);l=l.insert(T.key,T),l.size===a&&_.done()})).next((()=>l))}newChangeBuffer(e){return new FP(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return $S(e).get(Kg).next((t=>(we(!!t,20021),t)))}Dr(e,t){return $S(e).put(Kg,t)}Cr(e,t){if(t){const i=IP(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(Re.min())))return i}return Tt.newInvalidDocument(e)}}function FI(r){return new BP(r)}class FP extends BI{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new xi((i=>i.toString()),((i,a)=>i.isEqual(a)))}applyChanges(e){const t=[];let i=0,a=new it(((l,c)=>xe(l.canonicalString(),c.canonicalString())));return this.changes.forEach(((l,c)=>{const d=this.Br.get(l);if(t.push(this.Nr.removeEntry(e,l,d.readTime)),c.isValidDocument()){const p=OS(this.Nr.serializer,c);a=a.add(l.path.popLast());const g=id(p);i+=g-d.size,t.push(this.Nr.addEntry(e,l,p))}else if(i-=d.size,this.trackRemovals){const p=OS(this.Nr.serializer,c.convertToNoDocument(Re.min()));t.push(this.Nr.addEntry(e,l,p))}})),a.forEach((l=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Nr.updateMetadata(e,i)),F.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((i=>(this.Br.set(t,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:i,Or:a})=>(a.forEach(((l,c)=>{this.Br.set(l,{size:c,readTime:i.get(l).readTime})})),i)))}}function $S(r){return Kt(r,rc)}function ma(r){return Kt(r,$f)}function Ru(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function XS(r,e){const t=e.documentKey.path.toArray();return[r,nd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function WS(r,e){const t=r.path.toArray(),i=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<i.length-2;++l)if(a=xe(t[l],i[l]),a)return a;return a=xe(t.length,i.length),a||(a=xe(t[t.length-2],i[i.length-2]),a||xe(t[t.length-1],i[i.length-1]))}class qP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class qI{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(i!==null&&Qu(i.mutation,a,An.empty(),nt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ue()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ue()){const a=Hr();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,i).next((l=>{let c=Pu();return l.forEach(((d,p)=>{c=c.insert(d,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const i=Hr();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ue())))}populateOverlays(e,t,i){const a=[];return i.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,i,a){let l=Mn();const c=Ku(),d=(function(){return Ku()})();return t.forEach(((p,g)=>{const _=i.get(g.key);a.has(g.key)&&(_===void 0||_.mutation instanceof Oi)?l=l.insert(g.key,g):_!==void 0?(c.set(g.key,_.mutation.getFieldMask()),Qu(_.mutation,g,_.mutation.getFieldMask(),nt.now())):c.set(g.key,An.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((g,_)=>c.set(g,_))),t.forEach(((g,_)=>d.set(g,new qP(_,c.get(g)??null)))),d)))}recalculateAndSaveOverlays(e,t){const i=Ku();let a=new yt(((c,d)=>c-d)),l=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((p=>{const g=t.get(p);if(g===null)return;let _=i.get(p)||An.empty();_=d.applyToLocalView(g,_),i.set(p,_);const T=(a.get(d.batchId)||Ue()).add(p);a=a.insert(d.batchId,T)}))})).next((()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),g=p.key,_=p.value,T=oI();_.forEach((b=>{if(!l.has(b)){const V=dI(t.get(b),i.get(b));V!==null&&T.set(b,V),l=l.add(b)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,T))}return F.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,a){return(function(c){return ge.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):nI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):F.resolve(Hr());let d=Zu,p=l;return c.next((g=>F.forEach(g,((_,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(_)?F.resolve():this.remoteDocumentCache.getEntry(e,_).next((b=>{p=p.insert(_,b)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,p,g,Ue()))).next((_=>({batchId:d,changes:aI(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ge(t)).next((i=>{let a=Pu();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let c=Pu();return this.indexManager.getCollectionParents(e,l).next((d=>F.forEach(d,(p=>{const g=(function(T,b){return new gl(b,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,i,a).next((_=>{_.forEach(((T,b)=>{c=c.insert(T,b)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a)))).next((c=>{l.forEach(((p,g)=>{const _=g.getKey();c.get(_)===null&&(c=c.insert(_,Tt.newInvalidDocument(_)))}));let d=Pu();return c.forEach(((p,g)=>{const _=l.get(p);_!==void 0&&Qu(_.mutation,g,An.empty(),nt.now()),Ac(t,g)&&(d=d.insert(p,g))})),d}))}}class HP{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return F.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:gn(a.createTime)}})(t)),F.resolve()}getNamedQuery(e,t){return F.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:OI(a.bundledQuery),readTime:gn(a.readTime)}})(t)),F.resolve()}}class GP{constructor(){this.overlays=new yt(ge.comparator),this.qr=new Map}getOverlay(e,t){return F.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Hr();return F.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((a,l)=>{this.St(e,t,l)})),F.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.qr.get(i);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),F.resolve()}getOverlaysForCollection(e,t,i){const a=Hr(),l=t.length+1,c=new ge(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>i&&a.set(p.getKey(),p)}return F.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new yt(((g,_)=>g-_));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>i){let _=l.get(g.largestBatchId);_===null&&(_=Hr(),l=l.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const d=Hr(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,_)=>d.set(g,_))),!(d.size()>=a)););return F.resolve(d)}St(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(i.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new Zy(t,i));let l=this.qr.get(t);l===void 0&&(l=Ue(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}class KP{constructor(){this.sessionToken=Bt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,F.resolve()}}class i_{constructor(){this.Qr=new it(Xt.$r),this.Ur=new it(Xt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Xt(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Xt(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new ge(new Je([])),i=new Xt(t,e),a=new Xt(t,e+1),l=[];return this.Ur.forEachInRange([i,a],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ge(new Je([])),i=new Xt(t,e),a=new Xt(t,e+1);let l=Ue();return this.Ur.forEachInRange([i,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Xt(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Xt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ge.comparator(e.key,t.key)||xe(e.Yr,t.Yr)}static Kr(e,t){return xe(e.Yr,t.Yr)||ge.comparator(e.key,t.key)}}class QP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new it(Xt.$r)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Wy(l,t,i,a);this.mutationQueue.push(c);for(const d of a)this.Zr=this.Zr.add(new Xt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return F.resolve(c)}lookupMutationBatch(e,t){return F.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.ei(i),l=a<0?0:a;return F.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?Sa:this.tr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Xt(t,0),a=new Xt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,a],(c=>{const d=this.Xr(c.Yr);l.push(d)})),F.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new it(xe);return t.forEach((a=>{const l=new Xt(a,0),c=new Xt(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(d=>{i=i.add(d.Yr)}))})),F.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;ge.isDocumentKey(l)||(l=l.child(""));const c=new Xt(new ge(l),0);let d=new it(xe);return this.Zr.forEachWhile((p=>{const g=p.key.path;return!!i.isPrefixOf(g)&&(g.length===a&&(d=d.add(p.Yr)),!0)}),c),F.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((i=>{const a=this.Xr(i);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){we(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return F.forEach(t.mutations,(a=>{const l=new Xt(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Xt(t,0),a=this.Zr.firstAfterOrEqual(i);return F.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class YP{constructor(e){this.ri=e,this.docs=(function(){return new yt(ge.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,c=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return F.resolve(i?i.document.mutableCopy():Tt.newInvalidDocument(t))}getEntries(e,t){let i=Mn();return t.forEach((a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():Tt.newInvalidDocument(a))})),F.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=Mn();const c=t.path,d=new ge(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:g,value:{document:_}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||zy(ww(_),i)<=0||(a.has(_.key)||Ac(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return F.resolve(l)}getAllFromCollectionGroup(e,t,i,a){be(9500)}ii(e,t){return F.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new $P(this)}getSize(e){return F.resolve(this.size)}}class $P extends BI{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(i)})),F.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class XP{constructor(e){this.persistence=e,this.si=new xi((t=>Pa(t)),bc),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new i_,this.targetCount=0,this.ai=La.ur()}forEachTarget(e,t){return this.si.forEach(((i,a)=>t(a))),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),F.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new La(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,F.resolve()}updateTargetData(e,t){return this.Pr(t),F.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)})),F.waitFor(l).next((()=>a))}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return F.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),F.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),F.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),F.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return F.resolve(i)}containsKey(e,t){return F.resolve(this._i.containsKey(t))}}class s_{constructor(e,t){this.ui={},this.overlays={},this.ci=new er(0),this.li=!1,this.li=!0,this.hi=new KP,this.referenceDelegate=e(this),this.Pi=new XP(this),this.indexManager=new PP,this.remoteDocumentCache=(function(a){return new YP(a)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new NI(t),this.Ii=new HP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new GP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new QP(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ce("MemoryPersistence","Starting transaction:",e);const a=new WP(this.ci.next());return this.referenceDelegate.Ei(),i(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return F.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class WP extends Rw{constructor(e){super(),this.currentSequenceNumber=e}}class Md{constructor(e){this.persistence=e,this.Ri=new i_,this.Vi=null}static mi(e){return new Md(e)}get fi(){if(this.Vi)return this.Vi;throw be(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),F.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),F.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),F.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.fi,(i=>{const a=ge.fromPath(i);return this.gi(e,a).next((l=>{l||t.removeEntry(a,Re.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return F.or([()=>F.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class sd{constructor(e,t){this.persistence=e,this.pi=new xi((i=>cn(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=zI(this,t)}static mi(e,t){return new sd(e,t)}Ei(){}di(e){return F.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return F.forEach(this.pi,((i,a)=>this.br(e,i,a).next((l=>l?F.resolve():t(a)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,t).next((d=>{d||(i++,l.removeEntry(c,Re.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),F.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),F.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),F.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Nf(e.data.value)),t}br(e,t,i){return F.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return F.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class JP{constructor(e){this.serializer=e}k(e,t,i,a){const l=new Td("createOrUpgrade",t);i<1&&a>=1&&((function(p){p.createObjectStore(Tc)})(e),(function(p){p.createObjectStore(nc,{keyPath:lV}),p.createObjectStore(gr,{keyPath:lS,autoIncrement:!0}).createIndex(ba,uS,{unique:!0}),p.createObjectStore(Jo)})(e),JS(e),(function(p){p.createObjectStore(ya)})(e));let c=F.resolve();return i<3&&a>=3&&(i!==0&&((function(p){p.deleteObjectStore(el),p.deleteObjectStore(Zo),p.deleteObjectStore(Aa)})(e),JS(e)),c=c.next((()=>(function(p){const g=p.store(Aa),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Re.min().toTimestamp(),targetCount:0};return g.put(Xf,_)})(l)))),i<4&&a>=4&&(i!==0&&(c=c.next((()=>(function(p,g){return g.store(gr).J().next((T=>{p.deleteObjectStore(gr),p.createObjectStore(gr,{keyPath:lS,autoIncrement:!0}).createIndex(ba,uS,{unique:!0});const b=g.store(gr),V=T.map((B=>b.put(B)));return F.waitFor(V)}))})(e,l)))),c=c.next((()=>{(function(p){p.createObjectStore(tl,{keyPath:yV})})(e)}))),i<5&&a>=5&&(c=c.next((()=>this.yi(l)))),i<6&&a>=6&&(c=c.next((()=>((function(p){p.createObjectStore(rc)})(e),this.wi(l))))),i<7&&a>=7&&(c=c.next((()=>this.Si(l)))),i<8&&a>=8&&(c=c.next((()=>this.bi(e,l)))),i<9&&a>=9&&(c=c.next((()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e)}))),i<10&&a>=10&&(c=c.next((()=>this.Di(l)))),i<11&&a>=11&&(c=c.next((()=>{(function(p){p.createObjectStore(Sd,{keyPath:_V})})(e),(function(p){p.createObjectStore(Ad,{keyPath:vV})})(e)}))),i<12&&a>=12&&(c=c.next((()=>{(function(p){const g=p.createObjectStore(wd,{keyPath:IV});g.createIndex(Yg,RV,{unique:!1}),g.createIndex(Pw,CV,{unique:!1})})(e)}))),i<13&&a>=13&&(c=c.next((()=>(function(p){const g=p.createObjectStore($f,{keyPath:cV});g.createIndex(Cf,hV),g.createIndex(Nw,fV)})(e))).next((()=>this.Ci(e,l))).next((()=>e.deleteObjectStore(ya)))),i<14&&a>=14&&(c=c.next((()=>this.Fi(e,l)))),i<15&&a>=15&&(c=c.next((()=>(function(p){p.createObjectStore(qy,{keyPath:EV,autoIncrement:!0}).createIndex(Qg,TV,{unique:!1}),p.createObjectStore(Fu,{keyPath:bV}).createIndex(Ow,SV,{unique:!1}),p.createObjectStore(qu,{keyPath:AV}).createIndex(Vw,wV,{unique:!1})})(e)))),i<16&&a>=16&&(c=c.next((()=>{t.objectStore(Fu).clear()})).next((()=>{t.objectStore(qu).clear()}))),i<17&&a>=17&&(c=c.next((()=>{(function(p){p.createObjectStore(Hy,{keyPath:DV})})(e)}))),i<18&&a>=18&&CA()&&(c=c.next((()=>{t.objectStore(Fu).clear()})).next((()=>{t.objectStore(qu).clear()}))),c}wi(e){let t=0;return e.store(ya).ee(((i,a)=>{t+=id(a)})).next((()=>{const i={byteSize:t};return e.store(rc).put(Kg,i)}))}yi(e){const t=e.store(nc),i=e.store(gr);return t.J().next((a=>F.forEach(a,(l=>{const c=IDBKeyRange.bound([l.userId,Sa],[l.userId,l.lastAcknowledgedBatchId]);return i.J(ba,c).next((d=>F.forEach(d,(p=>{we(p.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:p.batchId});const g=va(this.serializer,p);return kI(e,l.userId,g).next((()=>{}))}))))}))))}Si(e){const t=e.store(el),i=e.store(ya);return e.store(Aa).get(Xf).next((a=>{const l=[];return i.ee(((c,d)=>{const p=new Je(c),g=(function(T){return[0,cn(T)]})(p);l.push(t.get(g).next((_=>_?F.resolve():(T=>t.put({targetId:0,path:cn(T),sequenceNumber:a.highestListenSequenceNumber}))(p))))})).next((()=>F.waitFor(l)))}))}bi(e,t){e.createObjectStore(ic,{keyPath:gV});const i=t.store(ic),a=new r_,l=c=>{if(a.add(c)){const d=c.lastSegment(),p=c.popLast();return i.put({collectionId:d,parent:cn(p)})}};return t.store(ya).ee({X:!0},((c,d)=>{const p=new Je(c);return l(p.popLast())})).next((()=>t.store(Jo).ee({X:!0},(([c,d,p],g)=>{const _=qr(d);return l(_.popLast())}))))}Di(e){const t=e.store(Zo);return t.ee(((i,a)=>{const l=ku(a),c=xI(this.serializer,l);return t.put(c)}))}Ci(e,t){const i=t.store(ya),a=[];return i.ee(((l,c)=>{const d=t.store($f),p=(function(T){return T.document?new ge(Je.fromString(T.document.name).popFirst(5)):T.noDocument?ge.fromSegments(T.noDocument.path):T.unknownDocument?ge.fromSegments(T.unknownDocument.path):be(36783)})(c).path.toArray(),g={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(d.put(g))})).next((()=>F.waitFor(a)))}Fi(e,t){const i=t.store(gr),a=FI(this.serializer),l=new s_(Md.mi,this.serializer.yt);return i.J().next((c=>{const d=new Map;return c.forEach((p=>{let g=d.get(p.userId)??Ue();va(this.serializer,p).keys().forEach((_=>g=g.add(_))),d.set(p.userId,g)})),F.forEach(d,((p,g)=>{const _=new rn(g),T=Vd.wt(this.serializer,_),b=l.getIndexManager(_),V=Pd.wt(_,this.serializer,b,l.referenceDelegate);return new qI(a,V,T,b).recalculateAndSaveOverlaysForDocumentKeys(new $g(t,er.ce),p).next()}))}))}}function JS(r){r.createObjectStore(el,{keyPath:mV}).createIndex(Fy,pV,{unique:!0}),r.createObjectStore(Zo,{keyPath:"targetId"}).createIndex(xw,dV,{unique:!0}),r.createObjectStore(Aa)}const ps="IndexedDbPersistence",sg=18e5,ag=5e3,og="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ZP="main";class a_{constructor(e,t,i,a,l,c,d,p,g,_,T=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Mi=l,this.window=c,this.document=d,this.xi=g,this.Oi=_,this.Ni=T,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=b=>Promise.resolve(),!a_.v())throw new de(te.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zP(this,a),this.$i=t+ZP,this.serializer=new NI(p),this.Ui=new Is(this.$i,this.Ni,new JP(this.serializer)),this.hi=new CP,this.Pi=new kP(this.referenceDelegate,this.serializer),this.remoteDocumentCache=FI(this.serializer),this.Ii=new RP,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,_===!1&&mn(ps,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new de(te.FAILED_PRECONDITION,og);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new er(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>pf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Ms(e))return ce(ps,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ce(ps,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Cu(e).get(Vo).next((t=>F.resolve(this.es(t))))}ts(e){return pf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,sg)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const i=Kt(t,tl);return i.J().next((a=>{const l=this.ss(a,sg),c=a.filter((d=>l.indexOf(d)===-1));return F.forEach(c,(d=>i.delete(d.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?F.resolve(!0):Cu(e).get(Vo).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,ag)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new de(te.FAILED_PRECONDITION,og);return!1}}return!(!this.networkEnabled||!this.inForeground)||pf(e).J().next((i=>this.ss(i,ag).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,d=this.networkEnabled===a.networkEnabled;if(l||c&&d)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ce(ps,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Tc,tl],(e=>{const t=new $g(e,er.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((i=>this.rs(i.updateTimeMs,t)&&!this.us(i.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>pf(e).J().next((t=>this.ss(t,sg).map((i=>i.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Pd.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new MP(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Vd.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,i){ce(ps,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=(function(p){return p===18?OV:p===17?Uw:p===16?xV:p===15?Gy:p===14?Lw:p===13?kw:p===12?NV:p===11?Mw:void be(60245)})(this.Ni);let c;return this.Ui.runTransaction(e,a,l,(d=>(c=new $g(d,this.ci?this.ci.next():er.ce),t==="readwrite-primary"?this.Hi(c).next((p=>!!p||this.Yi(c))).next((p=>{if(!p)throw mn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new de(te.FAILED_PRECONDITION,Iw);return i(c)})).next((p=>this.Xi(c).next((()=>p)))):this.Is(c).next((()=>i(c)))))).then((d=>(c.raiseOnCommittedEvent(),d)))}Is(e){return Cu(e).get(Vo).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,ag)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new de(te.FAILED_PRECONDITION,og)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Cu(e).put(Vo,t)}static v(){return Is.v()}Zi(e){const t=Cu(e);return t.get(Vo).next((i=>this.es(i)?(ce(ps,"Releasing primary lease."),t.delete(Vo)):F.resolve()))}rs(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(mn(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;RA()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return ce(ps,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return mn(ps,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){mn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Cu(r){return Kt(r,Tc)}function pf(r){return Kt(r,tl)}function eM(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class o_{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=a}static As(e,t){let i=Ue(),a=Ue();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new o_(e,t.fromCache,i,a)}}class tM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class HI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return RA()?8:Cw(Gt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,a,i).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new tM;return this.Ss(e,t,c).next((d=>{if(l.result=d,this.Vs)return this.bs(e,t,c,d.size)}))})).next((()=>l.result))}bs(e,t,i,a){return i.documentReadCount<this.fs?(jo()<=qe.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",zo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),F.resolve()):(jo()<=qe.DEBUG&&ce("QueryEngine","Query:",zo(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.gs*a?(jo()<=qe.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",zo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,tr(t))):F.resolve())}ys(e,t){if(bS(t))return F.resolve(null);let i=tr(t);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=ny(t,null,"F"),i=tr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const c=Ue(...l);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,i).next((p=>{const g=this.Ds(t,d);return this.Cs(t,g,c,p.readTime)?this.ys(e,ny(t,null,"F")):this.vs(e,g,t,p)}))))})))))}ws(e,t,i,a){return bS(t)||a.isEqual(Re.min())?F.resolve(null):this.ps.getDocuments(e,i).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,i,a)?F.resolve(null):(jo()<=qe.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),zo(t)),this.vs(e,c,t,tV(a,Zu)).next((d=>d)))}))}Ds(e,t){let i=new it(iI(e));return t.forEach(((a,l)=>{Ac(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,i){return jo()<=qe.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",zo(t)),this.ps.getDocumentsMatchingQuery(e,t,Ln.min(),i)}vs(e,t,i,a){return this.ps.getDocumentsMatchingQuery(e,i,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}const l_="LocalStore",nM=3e8;class rM{constructor(e,t,i,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new yt(xe),this.xs=new xi((l=>Pa(l)),bc),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function GI(r,e,t,i){return new rM(r,e,t,i)}async function KI(r,e){const t=Oe(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const c=[],d=[];let p=Ue();for(const g of a){c.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}for(const g of l){d.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(i,p).next((g=>({Ls:g,removedBatchIds:c,addedBatchIds:d})))}))}))}function iM(r,e){const t=Oe(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,p,g,_){const T=g.batch,b=T.keys();let V=F.resolve();return b.forEach((B=>{V=V.next((()=>_.getEntry(p,B))).next((L=>{const k=g.docVersions.get(B);we(k!==null,48541),L.version.compareTo(k)<0&&(T.applyToRemoteDocument(L,g),L.isValidDocument()&&(L.setReadTime(g.commitVersion),_.addEntry(L)))}))})),V.next((()=>d.mutationQueue.removeMutationBatch(p,T)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let p=Ue();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(p=p.add(d.batch.mutations[g].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,a)))}))}function QI(r){const e=Oe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function sM(r,e){const t=Oe(r),i=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const d=[];e.targetChanges.forEach(((_,T)=>{const b=a.get(T);if(!b)return;d.push(t.Pi.removeMatchingKeys(l,_.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(l,_.addedDocuments,T))));let V=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?V=V.withResumeToken(Bt.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):_.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(_.resumeToken,i)),a=a.insert(T,V),(function(L,k,ie){return L.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=nM?!0:ie.addedDocuments.size+ie.modifiedDocuments.size+ie.removedDocuments.size>0})(b,V,_)&&d.push(t.Pi.updateTargetData(l,V))}));let p=Mn(),g=Ue();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),d.push(aM(l,c,e.documentUpdates).next((_=>{p=_.ks,g=_.qs}))),!i.isEqual(Re.min())){const _=t.Pi.getLastRemoteSnapshotVersion(l).next((T=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));d.push(_)}return F.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,g))).next((()=>p))})).then((l=>(t.Ms=a,l)))}function aM(r,e,t){let i=Ue(),a=Ue();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let c=Mn();return t.forEach(((d,p)=>{const g=l.get(d);p.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(d)),p.isNoDocument()&&p.version.isEqual(Re.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):ce(l_,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",p.version)})),{ks:c,qs:a}}))}function oM(r,e){const t=Oe(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Sa),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function lM(r,e){const t=Oe(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return t.Pi.getTargetData(i,e).next((l=>l?(a=l,F.resolve(a)):t.Pi.allocateTargetId(i).next((c=>(a=new Si(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=t.Ms.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function cy(r,e,t){const i=Oe(r),a=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(c=>i.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!Ms(c))throw c;ce(l_,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Ms=i.Ms.remove(e),i.xs.delete(a.target)}function ZS(r,e,t){const i=Oe(r);let a=Re.min(),l=Ue();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,g,_){const T=Oe(p),b=T.xs.get(_);return b!==void 0?F.resolve(T.Ms.get(b)):T.Pi.getTargetData(g,_)})(i,c,tr(e)).next((d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(c,d.targetId).next((p=>{l=p}))})).next((()=>i.Fs.getDocumentsMatchingQuery(c,e,t?a:Re.min(),t?l:Ue()))).next((d=>(uM(i,QV(e),d),{documents:d,Qs:l})))))}function uM(r,e,t){let i=r.Os.get(e)||Re.min();t.forEach(((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.Os.set(e,i)}class e0{constructor(){this.activeTargetIds=ZV()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class YI{constructor(){this.Mo=new e0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new e0,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class cM{Oo(e){}shutdown(){}}const t0="ConnectivityMonitor";class n0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ce(t0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ce(t0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let gf=null;function hy(){return gf===null?gf=(function(){return 268435456+Math.round(2147483648*Math.random())})():gf++,"0x"+gf.toString(16)}const lg="RestConnection",hM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fM{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${a}`,this.Wo=this.databaseId.database===Wf?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Go(e,t,i,a,l){const c=hy(),d=this.zo(e,t.toUriEncodedString());ce(lg,`Sending RPC '${e}' ${c}:`,d,i);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,a,l);const{host:g}=new URL(d),_=ja(g);return this.Jo(e,d,p,i,_).then((T=>(ce(lg,`Received RPC '${e}' ${c}: `,T),T)),(T=>{throw Oa(lg,`RPC '${e}' ${c} failed with error: `,T,"url: ",d,"request:",i),T}))}Ho(e,t,i,a,l,c){return this.Go(e,t,i,a,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+pl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),i&&i.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const i=hM[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}class dM{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const on="WebChannelConnection";class mM extends fM{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,a,l){const c=hy();return new Promise(((d,p)=>{const g=new pw;g.setWithCredentials(!0),g.listenOnce(gw.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case wf.NO_ERROR:const T=g.getResponseJson();ce(on,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),d(T);break;case wf.TIMEOUT:ce(on,`RPC '${e}' ${c} timed out`),p(new de(te.DEADLINE_EXCEEDED,"Request time out"));break;case wf.HTTP_ERROR:const b=g.getStatus();if(ce(on,`RPC '${e}' ${c} failed with status:`,b,"response text:",g.getResponseText()),b>0){let V=g.getResponseJson();Array.isArray(V)&&(V=V[0]);const B=V?.error;if(B&&B.status&&B.message){const L=(function(ie){const K=ie.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(K)>=0?K:te.UNKNOWN})(B.status);p(new de(L,B.message))}else p(new de(te.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new de(te.UNAVAILABLE,"Connection failed."));break;default:be(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{ce(on,`RPC '${e}' ${c} completed.`)}}));const _=JSON.stringify(a);ce(on,`RPC '${e}' ${c} sending request:`,a),g.send(t,"POST",_,i,15)}))}T_(e,t,i){const a=hy(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=vw(),d=_w(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const _=l.join("");ce(on,`Creating RPC '${e}' stream ${a}: ${_}`,p);const T=c.createWebChannel(_,p);this.I_(T);let b=!1,V=!1;const B=new dM({Yo:k=>{V?ce(on,`Not sending because RPC '${e}' stream ${a} is closed:`,k):(b||(ce(on,`Opening RPC '${e}' stream ${a} transport.`),T.open(),b=!0),ce(on,`RPC '${e}' stream ${a} sending:`,k),T.send(k))},Zo:()=>T.close()}),L=(k,ie,K)=>{k.listen(ie,(X=>{try{K(X)}catch(ue){setTimeout((()=>{throw ue}),0)}}))};return L(T,Vu.EventType.OPEN,(()=>{V||(ce(on,`RPC '${e}' stream ${a} transport opened.`),B.o_())})),L(T,Vu.EventType.CLOSE,(()=>{V||(V=!0,ce(on,`RPC '${e}' stream ${a} transport closed`),B.a_(),this.E_(T))})),L(T,Vu.EventType.ERROR,(k=>{V||(V=!0,Oa(on,`RPC '${e}' stream ${a} transport errored. Name:`,k.name,"Message:",k.message),B.a_(new de(te.UNAVAILABLE,"The operation could not be completed")))})),L(T,Vu.EventType.MESSAGE,(k=>{if(!V){const ie=k.data[0];we(!!ie,16349);const K=ie,X=K?.error||K[0]?.error;if(X){ce(on,`RPC '${e}' stream ${a} received error:`,X);const ue=X.status;let he=(function(w){const D=Ut[w];if(D!==void 0)return gI(D)})(ue),oe=X.message;he===void 0&&(he=te.INTERNAL,oe="Unknown error status: "+ue+" with message "+X.message),V=!0,B.a_(new de(he,oe)),T.close()}else ce(on,`RPC '${e}' stream ${a} received:`,ie),B.u_(ie)}})),L(d,yw.STAT_EVENT,(k=>{k.stat===qg.PROXY?ce(on,`RPC '${e}' stream ${a} detected buffering proxy`):k.stat===qg.NOPROXY&&ce(on,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{B.__()}),0),B}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function pM(){return typeof window<"u"?window:null}function Mf(){return typeof document<"u"?document:null}function kd(r){return new gP(r,!0)}class $I{constructor(e,t,i=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-i);a>0&&ce("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const r0="PersistentStream";class XI{constructor(e,t,i,a,l,c,d,p){this.Mi=e,this.S_=i,this.b_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new $I(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(mn(t.toString()),mn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===t&&this.G_(i,a)}),(i=>{e((()=>{const a=new de(te.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ce(r0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ce(r0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class gM extends XI{constructor(e,t,i,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=vP(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Re.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Re.min():c.readTime?gn(c.readTime):Re.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=sy(this.serializer),t.addTarget=(function(l,c){let d;const p=c.target;if(d=Jf(p)?{documents:AI(l,p)}:{query:wI(l,p).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=vI(l,c.resumeToken);const g=ry(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(Re.min())>0){d.readTime=ll(l,c.snapshotVersion.toTimestamp());const g=ry(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const i=TP(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=sy(this.serializer),t.removeTarget=e,this.q_(t)}}class yM extends XI{constructor(e,t,i,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return we(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,we(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){we(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=EP(e.writeResults,e.commitTime),i=gn(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=sy(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>td(this.serializer,i)))};this.q_(t)}}class _M{}class vM extends _M{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new de(te.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,iy(t,i),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new de(te.UNKNOWN,l.toString())}))}Ho(e,t,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,iy(t,i),a,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new de(te.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class EM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(mn(t),this.aa=!1):ce("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ua="RemoteStore";class TM{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{i.enqueueAndForget((async()=>{qa(this)&&(ce(Ua,"Restarting streams for network reachability change."),await(async function(p){const g=Oe(p);g.Ea.add(4),await Ic(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Ld(g)})(this))}))})),this.Ra=new EM(i,a)}}async function Ld(r){if(qa(r))for(const e of r.da)await e(!0)}async function Ic(r){for(const e of r.da)await e(!1)}function WI(r,e){const t=Oe(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),f_(t)?h_(t):_l(t).O_()&&c_(t,e))}function u_(r,e){const t=Oe(r),i=_l(t);t.Ia.delete(e),i.O_()&&JI(t,e),t.Ia.size===0&&(i.O_()?i.L_():qa(t)&&t.Ra.set("Unknown"))}function c_(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}_l(r).Y_(e)}function JI(r,e){r.Va.Ue(e),_l(r).Z_(e)}function h_(r){r.Va=new fP({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),_l(r).start(),r.Ra.ua()}function f_(r){return qa(r)&&!_l(r).x_()&&r.Ia.size>0}function qa(r){return Oe(r).Ea.size===0}function ZI(r){r.Va=void 0}async function bM(r){r.Ra.set("Online")}async function SM(r){r.Ia.forEach(((e,t)=>{c_(r,e)}))}async function AM(r,e){ZI(r),f_(r)?(r.Ra.ha(e),h_(r)):r.Ra.set("Unknown")}async function wM(r,e,t){if(r.Ra.set("Online"),e instanceof _I&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ia.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ia.delete(d),a.Va.removeTarget(d))})(r,e)}catch(i){ce(Ua,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await ad(r,i)}else if(e instanceof Vf?r.Va.Ze(e):e instanceof yI?r.Va.st(e):r.Va.tt(e),!t.isEqual(Re.min()))try{const i=await QI(r.localStore);t.compareTo(i)>=0&&await(function(l,c){const d=l.Va.Tt(c);return d.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const _=l.Ia.get(g);_&&l.Ia.set(g,_.withResumeToken(p.resumeToken,c))}})),d.targetMismatches.forEach(((p,g)=>{const _=l.Ia.get(p);if(!_)return;l.Ia.set(p,_.withResumeToken(Bt.EMPTY_BYTE_STRING,_.snapshotVersion)),JI(l,p);const T=new Si(_.target,p,g,_.sequenceNumber);c_(l,T)})),l.remoteSyncer.applyRemoteEvent(d)})(r,t)}catch(i){ce(Ua,"Failed to raise snapshot:",i),await ad(r,i)}}async function ad(r,e,t){if(!Ms(e))throw e;r.Ea.add(1),await Ic(r),r.Ra.set("Offline"),t||(t=()=>QI(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ce(Ua,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Ld(r)}))}function eR(r,e){return e().catch((t=>ad(r,t,e)))}async function Rc(r){const e=Oe(r),t=xs(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Sa;for(;IM(e);)try{const a=await oM(e.localStore,i);if(a===null){e.Ta.length===0&&t.L_();break}i=a.batchId,RM(e,a)}catch(a){await ad(e,a)}tR(e)&&nR(e)}function IM(r){return qa(r)&&r.Ta.length<10}function RM(r,e){r.Ta.push(e);const t=xs(r);t.O_()&&t.X_&&t.ea(e.mutations)}function tR(r){return qa(r)&&!xs(r).x_()&&r.Ta.length>0}function nR(r){xs(r).start()}async function CM(r){xs(r).ra()}async function DM(r){const e=xs(r);for(const t of r.Ta)e.ea(t.mutations)}async function NM(r,e,t){const i=r.Ta.shift(),a=Jy.from(i,e,t);await eR(r,(()=>r.remoteSyncer.applySuccessfulWrite(a))),await Rc(r)}async function xM(r,e){e&&xs(r).X_&&await(async function(i,a){if((function(c){return uP(c)&&c!==te.ABORTED})(a.code)){const l=i.Ta.shift();xs(i).B_(),await eR(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Rc(i)}})(r,e),tR(r)&&nR(r)}async function i0(r,e){const t=Oe(r);t.asyncQueue.verifyOperationInProgress(),ce(Ua,"RemoteStore received new credentials");const i=qa(t);t.Ea.add(3),await Ic(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Ld(t)}async function OM(r,e){const t=Oe(r);e?(t.Ea.delete(2),await Ld(t)):e||(t.Ea.add(2),await Ic(t),t.Ra.set("Unknown"))}function _l(r){return r.ma||(r.ma=(function(t,i,a){const l=Oe(t);return l.sa(),new gM(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(r.datastore,r.asyncQueue,{Xo:bM.bind(null,r),t_:SM.bind(null,r),r_:AM.bind(null,r),H_:wM.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),f_(r)?h_(r):r.Ra.set("Unknown")):(await r.ma.stop(),ZI(r))}))),r.ma}function xs(r){return r.fa||(r.fa=(function(t,i,a){const l=Oe(t);return l.sa(),new yM(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:CM.bind(null,r),r_:xM.bind(null,r),ta:DM.bind(null,r),na:NM.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Rc(r)):(await r.fa.stop(),r.Ta.length>0&&(ce(Ua,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class d_{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new Yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const c=Date.now()+i,d=new d_(e,t,c,a,l);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function m_(r,e){if(mn("AsyncQueue",`${e}: ${r}`),Ms(r))return new de(te.UNAVAILABLE,`${e}: ${r}`);throw r}class Yo{static emptySet(e){return new Yo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ge.comparator(t.key,i.key):(t,i)=>ge.comparator(t.key,i.key),this.keyedMap=Pu(),this.sortedSet=new yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Yo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Yo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class s0{constructor(){this.ga=new yt(ge.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):be(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class ul{constructor(e,t,i,a,l,c,d,p,g){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,i,a,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new ul(e,t,Yo.emptySet(t),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}class VM{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class PM{constructor(){this.queries=a0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const a=Oe(t),l=a.queries;a.queries=a0(),l.forEach(((c,d)=>{for(const p of d.Sa)p.onError(i)}))})(this,new de(te.ABORTED,"Firestore shutting down"))}}function a0(){return new xi((r=>rI(r)),Cd)}async function p_(r,e){const t=Oe(r);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(i=2):(l=new VM,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=m_(c,`Initialization of query '${zo(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&y_(t)}async function g_(r,e){const t=Oe(r),i=e.query;let a=3;const l=t.queries.get(i);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function MM(r,e){const t=Oe(r);let i=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.Sa)d.Fa(a)&&(i=!0);c.wa=a}}i&&y_(t)}function kM(r,e,t){const i=Oe(r),a=i.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);i.queries.delete(e)}function y_(r){r.Ca.forEach((e=>{e.next()}))}var fy,o0;(o0=fy||(fy={})).Ma="default",o0.Cache="cache";class __{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new ul(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ul.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==fy.Cache}}class rR{constructor(e){this.key=e}}class iR{constructor(e){this.key=e}}class LM{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ue(),this.mutatedKeys=Ue(),this.eu=iI(e),this.tu=new Yo(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new s0,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((_,T)=>{const b=a.get(_),V=Ac(this.query,T)?T:null,B=!!b&&this.mutatedKeys.has(b.key),L=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let k=!1;b&&V?b.data.isEqual(V.data)?B!==L&&(i.track({type:3,doc:V}),k=!0):this.su(b,V)||(i.track({type:2,doc:V}),k=!0,(p&&this.eu(V,p)>0||g&&this.eu(V,g)<0)&&(d=!0)):!b&&V?(i.track({type:0,doc:V}),k=!0):b&&!V&&(i.track({type:1,doc:b}),k=!0,(p||g)&&(d=!0)),k&&(V?(c=c.add(V),l=L?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{tu:c,iu:i,Cs:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((_,T)=>(function(V,B){const L=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be(20277,{Rt:k})}};return L(V)-L(B)})(_.type,T.type)||this.eu(_.doc,T.doc))),this.ou(i),a=a??!1;const d=t&&!a?this._u():[],p=this.Xa.size===0&&this.current&&!a?1:0,g=p!==this.Za;return this.Za=p,c.length!==0||g?{snapshot:new ul(this.query,e.tu,l,c,e.mutatedKeys,p===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new s0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ue(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new iR(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new rR(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ue();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ul.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const v_="SyncEngine";class UM{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class jM{constructor(e){this.key=e,this.hu=!1}}class zM{constructor(e,t,i,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new xi((d=>rI(d)),Cd),this.Iu=new Map,this.Eu=new Set,this.du=new yt(ge.comparator),this.Au=new Map,this.Ru=new i_,this.Vu={},this.mu=new Map,this.fu=La.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function BM(r,e,t=!0){const i=cR(r);let a;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await sR(i,e,t,!0),a}async function FM(r,e){const t=cR(r);await sR(t,e,!0,!1)}async function sR(r,e,t,i){const a=await lM(r.localStore,tr(e)),l=a.targetId,c=r.sharedClientState.addLocalQueryTarget(l,t);let d;return i&&(d=await qM(r,e,l,c==="current",a.resumeToken)),r.isPrimaryClient&&t&&WI(r.remoteStore,a),d}async function qM(r,e,t,i,a){r.pu=(T,b,V)=>(async function(L,k,ie,K){let X=k.view.ru(ie);X.Cs&&(X=await ZS(L.localStore,k.query,!1).then((({documents:C})=>k.view.ru(C,X))));const ue=K&&K.targetChanges.get(k.targetId),he=K&&K.targetMismatches.get(k.targetId)!=null,oe=k.view.applyChanges(X,L.isPrimaryClient,ue,he);return u0(L,k.targetId,oe.au),oe.snapshot})(r,T,b,V);const l=await ZS(r.localStore,e,!0),c=new LM(e,l.Qs),d=c.ru(l.documents),p=wc.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",a),g=c.applyChanges(d,r.isPrimaryClient,p);u0(r,t,g.au);const _=new UM(e,t,c);return r.Tu.set(e,_),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),g.snapshot}async function HM(r,e,t){const i=Oe(r),a=i.Tu.get(e),l=i.Iu.get(a.targetId);if(l.length>1)return i.Iu.set(a.targetId,l.filter((c=>!Cd(c,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await cy(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),t&&u_(i.remoteStore,a.targetId),dy(i,a.targetId)})).catch(Fa)):(dy(i,a.targetId),await cy(i.localStore,a.targetId,!0))}async function GM(r,e){const t=Oe(r),i=t.Tu.get(e),a=t.Iu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),u_(t.remoteStore,i.targetId))}async function KM(r,e,t){const i=hR(r);try{const a=await(function(c,d){const p=Oe(c),g=nt.now(),_=d.reduce(((V,B)=>V.add(B.key)),Ue());let T,b;return p.persistence.runTransaction("Locally write mutations","readwrite",(V=>{let B=Mn(),L=Ue();return p.Ns.getEntries(V,_).next((k=>{B=k,B.forEach(((ie,K)=>{K.isValidDocument()||(L=L.add(ie))}))})).next((()=>p.localDocuments.getOverlayedDocuments(V,B))).next((k=>{T=k;const ie=[];for(const K of d){const X=oP(K,T.get(K.key).overlayedDocument);X!=null&&ie.push(new Oi(K.key,X,Yw(X.value.mapValue),pn.exists(!0)))}return p.mutationQueue.addMutationBatch(V,g,ie,d)})).next((k=>{b=k;const ie=k.applyToLocalDocumentSet(T,L);return p.documentOverlayCache.saveOverlays(V,k.batchId,ie)}))})).then((()=>({batchId:b.batchId,changes:aI(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(c,d,p){let g=c.Vu[c.currentUser.toKey()];g||(g=new yt(xe)),g=g.insert(d,p),c.Vu[c.currentUser.toKey()]=g})(i,a.batchId,t),await Cc(i,a.changes),await Rc(i.remoteStore)}catch(a){const l=m_(a,"Failed to persist write");t.reject(l)}}async function aR(r,e){const t=Oe(r);try{const i=await sM(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(we(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?we(c.hu,14607):a.removedDocuments.size>0&&(we(c.hu,42227),c.hu=!1))})),await Cc(t,i,e)}catch(i){await Fa(i)}}function l0(r,e,t){const i=Oe(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&a.push(d.snapshot)})),(function(c,d){const p=Oe(c);p.onlineState=d;let g=!1;p.queries.forEach(((_,T)=>{for(const b of T.Sa)b.va(d)&&(g=!0)})),g&&y_(p)})(i.eventManager,e),a.length&&i.Pu.H_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function QM(r,e,t){const i=Oe(r);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Au.get(e),l=a&&a.key;if(l){let c=new yt(ge.comparator);c=c.insert(l,Tt.newNoDocument(l,Re.min()));const d=Ue().add(l),p=new Od(Re.min(),new Map,new yt(xe),c,d);await aR(i,p),i.du=i.du.remove(l),i.Au.delete(e),E_(i)}else await cy(i.localStore,e,!1).then((()=>dy(i,e,t))).catch(Fa)}async function YM(r,e){const t=Oe(r),i=e.batch.batchId;try{const a=await iM(t.localStore,e);lR(t,i,null),oR(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Cc(t,a)}catch(a){await Fa(a)}}async function $M(r,e,t){const i=Oe(r);try{const a=await(function(c,d){const p=Oe(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let _;return p.mutationQueue.lookupMutationBatch(g,d).next((T=>(we(T!==null,37113),_=T.keys(),p.mutationQueue.removeMutationBatch(g,T)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,_,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_))).next((()=>p.localDocuments.getDocuments(g,_)))}))})(i.localStore,e);lR(i,e,t),oR(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Cc(i,a)}catch(a){await Fa(a)}}function oR(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function lR(r,e,t){const i=Oe(r);let a=i.Vu[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.Vu[i.currentUser.toKey()]=a}}function dy(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),t&&r.Pu.yu(i,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((i=>{r.Ru.containsKey(i)||uR(r,i)}))}function uR(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(u_(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),E_(r))}function u0(r,e,t){for(const i of t)i instanceof rR?(r.Ru.addReference(i.key,e),XM(r,i)):i instanceof iR?(ce(v_,"Document no longer in limbo: "+i.key),r.Ru.removeReference(i.key,e),r.Ru.containsKey(i.key)||uR(r,i.key)):be(19791,{wu:i})}function XM(r,e){const t=e.key,i=t.path.canonicalString();r.du.get(t)||r.Eu.has(i)||(ce(v_,"New document in limbo: "+t),r.Eu.add(i),E_(r))}function E_(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new ge(Je.fromString(e)),i=r.fu.next();r.Au.set(i,new jM(t)),r.du=r.du.insert(t,i),WI(r.remoteStore,new Si(tr(Sc(t.path)),i,"TargetPurposeLimboResolution",er.ce))}}async function Cc(r,e,t){const i=Oe(r),a=[],l=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,p)=>{c.push(i.pu(p,e,t).then((g=>{if((g||t)&&i.isPrimaryClient){const _=g?!g.fromCache:t?.targetChanges.get(p.targetId)?.current;i.sharedClientState.updateQueryState(p.targetId,_?"current":"not-current")}if(g){a.push(g);const _=o_.As(p.targetId,g);l.push(_)}})))})),await Promise.all(c),i.Pu.H_(a),await(async function(p,g){const _=Oe(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>F.forEach(g,(b=>F.forEach(b.Es,(V=>_.persistence.referenceDelegate.addReference(T,b.targetId,V))).next((()=>F.forEach(b.ds,(V=>_.persistence.referenceDelegate.removeReference(T,b.targetId,V)))))))))}catch(T){if(!Ms(T))throw T;ce(l_,"Failed to update sequence numbers: "+T)}for(const T of g){const b=T.targetId;if(!T.fromCache){const V=_.Ms.get(b),B=V.snapshotVersion,L=V.withLastLimboFreeSnapshotVersion(B);_.Ms=_.Ms.insert(b,L)}}})(i.localStore,l))}async function WM(r,e){const t=Oe(r);if(!t.currentUser.isEqual(e)){ce(v_,"User change. New user:",e.toKey());const i=await KI(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((p=>{p.reject(new de(te.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Cc(t,i.Ls)}}function JM(r,e){const t=Oe(r),i=t.Au.get(e);if(i&&i.hu)return Ue().add(i.key);{let a=Ue();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const d=t.Tu.get(c);a=a.unionWith(d.view.nu)}return a}}function cR(r){const e=Oe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=aR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QM.bind(null,e),e.Pu.H_=MM.bind(null,e.eventManager),e.Pu.yu=kM.bind(null,e.eventManager),e}function hR(r){const e=Oe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=YM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$M.bind(null,e),e}class fc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return GI(this.persistence,new HI,e.initialUser,this.serializer)}Cu(e){return new s_(Md.mi,this.serializer)}Du(e){return new YI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}fc.provider={build:()=>new fc};class ZM extends fc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){we(this.persistence.referenceDelegate instanceof sd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new jI(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new s_((i=>sd.mi(i,t)),this.serializer)}}class ek extends fc{constructor(e,t,i){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await hR(this.xu.syncEngine),await Rc(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return GI(this.persistence,new HI,e.initialUser,this.serializer)}Fu(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new jI(i,e.asyncQueue,t)}Mu(e,t){const i=new sV(t,this.persistence);return new iV(e.asyncQueue,i)}Cu(e){const t=eM(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new a_(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,pM(),Mf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new YI}}class od{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>l0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=WM.bind(null,this.syncEngine),await OM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new PM})()}createDatastore(e){const t=kd(e.databaseInfo.databaseId),i=(function(l){return new mM(l)})(e.databaseInfo);return(function(l,c,d,p){return new vM(l,c,d,p)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,a,l,c,d){return new TM(i,a,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>l0(this.syncEngine,t,0)),(function(){return n0.v()?new n0:new cM})())}createSyncEngine(e,t){return(function(a,l,c,d,p,g,_){const T=new zM(a,l,c,d,p,g);return _&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=Oe(t);ce(Ua,"RemoteStore shutting down."),i.Ea.add(5),await Ic(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}od.provider={build:()=>new od};class T_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):mn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Os="FirestoreClient";class tk{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=rn.UNAUTHENTICATED,this.clientId=jy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async c=>{ce(Os,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(ce(Os,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=m_(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function ug(r,e){r.asyncQueue.verifyOperationInProgress(),ce(Os,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async a=>{i.isEqual(a)||(await KI(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function c0(r,e){r.asyncQueue.verifyOperationInProgress();const t=await nk(r);ce(Os,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>i0(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,a)=>i0(e.remoteStore,a))),r._onlineComponents=e}async function nk(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ce(Os,"Using user provided OfflineComponentProvider");try{await ug(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===te.FAILED_PRECONDITION||a.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Oa("Error using user provided cache. Falling back to memory cache: "+t),await ug(r,new fc)}}else ce(Os,"Using default OfflineComponentProvider"),await ug(r,new ZM(void 0));return r._offlineComponents}async function fR(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ce(Os,"Using user provided OnlineComponentProvider"),await c0(r,r._uninitializedComponentsProvider._online)):(ce(Os,"Using default OnlineComponentProvider"),await c0(r,new od))),r._onlineComponents}function rk(r){return fR(r).then((e=>e.syncEngine))}async function ld(r){const e=await fR(r),t=e.eventManager;return t.onListen=BM.bind(null,e.syncEngine),t.onUnlisten=HM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=FM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=GM.bind(null,e.syncEngine),t}function ik(r,e,t={}){const i=new Yr;return r.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,g){const _=new T_({next:b=>{_.Nu(),c.enqueueAndForget((()=>g_(l,T)));const V=b.docs.has(d);!V&&b.fromCache?g.reject(new de(te.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&b.fromCache&&p&&p.source==="server"?g.reject(new de(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(b)},error:b=>g.reject(b)}),T=new __(Sc(d.path),_,{includeMetadataChanges:!0,qa:!0});return p_(l,T)})(await ld(r),r.asyncQueue,e,t,i))),i.promise}function sk(r,e,t={}){const i=new Yr;return r.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,g){const _=new T_({next:b=>{_.Nu(),c.enqueueAndForget((()=>g_(l,T))),b.fromCache&&p.source==="server"?g.reject(new de(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(b)},error:b=>g.reject(b)}),T=new __(d,_,{includeMetadataChanges:!0,qa:!0});return p_(l,T)})(await ld(r),r.asyncQueue,e,t,i))),i.promise}function dR(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const h0=new Map;const mR="firestore.googleapis.com",f0=!0;class d0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=mR,this.ssl=f0}else this.host=e.host,this.ssl=e.ssl??f0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=MI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<LP)throw new de(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dR(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new de(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new de(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new de(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ud{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new d0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new d0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new HO;switch(i.type){case"firstParty":return new YO(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new de(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=h0.get(t);i&&(ce("ComponentProvider","Removing Datastore"),h0.delete(t),i.terminate())})(this),Promise.resolve()}}function ak(r,e,t,i={}){r=kn(r,Ud);const a=ja(e),l=r._getSettings(),c={...l,emulatorOptions:r._getEmulatorOptions()},d=`${e}:${t}`;a&&(wy(`https://${d}`),Iy("Firestore",!0)),l.host!==mR&&l.host!==d&&Oa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:d,ssl:a,emulatorOptions:i};if(!Ca(p,c)&&(r._setSettings(p),i.mockUserToken)){let g,_;if(typeof i.mockUserToken=="string")g=i.mockUserToken,_=rn.MOCK_USER;else{g=wA(i.mockUserToken,r._app?.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new de(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new rn(T)}r._authCredentials=new GO(new Tw(g,_))}}class Ls{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ls(this.firestore,e,this._query)}}class Ct{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ct(this.firestore,e,this._key)}toJSON(){return{type:Ct._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Ec(t,Ct._jsonSchema))return new Ct(e,i||null,new ge(Je.fromString(t.referencePath)))}}Ct._jsonSchemaVersion="firestore/documentReference/1.0",Ct._jsonSchema={type:jt("string",Ct._jsonSchemaVersion),referencePath:jt("string")};class Rs extends Ls{constructor(e,t,i){super(e,t,Sc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ct(this.firestore,null,new ge(e))}withConverter(e){return new Rs(this.firestore,e,this._path)}}function Du(r,e,...t){if(r=zt(r),Sw("collection","path",e),r instanceof Ud){const i=Je.fromString(e,...t);return rS(i),new Rs(r,null,i)}{if(!(r instanceof Ct||r instanceof Rs))throw new de(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Je.fromString(e,...t));return rS(i),new Rs(r.firestore,null,i)}}function Yu(r,e,...t){if(r=zt(r),arguments.length===1&&(e=jy.newId()),Sw("doc","path",e),r instanceof Ud){const i=Je.fromString(e,...t);return nS(i),new Ct(r,null,new ge(i))}{if(!(r instanceof Ct||r instanceof Rs))throw new de(te.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Je.fromString(e,...t));return nS(i),new Ct(r.firestore,r instanceof Rs?r.converter:null,new ge(i))}}const m0="AsyncQueue";class p0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new $I(this,"async_queue_retry"),this._c=()=>{const i=Mf();i&&ce(m0,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Mf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Mf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Yr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ms(e))throw e;ce(m0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,mn("INTERNAL UNHANDLED ERROR: ",g0(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=d_.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&be(47125,{Pc:g0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function g0(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}function y0(r){return(function(t,i){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of i)if(l in a&&typeof a[l]=="function")return!0;return!1})(r,["next","error","complete"])}class Ni extends Ud{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new p0,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new p0(e),this._firestoreClient=void 0,await e}}}function ok(r,e){const t=typeof r=="object"?r:Dy(),i=typeof r=="string"?r:Wf,a=pd(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=bA("firestore");l&&ak(a,...l)}return a}function jd(r){if(r._terminated)throw new de(te.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||pR(r),r._firestoreClient}function pR(r){const e=r._freezeSettings(),t=(function(a,l,c,d){return new PV(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,dR(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new tk(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(r._componentsProvider))}function lk(r,e){Oa("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings();return uk(r,od.provider,{build:i=>new ek(i,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function uk(r,e,t){if((r=kn(r,Ni))._firestoreClient||r._terminated)throw new de(te.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(r._componentsProvider||r._getSettings().localCache)throw new de(te.FAILED_PRECONDITION,"SDK cache is already specified.");r._componentsProvider={_online:e,_offline:t},pR(r)}class Zn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zn(Bt.fromBase64String(e))}catch(t){throw new de(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Zn(Bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Zn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ec(e,Zn._jsonSchema))return Zn.fromBase64String(e.bytes)}}Zn._jsonSchemaVersion="firestore/bytes/1.0",Zn._jsonSchema={type:jt("string",Zn._jsonSchemaVersion),bytes:jt("string")};class zd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class b_{constructor(e){this._methodName=e}}class $r{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:$r._jsonSchemaVersion}}static fromJSON(e){if(Ec(e,$r._jsonSchema))return new $r(e.latitude,e.longitude)}}$r._jsonSchemaVersion="firestore/geoPoint/1.0",$r._jsonSchema={type:jt("string",$r._jsonSchemaVersion),latitude:jt("number"),longitude:jt("number")};class Xr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Xr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ec(e,Xr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Xr(e.vectorValues);throw new de(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Xr._jsonSchemaVersion="firestore/vectorValue/1.0",Xr._jsonSchema={type:jt("string",Xr._jsonSchemaVersion),vectorValues:jt("object")};const ck=/^__.*__$/;class hk{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Oi(e,this.data,this.fieldMask,t,this.fieldTransforms):new yl(e,this.data,t,this.fieldTransforms)}}class gR{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Oi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function yR(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be(40011,{Ac:r})}}class S_{constructor(e,t,i,a,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new S_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ud(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(yR(this.Ac)&&ck.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class fk{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||kd(e)}Cc(e,t,i,a=!1){return new S_({Ac:e,methodName:t,Dc:i,path:_t.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function A_(r){const e=r._freezeSettings(),t=kd(r._databaseId);return new fk(r._databaseId,!!e.ignoreUndefinedProperties,t)}function dk(r,e,t,i,a,l={}){const c=r.Cc(l.merge||l.mergeFields?2:0,e,t,a);w_("Data must be an object, but it was:",c,i);const d=_R(i,c);let p,g;if(l.merge)p=new An(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const T of l.mergeFields){const b=my(e,T,t);if(!c.contains(b))throw new de(te.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);ER(_,b)||_.push(b)}p=new An(_),g=c.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,g=c.fieldTransforms;return new hk(new un(d),p,g)}class Bd extends b_{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bd}}function mk(r,e,t,i){const a=r.Cc(1,e,t);w_("Data must be an object, but it was:",a,i);const l=[],c=un.empty();ks(i,((p,g)=>{const _=I_(e,p,t);g=zt(g);const T=a.yc(_);if(g instanceof Bd)l.push(_);else{const b=Dc(g,T);b!=null&&(l.push(_),c.set(_,b))}}));const d=new An(l);return new gR(c,d,a.fieldTransforms)}function pk(r,e,t,i,a,l){const c=r.Cc(1,e,t),d=[my(e,i,t)],p=[a];if(l.length%2!=0)throw new de(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<l.length;b+=2)d.push(my(e,l[b])),p.push(l[b+1]);const g=[],_=un.empty();for(let b=d.length-1;b>=0;--b)if(!ER(g,d[b])){const V=d[b];let B=p[b];B=zt(B);const L=c.yc(V);if(B instanceof Bd)g.push(V);else{const k=Dc(B,L);k!=null&&(g.push(V),_.set(V,k))}}const T=new An(g);return new gR(_,T,c.fieldTransforms)}function gk(r,e,t,i=!1){return Dc(t,r.Cc(i?4:3,e))}function Dc(r,e){if(vR(r=zt(r)))return w_("Unsupported field value:",e,r),_R(r,e);if(r instanceof b_)return(function(i,a){if(!yR(a.Ac))throw a.Sc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,a){const l=[];let c=0;for(const d of i){let p=Dc(d,a.wc(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(r,e)}return(function(i,a){if((i=zt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return eP(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=nt.fromDate(i);return{timestampValue:ll(a.serializer,l)}}if(i instanceof nt){const l=new nt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ll(a.serializer,l)}}if(i instanceof $r)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Zn)return{bytesValue:vI(a.serializer,i._byteString)};if(i instanceof Ct){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:t_(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Xr)return(function(c,d){return{mapValue:{fields:{[Qy]:{stringValue:Yy},[nl]:{arrayValue:{values:c.toArray().map((g=>{if(typeof g!="number")throw d.Sc("VectorValues must only contain numeric values.");return Xy(d.serializer,g)}))}}}}}})(i,a);throw a.Sc(`Unsupported field value: ${Ed(i)}`)})(r,e)}function _R(r,e){const t={};return jw(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ks(r,((i,a)=>{const l=Dc(a,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function vR(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof nt||r instanceof $r||r instanceof Zn||r instanceof Ct||r instanceof b_||r instanceof Xr)}function w_(r,e,t){if(!vR(t)||!Aw(t)){const i=Ed(t);throw i==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+i)}}function my(r,e,t){if((e=zt(e))instanceof zd)return e._internalPath;if(typeof e=="string")return I_(r,e);throw ud("Field path arguments must be of type string or ",r,!1,void 0,t)}const yk=new RegExp("[~\\*/\\[\\]]");function I_(r,e,t){if(e.search(yk)>=0)throw ud(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new zd(...e.split("."))._internalPath}catch{throw ud(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function ud(r,e,t,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${i}`),c&&(p+=` in document ${a}`),p+=")"),new de(te.INVALID_ARGUMENT,d+r+p)}function ER(r,e){return r.some((t=>t.isEqual(e)))}class TR{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _k(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(R_("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class _k extends TR{data(){return super.data()}}function R_(r,e){return typeof e=="string"?I_(r,e):e instanceof zd?e._internalPath:e._delegate._internalPath}function bR(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new de(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class C_{}class SR extends C_{}function vk(r,e,...t){let i=[];e instanceof C_&&i.push(e),i=i.concat(t),(function(l){const c=l.filter((p=>p instanceof N_)).length,d=l.filter((p=>p instanceof D_)).length;if(c>1||c>0&&d>0)throw new de(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)r=a._apply(r);return r}class D_ extends SR{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new D_(e,t,i)}_apply(e){const t=this._parse(e);return AR(e._query,t),new Ls(e.firestore,e.converter,ty(e._query,t))}_parse(e){const t=A_(e.firestore);return(function(l,c,d,p,g,_,T){let b;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new de(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){v0(T,_);const B=[];for(const L of T)B.push(_0(p,l,L));b={arrayValue:{values:B}}}else b=_0(p,l,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||v0(T,_),b=gk(d,c,T,_==="in"||_==="not-in");return He.create(g,_,b)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class N_ extends C_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new N_(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:rt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let c=a;const d=l.getFlattenedFilters();for(const p of d)AR(c,p),c=ty(c,p)})(e._query,t),new Ls(e.firestore,e.converter,ty(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class x_ extends SR{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new x_(e,t)}_apply(e){const t=(function(a,l,c){if(a.startAt!==null)throw new de(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new de(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new uc(l,c)})(e._query,this._field,this._direction);return new Ls(e.firestore,e.converter,(function(a,l){const c=a.explicitOrderBy.concat([l]);return new gl(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function Ek(r,e="asc"){const t=e,i=R_("orderBy",r);return x_._create(i,t)}function _0(r,e,t){if(typeof(t=zt(t))=="string"){if(t==="")throw new de(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nI(e)&&t.indexOf("/")!==-1)throw new de(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Je.fromString(t));if(!ge.isDocumentKey(i))throw new de(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return oc(r,new ge(i))}if(t instanceof Ct)return oc(r,t._key);throw new de(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ed(t)}.`)}function v0(r,e){if(!Array.isArray(r)||r.length===0)throw new de(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function AR(r,e){const t=(function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(r.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new de(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Tk{convertValue(e,t="none"){switch(Ds(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Di(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw be(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return ks(e,((a,l)=>{i[a]=this.convertValue(l,t)})),i}convertVectorValue(e){const t=e.fields?.[nl].arrayValue?.values?.map((i=>pt(i.doubleValue)));return new Xr(t)}convertGeoPoint(e){return new $r(pt(e.latitude),pt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Id(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(sc(e));default:return null}}convertTimestamp(e){const t=Ci(e);return new nt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Je.fromString(e);we(DI(i),9688,{name:e});const a=new Va(i.get(1),i.get(3)),l=new ge(i.popFirst(5));return a.isEqual(t)||mn(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function bk(r,e,t){let i;return i=r?r.toFirestore(e):e,i}class Lu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ia extends TR{constructor(e,t,i,a,l,c){super(e,t,i,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new kf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(R_("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ia._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ia._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ia._jsonSchema={type:jt("string",Ia._jsonSchemaVersion),bundleSource:jt("string","DocumentSnapshot"),bundleName:jt("string"),bundle:jt("string")};class kf extends Ia{data(e={}){return super.data(e)}}class Ra{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Lu(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new kf(this._firestore,this._userDataWriter,i.key,i,new Lu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((d=>{const p=new kf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Lu(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new kf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Lu(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,_=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),_=c.indexOf(d.doc.key)),{type:Sk(d.type),doc:p,oldIndex:g,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ra._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=jy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Sk(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be(61501,{type:r})}}function Ak(r){r=kn(r,Ct);const e=kn(r.firestore,Ni);return ik(jd(e),r._key).then((t=>wR(e,r,t)))}Ra._jsonSchemaVersion="firestore/querySnapshot/1.0",Ra._jsonSchema={type:jt("string",Ra._jsonSchemaVersion),bundleSource:jt("string","QuerySnapshot"),bundleName:jt("string"),bundle:jt("string")};class O_ extends Tk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ct(this.firestore,null,t)}}function wk(r){r=kn(r,Ls);const e=kn(r.firestore,Ni),t=jd(e),i=new O_(e);return bR(r._query),sk(t,r._query).then((a=>new Ra(e,i,r,a)))}function E0(r,e,t,...i){r=kn(r,Ct);const a=kn(r.firestore,Ni),l=A_(a);let c;return c=typeof(e=zt(e))=="string"||e instanceof zd?pk(l,"updateDoc",r._key,e,t,i):mk(l,"updateDoc",r._key,e),V_(a,[c.toMutation(r._key,pn.exists(!0))])}function Ik(r){return V_(kn(r.firestore,Ni),[new xd(r._key,pn.none())])}function T0(r,e){const t=kn(r.firestore,Ni),i=Yu(r),a=bk(r.converter,e);return V_(t,[dk(A_(r.firestore),"addDoc",i._key,a,r.converter!==null,{}).toMutation(i._key,pn.exists(!1))]).then((()=>i))}function b0(r,...e){r=zt(r);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||y0(e[i])||(t=e[i++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(y0(e[i])){const p=e[i];e[i]=p.next?.bind(p),e[i+1]=p.error?.bind(p),e[i+2]=p.complete?.bind(p)}let l,c,d;if(r instanceof Ct)c=kn(r.firestore,Ni),d=Sc(r._key.path),l={next:p=>{e[i]&&e[i](wR(c,r,p))},error:e[i+1],complete:e[i+2]};else{const p=kn(r,Ls);c=kn(p.firestore,Ni),d=p._query;const g=new O_(c);l={next:_=>{e[i]&&e[i](new Ra(c,g,p,_))},error:e[i+1],complete:e[i+2]},bR(r._query)}return(function(g,_,T,b){const V=new T_(b),B=new __(_,V,T);return g.asyncQueue.enqueueAndForget((async()=>p_(await ld(g),B))),()=>{V.Nu(),g.asyncQueue.enqueueAndForget((async()=>g_(await ld(g),B)))}})(jd(c),d,a,l)}function V_(r,e){return(function(i,a){const l=new Yr;return i.asyncQueue.enqueueAndForget((async()=>KM(await rk(i),a,l))),l.promise})(jd(r),e)}function wR(r,e,t){const i=t.docs.get(e._key),a=new O_(r);return new Ia(r,a,e._key,i,new Lu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(a){pl=a})(za),Da(new Cs("firestore",((i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),d=new Ni(new KO(i.getProvider("auth-internal")),new $O(c,i.getProvider("app-check-internal")),(function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new de(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Va(g.options.projectId,_)})(c,a),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),Gr(Jb,Zb,e),Gr(Jb,Zb,"esm2020")})();var Rk="firebase",Ck="12.7.0";Gr(Rk,Ck,"app");const IR="firebasestorage.googleapis.com",Dk="storageBucket",Nk=120*1e3,xk=600*1e3;class ti extends ei{constructor(e,t,i=0){super(cg(e),`Firebase Storage: ${t} (${cg(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ti.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return cg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Jr;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Jr||(Jr={}));function cg(r){return"storage/"+r}function Ok(){const r="An unknown error occurred, please check the error payload for server response.";return new ti(Jr.UNKNOWN,r)}function Vk(){return new ti(Jr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Pk(){return new ti(Jr.CANCELED,"User canceled the upload/download.")}function Mk(r){return new ti(Jr.INVALID_URL,"Invalid URL '"+r+"'.")}function kk(r){return new ti(Jr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function S0(r){return new ti(Jr.INVALID_ARGUMENT,r)}function RR(){return new ti(Jr.APP_DELETED,"The Firebase app was deleted.")}function Lk(r){return new ti(Jr.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class _r{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=_r.makeFromUrl(e,t)}catch{return new _r(e,"")}if(i.path==="")return i;throw kk(e)}static makeFromUrl(e,t){let i=null;const a="([A-Za-z0-9.\\-_]+)";function l(ue){ue.path.charAt(ue.path.length-1)==="/"&&(ue.path_=ue.path_.slice(0,-1))}const c="(/(.*))?$",d=new RegExp("^gs://"+a+c,"i"),p={bucket:1,path:3};function g(ue){ue.path_=decodeURIComponent(ue.path)}const _="v[A-Za-z0-9_]+",T=t.replace(/[.]/g,"\\."),b="(/([^?#]*).*)?$",V=new RegExp(`^https?://${T}/${_}/b/${a}/o${b}`,"i"),B={bucket:1,path:3},L=t===IR?"(?:storage.googleapis.com|storage.cloud.google.com)":t,k="([^?#]*)",ie=new RegExp(`^https?://${L}/${a}/${k}`,"i"),X=[{regex:d,indices:p,postModify:l},{regex:V,indices:B,postModify:g},{regex:ie,indices:{bucket:1,path:2},postModify:g}];for(let ue=0;ue<X.length;ue++){const he=X[ue],oe=he.regex.exec(e);if(oe){const C=oe[he.indices.bucket];let w=oe[he.indices.path];w||(w=""),i=new _r(C,w),he.postModify(i);break}}if(i==null)throw Mk(e);return i}}class Uk{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function jk(r,e,t){let i=1,a=null,l=null,c=!1,d=0;function p(){return d===2}let g=!1;function _(...k){g||(g=!0,e.apply(null,k))}function T(k){a=setTimeout(()=>{a=null,r(V,p())},k)}function b(){l&&clearTimeout(l)}function V(k,...ie){if(g){b();return}if(k){b(),_.call(null,k,...ie);return}if(p()||c){b(),_.call(null,k,...ie);return}i<64&&(i*=2);let X;d===1?(d=2,X=0):X=(i+Math.random())*1e3,T(X)}let B=!1;function L(k){B||(B=!0,b(),!g&&(a!==null?(k||(d=2),clearTimeout(a),T(0)):k||(d=1)))}return T(0),l=setTimeout(()=>{c=!0,L(!0)},t),L}function zk(r){r(!1)}function Bk(r){return r!==void 0}function A0(r,e,t,i){if(i<e)throw S0(`Invalid value for '${r}'. Expected ${e} or greater.`);if(i>t)throw S0(`Invalid value for '${r}'. Expected ${t} or less.`)}function Fk(r){const e=encodeURIComponent;let t="?";for(const i in r)if(r.hasOwnProperty(i)){const a=e(i)+"="+e(r[i]);t=t+a+"&"}return t=t.slice(0,-1),t}var cd;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(cd||(cd={}));function qk(r,e){const t=r>=500&&r<600,a=[408,429].indexOf(r)!==-1,l=e.indexOf(r)!==-1;return t||a||l}class Hk{constructor(e,t,i,a,l,c,d,p,g,_,T,b=!0,V=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=p,this.timeout_=g,this.progressCallback_=_,this.connectionFactory_=T,this.retry=b,this.isUsingEmulator=V,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((B,L)=>{this.resolve_=B,this.reject_=L,this.start_()})}start_(){const e=(i,a)=>{if(a){i(!1,new yf(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const c=d=>{const p=d.loaded,g=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,g)};this.progressCallback_!==null&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const d=l.getErrorCode()===cd.NO_ERROR,p=l.getStatus();if(!d||qk(p,this.additionalRetryCodes_)&&this.retry){const _=l.getErrorCode()===cd.ABORT;i(!1,new yf(!1,null,_));return}const g=this.successCodes_.indexOf(p)!==-1;i(!0,new yf(g,l))})},t=(i,a)=>{const l=this.resolve_,c=this.reject_,d=a.connection;if(a.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());Bk(p)?l(p):l()}catch(p){c(p)}else if(d!==null){const p=Ok();p.serverResponse=d.getErrorText(),this.errorCallback_?c(this.errorCallback_(d,p)):c(p)}else if(a.canceled){const p=this.appDelete_?RR():Pk();c(p)}else{const p=Vk();c(p)}};this.canceled_?t(!1,new yf(!1,null,!0)):this.backoffId_=jk(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&zk(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class yf{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function Gk(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function Kk(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Qk(r,e){e&&(r["X-Firebase-GMPID"]=e)}function Yk(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function $k(r,e,t,i,a,l,c=!0,d=!1){const p=Fk(r.urlParams),g=r.url+p,_=Object.assign({},r.headers);return Qk(_,e),Gk(_,t),Kk(_,l),Yk(_,i),new Hk(g,r.method,_,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,a,c,d)}function Xk(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function Wk(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}class hd{constructor(e,t){this._service=e,t instanceof _r?this._location=t:this._location=_r.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new hd(e,t)}get root(){const e=new _r(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Wk(this._location.path)}get storage(){return this._service}get parent(){const e=Xk(this._location.path);if(e===null)return null;const t=new _r(this._location.bucket,e);return new hd(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Lk(e)}}function w0(r,e){const t=e?.[Dk];return t==null?null:_r.makeFromBucketSpec(t,r)}function Jk(r,e,t,i={}){r.host=`${e}:${t}`;const a=ja(e);a&&(wy(`https://${r.host}/b`),Iy("Storage",!0)),r._isUsingEmulator=!0,r._protocol=a?"https":"http";const{mockUserToken:l}=i;l&&(r._overrideAuthToken=typeof l=="string"?l:wA(l,r.app.options.projectId))}class Zk{constructor(e,t,i,a,l,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=a,this._firebaseVersion=l,this._isUsingEmulator=c,this._bucket=null,this._host=IR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Nk,this._maxUploadRetryTime=xk,this._requests=new Set,a!=null?this._bucket=_r.makeFromBucketSpec(a,this._host):this._bucket=w0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=_r.makeFromBucketSpec(this._url,e):this._bucket=w0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){A0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){A0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new hd(this,e)}_makeRequest(e,t,i,a,l=!0){if(this._deleted)return new Uk(RR());{const c=$k(e,this._appId,i,a,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[i,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,a).getPromise()}}const I0="@firebase/storage",R0="0.14.0";const CR="storage";function eL(r=Dy(),e){r=zt(r);const i=pd(r,CR).getImmediate({identifier:e}),a=bA("storage");return a&&tL(i,...a),i}function tL(r,e,t,i={}){Jk(r,e,t,i)}function nL(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),i=r.getProvider("auth-internal"),a=r.getProvider("app-check-internal");return new Zk(t,i,a,e,za)}function rL(){Da(new Cs(CR,nL,"PUBLIC").setMultipleInstances(!0)),Gr(I0,R0,""),Gr(I0,R0,"esm2020")}rL();const iL={apiKey:"AIzaSyB5M2V4De0XU5y--e09NPStfuKjSr0DAdQ",authDomain:"faktureapp.firebaseapp.com",projectId:"faktureapp",storageBucket:"faktureapp.firebasestorage.app",messagingSenderId:"23563095646",appId:"1:23563095646:web:a707840c2dc8c9733aeecf"},P_=OA(iL),hg=FO(P_),Br=ok(P_);eL(P_);lk(Br).catch(r=>{r.code==="failed-precondition"?console.warn("Offline persistence can only be enabled in one tab at a time."):r.code==="unimplemented"&&console.warn("The current browser does not support offline persistence.")});const DR=z.createContext(void 0),Nc=()=>{const r=z.useContext(DR);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r},sL=({children:r})=>{const[e,t]=z.useState(null),[i,a]=z.useState(null),[l,c]=z.useState(!0);z.useEffect(()=>N2(hg,async T=>{if(t(T),T){const b=await Ak(Yu(Br,"users",T.uid));b.exists()&&a(b.data())}else a(null);c(!1)}),[]);const g={currentUser:e,userData:i,loading:l,signIn:async(_,T)=>{await R2(hg,_,T)},signOut:async()=>{await x2(hg),a(null)}};return R.jsx(DR.Provider,{value:g,children:r})},aL=r=>{const e=new Date(r);for(e.setDate(e.getDate()+1);e.getDay()===0||e.getDay()===6;)e.setDate(e.getDate()+1);return e},NR=z.createContext(void 0),Fd=()=>{const r=z.useContext(NR);if(r===void 0)throw new Error("useInvoices must be used within an InvoiceProvider");return r},oL=({children:r})=>{const[e,t]=z.useState([]),[i,a]=z.useState([]),[l,c]=z.useState(!0),[d,p]=z.useState("all"),{currentUser:g}=Nc();z.useEffect(()=>{if(!g){t([]),a([]),c(!1);return}const oe=vk(Du(Br,"invoices"),Ek("datumDospeca","asc")),C=b0(oe,P=>{const x=[];P.forEach(U=>{x.push({id:U.id,...U.data()})}),t(x),c(!1)});(async()=>{const P=await wk(Du(Br,"suppliers")),x=[];P.forEach(U=>{x.push({id:U.id,...U.data()})}),a(x)})();const D=b0(Du(Br,"suppliers"),P=>{const x=[];P.forEach(U=>{x.push({id:U.id,...U.data()})}),a(x)});return()=>{C(),D()}},[g]);const _=async oe=>{if(!g)throw new Error("Must be logged in");await T0(Du(Br,"invoices"),{...oe,createdAt:Date.now(),updatedAt:Date.now(),createdBy:g.uid})},T=async(oe,C)=>{await E0(Yu(Br,"invoices",oe),{...C,updatedAt:Date.now()})},b=async oe=>{await Ik(Yu(Br,"invoices",oe))},V=async oe=>{await T(oe.id,{status:oe.status==="placeno"?"neplaceno":"placeno"})},B=()=>d==="all"?e:e.filter(oe=>oe.kompanija===d),L=()=>{const oe=new Date().toISOString().split("T")[0];return B().filter(C=>C.datumDospeca===oe&&C.status==="neplaceno")},k=()=>{const w=aL(new Date).toISOString().split("T")[0];return B().filter(D=>D.datumDospeca===w&&D.status==="neplaceno")},ie=()=>{const oe=new Date().toISOString().split("T")[0];return B().filter(C=>C.datumDospeca<oe&&C.status==="neplaceno")},K=oe=>{const C=oe.toLowerCase();return B().filter(w=>w.dobavljac.toLowerCase().includes(C)||w.brojFakture.toLowerCase().includes(C))},X=oe=>{if(!oe||oe.length<2)return[];const C=oe.toLowerCase(),w=i.filter(P=>P.name.toLowerCase().includes(C)),D=new Map;for(const P of w){const x=P.name.toLowerCase();D.has(x)||D.set(x,P)}return Array.from(D.values())},ue=async(oe,C,w)=>{if(!oe)return;const D=i.find(P=>P.name.toLowerCase()===oe.toLowerCase());D?(D.brojRacuna!==w||D.pib!==C)&&await E0(Yu(Br,"suppliers",D.id),{pib:C,brojRacuna:w,updatedAt:Date.now()}):await T0(Du(Br,"suppliers"),{name:oe,pib:C,brojRacuna:w,createdAt:Date.now(),updatedAt:Date.now()})},he={invoices:B(),suppliers:i,loading:l,selectedCompany:d,setSelectedCompany:p,addInvoice:_,updateInvoice:T,deleteInvoice:b,toggleStatus:V,getDueToday:L,getDueTomorrow:k,getOverdue:ie,searchInvoices:K,getSupplierSuggestions:X,addOrUpdateSupplier:ue};return R.jsx(NR.Provider,{value:he,children:r})},lL=()=>{const[r,e]=z.useState(""),[t,i]=z.useState(""),[a,l]=z.useState(""),[c,d]=z.useState(!1),{signIn:p}=Nc(),g=vy(),_=async T=>{T.preventDefault(),l(""),d(!0);try{await p(r,t),g("/")}catch(b){b.code==="auth/user-not-found"||b.code==="auth/wrong-password"?l("Pogrean email ili lozinka"):b.code==="auth/invalid-email"?l("Neispravan format email adrese"):l("Greka pri prijavljivanju. Pokuajte ponovo.")}finally{d(!1)}};return R.jsx("div",{className:"login-container",children:R.jsxs("div",{className:"login-card",children:[R.jsx("h1",{children:"Upravljanje Fakturama"}),R.jsx("p",{className:"subtitle",children:"Prijavite se na va nalog"}),a&&R.jsx("div",{className:"error-message",children:a}),R.jsxs("form",{onSubmit:_,children:[R.jsxs("div",{className:"form-group",children:[R.jsx("label",{htmlFor:"email",children:"Email adresa"}),R.jsx("input",{type:"email",id:"email",value:r,onChange:T=>e(T.target.value),placeholder:"vasa@email.com",required:!0,disabled:c})]}),R.jsxs("div",{className:"form-group",children:[R.jsx("label",{htmlFor:"password",children:"Lozinka"}),R.jsx("input",{type:"password",id:"password",value:t,onChange:T=>i(T.target.value),placeholder:"",required:!0,disabled:c})]}),R.jsx("button",{type:"submit",className:"login-button",disabled:c,children:c?"Prijavljivanje...":"Prijavi se"})]})]})})},uL=({invoices:r,onEdit:e})=>{const{toggleStatus:t,deleteInvoice:i}=Fd(),a=g=>g?new Date(g).toLocaleDateString("sr-RS"):"-",l=(g,_)=>`${g.toLocaleString("sr-RS",{minimumFractionDigits:2})} ${_}`,c=g=>{if(g.status==="placeno")return!1;const _=new Date().toISOString().split("T")[0];return g.datumDospeca<_},d=g=>{if(g.status==="placeno")return!1;const _=new Date().toISOString().split("T")[0];return g.datumDospeca===_},p=async g=>{window.confirm(`Da li ste sigurni da elite da obriete fakturu ${g.brojFakture}?`)&&await i(g.id)};return r.length===0?R.jsx("div",{className:"empty-state",children:R.jsx("p",{children:"Nema faktura za prikaz"})}):R.jsxs("div",{className:"invoice-list",children:[R.jsxs("table",{className:"invoice-table desktop-view",children:[R.jsx("thead",{children:R.jsxs("tr",{children:[R.jsx("th",{children:"Br. fakture"}),R.jsx("th",{children:"Dobavlja"}),R.jsx("th",{children:"Datum dospea"}),R.jsx("th",{children:"Iznos"}),R.jsx("th",{children:"Status"}),R.jsx("th",{children:"Akcije"})]})}),R.jsx("tbody",{children:r.map(g=>R.jsxs("tr",{className:`
                ${g.status==="placeno"?"paid":""}
                ${c(g)?"overdue":""}
                ${d(g)?"due-today":""}
              `,children:[R.jsx("td",{children:g.brojFakture}),R.jsx("td",{children:R.jsxs("div",{className:"supplier-cell",children:[R.jsx("span",{className:"supplier-name",children:g.dobavljac}),g.brojRacunaZaUplatu&&R.jsxs("span",{className:"bank-account",children:["Raun: ",g.brojRacunaZaUplatu]}),g.kompanija&&R.jsx("span",{className:"company-tag",children:g.kompanija})]})}),R.jsx("td",{children:R.jsxs("span",{className:d(g)?"today-badge":"",children:[a(g.datumDospeca),d(g)&&" (Danas)"]})}),R.jsx("td",{className:"amount",children:l(g.iznosZaPlacanje,g.valuta)}),R.jsx("td",{children:R.jsx("button",{className:`status-badge ${g.status}`,onClick:()=>t(g),children:g.status==="placeno"?"Plaeno":"Neplaeno"})}),R.jsxs("td",{className:"actions",children:[g.imageUrl&&R.jsx("button",{onClick:()=>window.open(g.imageUrl,"_blank"),className:"view-attachment-btn",title:"Pogledaj prilog",children:""}),R.jsx("button",{onClick:()=>e(g),className:"edit-btn",children:"Izmeni"}),R.jsx("button",{onClick:()=>p(g),className:"delete-btn",children:"Obrii"})]})]},g.id))})]}),R.jsx("div",{className:"invoice-cards mobile-view",children:r.map(g=>R.jsxs("div",{className:`invoice-card
              ${g.status==="placeno"?"paid":""}
              ${c(g)?"overdue":""}
              ${d(g)?"due-today":""}
            `,children:[R.jsxs("div",{className:"card-header",children:[R.jsx("span",{className:"invoice-number",children:g.brojFakture}),R.jsx("button",{className:`status-badge ${g.status}`,onClick:()=>t(g),children:g.status==="placeno"?"Plaeno":"Neplaeno"})]}),R.jsxs("div",{className:"card-body",children:[R.jsx("div",{className:"supplier",children:g.dobavljac}),g.brojRacunaZaUplatu&&R.jsxs("div",{className:"bank-account",children:["Raun: ",g.brojRacunaZaUplatu]}),R.jsx("span",{className:"company-tag",children:g.kompanija}),R.jsxs("div",{className:"card-details",children:[R.jsxs("div",{className:"detail",children:[R.jsx("span",{className:"label",children:"Dospee:"}),R.jsxs("span",{className:d(g)?"today-badge":"",children:[a(g.datumDospeca),d(g)&&" (Danas)"]})]}),R.jsxs("div",{className:"detail amount",children:[R.jsx("span",{className:"label",children:"Iznos:"}),R.jsx("span",{children:l(g.iznosZaPlacanje,g.valuta)})]})]})]}),R.jsxs("div",{className:"card-actions",children:[g.imageUrl&&R.jsx("button",{onClick:()=>window.open(g.imageUrl,"_blank"),className:"view-attachment-btn",title:"Pogledaj prilog",children:" Prilog"}),R.jsx("button",{onClick:()=>e(g),className:"edit-btn",children:"Izmeni"}),R.jsx("button",{onClick:()=>p(g),className:"delete-btn",children:"Obrii"})]})]},g.id))})]})};var fg={exports:{}},C0;function cL(){return C0||(C0=1,(function(r){var e=(function(t){var i=Object.prototype,a=i.hasOwnProperty,l=Object.defineProperty||function(re,ee,I){re[ee]=I.value},c,d=typeof Symbol=="function"?Symbol:{},p=d.iterator||"@@iterator",g=d.asyncIterator||"@@asyncIterator",_=d.toStringTag||"@@toStringTag";function T(re,ee,I){return Object.defineProperty(re,ee,{value:I,enumerable:!0,configurable:!0,writable:!0}),re[ee]}try{T({},"")}catch{T=function(ee,I,H){return ee[I]=H}}function b(re,ee,I,H){var Z=ee&&ee.prototype instanceof X?ee:X,le=Object.create(Z.prototype),Ee=new J(H||[]);return l(le,"_invoke",{value:U(re,I,Ee)}),le}t.wrap=b;function V(re,ee,I){try{return{type:"normal",arg:re.call(ee,I)}}catch(H){return{type:"throw",arg:H}}}var B="suspendedStart",L="suspendedYield",k="executing",ie="completed",K={};function X(){}function ue(){}function he(){}var oe={};T(oe,p,function(){return this});var C=Object.getPrototypeOf,w=C&&C(C(fe([])));w&&w!==i&&a.call(w,p)&&(oe=w);var D=he.prototype=X.prototype=Object.create(oe);ue.prototype=he,l(D,"constructor",{value:he,configurable:!0}),l(he,"constructor",{value:ue,configurable:!0}),ue.displayName=T(he,_,"GeneratorFunction");function P(re){["next","throw","return"].forEach(function(ee){T(re,ee,function(I){return this._invoke(ee,I)})})}t.isGeneratorFunction=function(re){var ee=typeof re=="function"&&re.constructor;return ee?ee===ue||(ee.displayName||ee.name)==="GeneratorFunction":!1},t.mark=function(re){return Object.setPrototypeOf?Object.setPrototypeOf(re,he):(re.__proto__=he,T(re,_,"GeneratorFunction")),re.prototype=Object.create(D),re},t.awrap=function(re){return{__await:re}};function x(re,ee){function I(le,Ee,ve,me){var Se=V(re[le],re,Ee);if(Se.type==="throw")me(Se.arg);else{var ye=Se.arg,Ce=ye.value;return Ce&&typeof Ce=="object"&&a.call(Ce,"__await")?ee.resolve(Ce.__await).then(function(Ge){I("next",Ge,ve,me)},function(Ge){I("throw",Ge,ve,me)}):ee.resolve(Ce).then(function(Ge){ye.value=Ge,ve(ye)},function(Ge){return I("throw",Ge,ve,me)})}}var H;function Z(le,Ee){function ve(){return new ee(function(me,Se){I(le,Ee,me,Se)})}return H=H?H.then(ve,ve):ve()}l(this,"_invoke",{value:Z})}P(x.prototype),T(x.prototype,g,function(){return this}),t.AsyncIterator=x,t.async=function(re,ee,I,H,Z){Z===void 0&&(Z=Promise);var le=new x(b(re,ee,I,H),Z);return t.isGeneratorFunction(ee)?le:le.next().then(function(Ee){return Ee.done?Ee.value:le.next()})};function U(re,ee,I){var H=B;return function(le,Ee){if(H===k)throw new Error("Generator is already running");if(H===ie){if(le==="throw")throw Ee;return _e()}for(I.method=le,I.arg=Ee;;){var ve=I.delegate;if(ve){var me=N(ve,I);if(me){if(me===K)continue;return me}}if(I.method==="next")I.sent=I._sent=I.arg;else if(I.method==="throw"){if(H===B)throw H=ie,I.arg;I.dispatchException(I.arg)}else I.method==="return"&&I.abrupt("return",I.arg);H=k;var Se=V(re,ee,I);if(Se.type==="normal"){if(H=I.done?ie:L,Se.arg===K)continue;return{value:Se.arg,done:I.done}}else Se.type==="throw"&&(H=ie,I.method="throw",I.arg=Se.arg)}}}function N(re,ee){var I=ee.method,H=re.iterator[I];if(H===c)return ee.delegate=null,I==="throw"&&re.iterator.return&&(ee.method="return",ee.arg=c,N(re,ee),ee.method==="throw")||I!=="return"&&(ee.method="throw",ee.arg=new TypeError("The iterator does not provide a '"+I+"' method")),K;var Z=V(H,re.iterator,ee.arg);if(Z.type==="throw")return ee.method="throw",ee.arg=Z.arg,ee.delegate=null,K;var le=Z.arg;if(!le)return ee.method="throw",ee.arg=new TypeError("iterator result is not an object"),ee.delegate=null,K;if(le.done)ee[re.resultName]=le.value,ee.next=re.nextLoc,ee.method!=="return"&&(ee.method="next",ee.arg=c);else return le;return ee.delegate=null,K}P(D),T(D,_,"Generator"),T(D,p,function(){return this}),T(D,"toString",function(){return"[object Generator]"});function Le(re){var ee={tryLoc:re[0]};1 in re&&(ee.catchLoc=re[1]),2 in re&&(ee.finallyLoc=re[2],ee.afterLoc=re[3]),this.tryEntries.push(ee)}function ut(re){var ee=re.completion||{};ee.type="normal",delete ee.arg,re.completion=ee}function J(re){this.tryEntries=[{tryLoc:"root"}],re.forEach(Le,this),this.reset(!0)}t.keys=function(re){var ee=Object(re),I=[];for(var H in ee)I.push(H);return I.reverse(),function Z(){for(;I.length;){var le=I.pop();if(le in ee)return Z.value=le,Z.done=!1,Z}return Z.done=!0,Z}};function fe(re){if(re){var ee=re[p];if(ee)return ee.call(re);if(typeof re.next=="function")return re;if(!isNaN(re.length)){var I=-1,H=function Z(){for(;++I<re.length;)if(a.call(re,I))return Z.value=re[I],Z.done=!1,Z;return Z.value=c,Z.done=!0,Z};return H.next=H}}return{next:_e}}t.values=fe;function _e(){return{value:c,done:!0}}return J.prototype={constructor:J,reset:function(re){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(ut),!re)for(var ee in this)ee.charAt(0)==="t"&&a.call(this,ee)&&!isNaN(+ee.slice(1))&&(this[ee]=c)},stop:function(){this.done=!0;var re=this.tryEntries[0],ee=re.completion;if(ee.type==="throw")throw ee.arg;return this.rval},dispatchException:function(re){if(this.done)throw re;var ee=this;function I(me,Se){return le.type="throw",le.arg=re,ee.next=me,Se&&(ee.method="next",ee.arg=c),!!Se}for(var H=this.tryEntries.length-1;H>=0;--H){var Z=this.tryEntries[H],le=Z.completion;if(Z.tryLoc==="root")return I("end");if(Z.tryLoc<=this.prev){var Ee=a.call(Z,"catchLoc"),ve=a.call(Z,"finallyLoc");if(Ee&&ve){if(this.prev<Z.catchLoc)return I(Z.catchLoc,!0);if(this.prev<Z.finallyLoc)return I(Z.finallyLoc)}else if(Ee){if(this.prev<Z.catchLoc)return I(Z.catchLoc,!0)}else if(ve){if(this.prev<Z.finallyLoc)return I(Z.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(re,ee){for(var I=this.tryEntries.length-1;I>=0;--I){var H=this.tryEntries[I];if(H.tryLoc<=this.prev&&a.call(H,"finallyLoc")&&this.prev<H.finallyLoc){var Z=H;break}}Z&&(re==="break"||re==="continue")&&Z.tryLoc<=ee&&ee<=Z.finallyLoc&&(Z=null);var le=Z?Z.completion:{};return le.type=re,le.arg=ee,Z?(this.method="next",this.next=Z.finallyLoc,K):this.complete(le)},complete:function(re,ee){if(re.type==="throw")throw re.arg;return re.type==="break"||re.type==="continue"?this.next=re.arg:re.type==="return"?(this.rval=this.arg=re.arg,this.method="return",this.next="end"):re.type==="normal"&&ee&&(this.next=ee),K},finish:function(re){for(var ee=this.tryEntries.length-1;ee>=0;--ee){var I=this.tryEntries[ee];if(I.finallyLoc===re)return this.complete(I.completion,I.afterLoc),ut(I),K}},catch:function(re){for(var ee=this.tryEntries.length-1;ee>=0;--ee){var I=this.tryEntries[ee];if(I.tryLoc===re){var H=I.completion;if(H.type==="throw"){var Z=H.arg;ut(I)}return Z}}throw new Error("illegal catch attempt")},delegateYield:function(re,ee,I){return this.delegate={iterator:fe(re),resultName:ee,nextLoc:I},this.method==="next"&&(this.arg=c),K}},t})(r.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(fg)),fg.exports}var dg,D0;function M_(){return D0||(D0=1,dg=(r,e)=>`${r}-${e}-${Math.random().toString(16).slice(3,8)}`),dg}var mg,N0;function xR(){if(N0)return mg;N0=1;const r=M_();let e=0;return mg=({id:t,action:i,payload:a={}})=>{let l=t;return typeof l>"u"&&(l=r("Job",e),e+=1),{id:l,action:i,payload:a}},mg}var Nu={},x0;function k_(){if(x0)return Nu;x0=1;let r=!1;return Nu.logging=r,Nu.setLogging=e=>{r=e},Nu.log=(...e)=>r?console.log.apply(this,e):null,Nu}var pg,O0;function hL(){if(O0)return pg;O0=1;const r=xR(),{log:e}=k_(),t=M_();let i=0;return pg=()=>{const a=t("Scheduler",i),l={},c={};let d=[];i+=1;const p=()=>d.length,g=()=>Object.keys(l).length,_=()=>{if(d.length!==0){const L=Object.keys(l);for(let k=0;k<L.length;k+=1)if(typeof c[L[k]]>"u"){d[0](l[L[k]]);break}}},T=(L,k)=>new Promise((ie,K)=>{const X=r({action:L,payload:k});d.push(async ue=>{d.shift(),c[ue.id]=X;try{ie(await ue[L].apply(this,[...k,X.id]))}catch(he){K(he)}finally{delete c[ue.id],_()}}),e(`[${a}]: Add ${X.id} to JobQueue`),e(`[${a}]: JobQueue length=${d.length}`),_()});return{addWorker:L=>(l[L.id]=L,e(`[${a}]: Add ${L.id}`),e(`[${a}]: Number of workers=${g()}`),_(),L.id),addJob:async(L,...k)=>{if(g()===0)throw Error(`[${a}]: You need to have at least one worker before adding jobs`);return T(L,k)},terminate:async()=>{Object.keys(l).forEach(async L=>{await l[L].terminate()}),d=[]},getQueueLen:p,getNumWorkers:g}},pg}function fL(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var gg,V0;function dL(){return V0||(V0=1,gg=r=>{const e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof fL=="function"&&(e.type="node"),typeof r>"u"?e:e[r]}),gg}var yg,P0;function mL(){if(P0)return yg;P0=1;const e=dL()("type")==="browser"?t=>new URL(t,window.location.href).href:t=>t;return yg=t=>{const i={...t};return["corePath","workerPath","langPath"].forEach(a=>{t[a]&&(i[a]=e(i[a]))}),i},yg}var _g,M0;function OR(){return M0||(M0=1,_g={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),_g}const pL="7.0.0",gL={version:pL};var vg,k0;function yL(){return k0||(k0=1,vg={workerBlobURL:!0,logger:()=>{}}),vg}var Eg,L0;function _L(){if(L0)return Eg;L0=1;const r=gL.version;return Eg={...yL(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${r}/dist/worker.min.js`},Eg}var Tg,U0;function vL(){return U0||(U0=1,Tg=({workerPath:r,workerBlobURL:e})=>{let t;if(Blob&&URL&&e){const i=new Blob([`importScripts("${r}");`],{type:"application/javascript"});t=new Worker(URL.createObjectURL(i))}else t=new Worker(r);return t}),Tg}var bg,j0;function EL(){return j0||(j0=1,bg=r=>{r.terminate()}),bg}var Sg,z0;function TL(){return z0||(z0=1,Sg=(r,e)=>{r.onmessage=({data:t})=>{e(t)}}),Sg}var Ag,B0;function bL(){return B0||(B0=1,Ag=async(r,e)=>{r.postMessage(e)}),Ag}var wg,F0;function SL(){if(F0)return wg;F0=1;const r=t=>new Promise((i,a)=>{const l=new FileReader;l.onload=()=>{i(l.result)},l.onerror=({target:{error:{code:c}}})=>{a(Error(`File could not be read! Code=${c}`))},l.readAsArrayBuffer(t)}),e=async t=>{let i=t;if(typeof t>"u")return"undefined";if(typeof t=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(t)?i=atob(t.split(",")[1]).split("").map(a=>a.charCodeAt(0)):i=await(await fetch(t)).arrayBuffer();else if(typeof HTMLElement<"u"&&t instanceof HTMLElement)t.tagName==="IMG"&&(i=await e(t.src)),t.tagName==="VIDEO"&&(i=await e(t.poster)),t.tagName==="CANVAS"&&await new Promise(a=>{t.toBlob(async l=>{i=await r(l),a()})});else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas){const a=await t.convertToBlob();i=await r(a)}else(t instanceof File||t instanceof Blob)&&(i=await r(t));return new Uint8Array(i)};return wg=e,wg}var Ig,q0;function AL(){if(q0)return Ig;q0=1;const r=_L(),e=vL(),t=EL(),i=TL(),a=bL(),l=SL();return Ig={defaultOptions:r,spawnWorker:e,terminateWorker:t,onMessage:i,send:a,loadImage:l},Ig}var Rg,H0;function VR(){if(H0)return Rg;H0=1;const r=mL(),e=xR(),{log:t}=k_(),i=M_(),a=OR(),{defaultOptions:l,spawnWorker:c,terminateWorker:d,onMessage:p,loadImage:g,send:_}=AL();let T=0;return Rg=async(b="eng",V=a.LSTM_ONLY,B={},L={})=>{const k=i("Worker",T),{logger:ie,errorHandler:K,...X}=r({...l,...B}),ue={},he=typeof b=="string"?b.split("+"):b;let oe=V,C=L;const w=[a.DEFAULT,a.LSTM_ONLY].includes(V)&&!X.legacyCore;let D,P;const x=new Promise((ye,Ce)=>{P=ye,D=Ce}),U=ye=>{D(ye.message)};let N=c(X);N.onerror=U,T+=1;const Le=({id:ye,action:Ce,payload:Ge})=>new Promise((bt,Ft)=>{t(`[${k}]: Start ${ye}, action=${Ce}`);const St=`${Ce}-${ye}`;ue[St]={resolve:bt,reject:Ft},_(N,{workerId:k,jobId:ye,action:Ce,payload:Ge})}),ut=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),J=ye=>Le(e({id:ye,action:"load",payload:{options:{lstmOnly:w,corePath:X.corePath,logging:X.logging}}})),fe=(ye,Ce,Ge)=>Le(e({id:Ge,action:"FS",payload:{method:"writeFile",args:[ye,Ce]}})),_e=(ye,Ce)=>Le(e({id:Ce,action:"FS",payload:{method:"readFile",args:[ye,{encoding:"utf8"}]}})),re=(ye,Ce)=>Le(e({id:Ce,action:"FS",payload:{method:"unlink",args:[ye]}})),ee=(ye,Ce,Ge)=>Le(e({id:Ge,action:"FS",payload:{method:ye,args:Ce}})),I=(ye,Ce)=>Le(e({id:Ce,action:"loadLanguage",payload:{langs:ye,options:{langPath:X.langPath,dataPath:X.dataPath,cachePath:X.cachePath,cacheMethod:X.cacheMethod,gzip:X.gzip,lstmOnly:[a.DEFAULT,a.LSTM_ONLY].includes(oe)&&!X.legacyLang}}})),H=(ye,Ce,Ge,bt)=>Le(e({id:bt,action:"initialize",payload:{langs:ye,oem:Ce,config:Ge}})),Z=(ye="eng",Ce,Ge,bt)=>{if(w&&[a.TESSERACT_ONLY,a.TESSERACT_LSTM_COMBINED].includes(Ce))throw Error("Legacy model requested but code missing.");const Ft=Ce||oe;oe=Ft;const St=Ge||C;C=St;const rr=(typeof ye=="string"?ye.split("+"):ye).filter(Us=>!he.includes(Us));return he.push(...rr),rr.length>0?I(rr,bt).then(()=>H(ye,Ft,St,bt)):H(ye,Ft,St,bt)},le=(ye={},Ce)=>Le(e({id:Ce,action:"setParameters",payload:{params:ye}})),Ee=async(ye,Ce={},Ge={text:!0},bt)=>Le(e({id:bt,action:"recognize",payload:{image:await g(ye),options:Ce,output:Ge}})),ve=async(ye,Ce)=>{if(w)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return Le(e({id:Ce,action:"detect",payload:{image:await g(ye)}}))},me=async()=>(N!==null&&(d(N),N=null),Promise.resolve());p(N,({workerId:ye,jobId:Ce,status:Ge,action:bt,data:Ft})=>{const St=`${bt}-${Ce}`;if(Ge==="resolve")t(`[${ye}]: Complete ${Ce}`),ue[St].resolve({jobId:Ce,data:Ft}),delete ue[St];else if(Ge==="reject")if(ue[St].reject(Ft),delete ue[St],bt==="load"&&D(Ft),K)K(Ft);else throw Error(Ft);else Ge==="progress"&&ie({...Ft,userJobId:Ce})});const Se={id:k,worker:N,load:ut,writeText:fe,readText:_e,removeFile:re,FS:ee,reinitialize:Z,setParameters:le,recognize:Ee,detect:ve,terminate:me};return J().then(()=>I(b)).then(()=>H(b,V,L)).then(()=>P(Se)).catch(()=>{}),x},Rg}var Cg,G0;function wL(){if(G0)return Cg;G0=1;const r=VR();return Cg={recognize:async(i,a,l)=>{const c=await r(a,1,l);return c.recognize(i).finally(async()=>{await c.terminate()})},detect:async(i,a)=>{const l=await r("osd",0,a);return l.detect(i).finally(async()=>{await l.terminate()})}},Cg}var Dg,K0;function IL(){return K0||(K0=1,Dg={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),Dg}var Ng,Q0;function RL(){return Q0||(Q0=1,Ng={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),Ng}var xg,Y0;function CL(){if(Y0)return xg;Y0=1,cL();const r=hL(),e=VR(),t=wL(),i=IL(),a=OR(),l=RL(),{setLogging:c}=k_();return xg={languages:i,OEM:a,PSM:l,createScheduler:r,createWorker:e,setLogging:c,...t},xg}var DL=CL();const NL=fC(DL),xL=async(r,e,t)=>{const a=(await NL.recognize(r,"srp+srp_latn+eng",{logger:l=>{l.status==="recognizing text"&&t&&t(Math.round(l.progress*100))}})).data.text;return OL(a,e)},OL=(r,e)=>{switch(e){case"dobavljac":{const t=[/prodavac[:\s]*([^\n]+)/i,/dobavlja[:\s]*([^\n]+)/i,/naziv[:\s]*([^\n]+d\.?o\.?o\.?[^\n]*)/i,/([A-Z][A-Z\s]+D\.?O\.?O\.?[^\n]*)/];for(const a of t){const l=r.match(a);if(l)return l[1]?.trim()||l[0]?.trim()||""}return r.split(`
`)[0]?.trim()||""}case"pib":{const t=[/PIB[:\s]*(\d{9})/i,/poreski\s*broj[:\s]*(\d{9})/i,/(\d{9})/];for(const i of t){const a=r.match(i);if(a)return a[1]}return""}case"brojFakture":{const t=[/broj\s*fakture[:\s]*([A-Z0-9\-\/]+)/i,/broj\s*dokumenta[:\s]*([A-Z0-9\-\/]+)/i,/faktura\s*br[:\.\s]*([A-Z0-9\-\/]+)/i,/VP\d+/i,/raun\s*br[:\.\s]*([A-Z0-9\-\/]+)/i,/([A-Z0-9\-\/]+)/i];for(const i of t){const a=r.match(i);if(a)return a[1]||a[0]}return r.trim().split(`
`)[0]||""}case"iznos":{const t=[/iznos\s*za\s*pla[c]anje[:\s]*([\d\.,]+)/i,/ukupan\s*iznos\s*fakture[:\s]*([\d\.,]+)/i,/ukupno[:\s]*([\d\.,]+)\s*RSD/i,/za\s*uplatu[:\s]*([\d\.,]+)/i,/total[:\s]*([\d\.,]+)/i,/([\d\.]+,\d{2})/,/([\d,]+\.\d{2})/];for(const i of t){const a=r.match(i);if(a)return a[1].replace(/\./g,"").replace(",",".")}return""}case"datumPrometa":case"datumDospeca":{const t=/(\d{1,2})[\.\/\-](\d{1,2})[\.\/\-](\d{4})/,i=r.match(t);if(i){const[,a,l,c]=i;return`${c}-${l.padStart(2,"0")}-${a.padStart(2,"0")}`}return""}case"brojRacuna":{const t=[/(\d{3}[-\s]?\d{13}[-\s]?\d{2})/,/(\d{3}[-\s]?\d{12,13}[-\s]?\d{2})/,/tekui\s*raun[:\s]*([0-9\-\s]+)/i,/raun[:\s]*([0-9\-\s]+)/i,/([0-9]{3}[0-9\-\s]{10,20})/];for(const i of t){const a=r.match(i);if(a)return a[1].replace(/\s/g,"")}return""}default:return r.trim()}},VL="1056903102906-6vs5iltfn8fnusd83mvl38arv8ffhfd2.apps.googleusercontent.com",PL="AIzaSyBPYe6LAX0kIO1c1HtXyO1VyVPpYiNRoLU",ML="https://www.googleapis.com/auth/drive",kL="1df0Gc7hPpL7icsSRlJPSPDzqfWul2tnh";let Lf=null,$0=!1,X0=!1,$o=null;const LL=()=>new Promise((r,e)=>{if(window.gapi&&window.google?.accounts){r();return}const t=document.createElement("script");t.src="https://apis.google.com/js/api.js",t.async=!0,t.defer=!0;const i=document.createElement("script");i.src="https://accounts.google.com/gsi/client",i.async=!0,i.defer=!0;let a=!1,l=!1;const c=()=>{a&&l&&r()};t.onload=()=>{a=!0,c()},t.onerror=()=>e(new Error("Failed to load Google API")),i.onload=()=>{l=!0,c()},i.onerror=()=>e(new Error("Failed to load Google Identity Services")),document.head.appendChild(t),document.head.appendChild(i)}),UL=async()=>{$0||(await new Promise((r,e)=>{window.gapi.load("client",{callback:r,onerror:e})}),await window.gapi.client.init({apiKey:PL,discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"]}),$0=!0)},jL=()=>{X0||(Lf=window.google.accounts.oauth2.initTokenClient({client_id:VL,scope:ML,callback:r=>{r.access_token&&($o=r.access_token)}}),X0=!0)},PR=async()=>{await LL(),await UL(),jL()},xc=()=>new Promise((r,e)=>{if(!Lf){e(new Error("Google Drive nije inicijalizovan. Osveite stranicu."));return}if(Lf.callback=t=>{if(console.log("Google OAuth response:",t),t.error){e(new Error(`Google greka: ${t.error}`));return}t.access_token&&($o=t.access_token,r(t.access_token))},$o){r($o);return}try{console.log("Requesting Google access token..."),Lf.requestAccessToken({prompt:"consent"})}catch(t){console.error("Token request error:",t),e(new Error("Nije mogue otvoriti Google prijavu. Proverite da li browser blokira popup."))}}),MR=()=>$o!==null,L_=async()=>kL,zL=async(r,e,t)=>{await xc(),t?.(10);const i=await L_();t?.(20);const a=Date.now(),l=e.name.split(".").pop()||"jpg",d={name:`${r}_${a}.${l}`,parents:[i]},p=new FormData;p.append("metadata",new Blob([JSON.stringify(d)],{type:"application/json"})),p.append("file",e),t?.(30);const g=await fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id,webViewLink,webContentLink",{method:"POST",headers:{Authorization:`Bearer ${$o}`},body:p});if(!g.ok)throw new Error("Upload failed");const _=await g.json();return t?.(100),await window.gapi.client.drive.permissions.create({fileId:_.id,resource:{role:"reader",type:"anyone"}}),_.webContentLink||_.webViewLink},BL=async()=>{await xc();let r=0,e=0;try{const t=await L_();let i;do{const c=await window.gapi.client.drive.files.list({q:`'${t}' in parents and trashed=false`,fields:"nextPageToken, files(id, name, size)",spaces:"drive",pageSize:100,pageToken:i}),d=c.result.files;if(d)for(const p of d)e++,r+=parseInt(p.size||"0",10);i=c.result.nextPageToken}while(i);const a=await window.gapi.client.drive.about.get({fields:"storageQuota"}),l=parseInt(a.result.storageQuota?.limit||"15000000000",10);return{totalBytes:r,totalFiles:e,limit:l,percentUsed:r/l*100}}catch(t){return console.error("Error getting storage stats:",t),{totalBytes:0,totalFiles:0,limit:15e9,percentUsed:0}}},FL=async(r=12)=>{await xc();const e=new Date;e.setMonth(e.getMonth()-r);const t=e.toISOString();let i=0,a=0;try{const l=await L_();let c;do{const d=await window.gapi.client.drive.files.list({q:`'${l}' in parents and trashed=false and createdTime < '${t}'`,fields:"nextPageToken, files(id, name, size, createdTime)",spaces:"drive",pageSize:100,pageToken:c}),p=d.result.files;if(p)for(const g of p)try{const _=parseInt(g.size||"0",10);await window.gapi.client.drive.files.delete({fileId:g.id}),i++,a+=_}catch(_){console.error("Error deleting file:",_)}c=d.result.nextPageToken}while(c)}catch(l){console.error("Error deleting old attachments:",l)}return{deleted:i,freedBytes:a}},Og=r=>{if(r===0)return"0 B";const e=1024,t=["B","KB","MB","GB"],i=Math.floor(Math.log(r)/Math.log(e));return parseFloat((r/Math.pow(e,i)).toFixed(2))+" "+t[i]},qL=({onCapture:r,onClose:e,fieldLabel:t})=>{const i=z.useRef(null),a=z.useRef(null),[l,c]=z.useState(null),[d,p]=z.useState(""),[g,_]=z.useState(!1);z.useEffect(()=>(T(),()=>{b()}),[]);const T=async()=>{try{const L=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1920},height:{ideal:1080}}});i.current&&(i.current.srcObject=L,i.current.onloadedmetadata=()=>{_(!0)}),c(L)}catch(L){p("Nije mogue pristupiti kameri. Molimo dozvolite pristup kameri."),console.error("Camera error:",L)}},b=()=>{l&&(l.getTracks().forEach(L=>L.stop()),c(null))},V=z.useCallback(()=>{if(!i.current||!a.current||!g)return;const L=i.current,k=a.current,ie=k.getContext("2d");if(!ie)return;const K=L.videoWidth,X=L.videoHeight,ue=K*.8,he=X*.15,oe=(K-ue)/2,C=(X-he)/2;k.width=ue,k.height=he,ie.drawImage(L,oe,C,ue,he,0,0,ue,he),k.toBlob(w=>{w&&(r(w),b())},"image/jpeg",.95)},[g,r]),B=()=>{b(),e()};return R.jsx("div",{className:"camera-overlay",children:R.jsxs("div",{className:"camera-container",children:[R.jsxs("div",{className:"camera-header",children:[R.jsxs("span",{className:"field-label",children:["Skeniraj: ",t]}),R.jsx("button",{className:"close-camera-btn",onClick:B,children:""})]}),d?R.jsxs("div",{className:"camera-error",children:[R.jsx("p",{children:d}),R.jsx("button",{onClick:B,children:"Zatvori"})]}):R.jsxs(R.Fragment,{children:[R.jsxs("div",{className:"video-wrapper",children:[R.jsx("video",{ref:i,autoPlay:!0,playsInline:!0,muted:!0}),R.jsxs("div",{className:"scan-overlay",children:[R.jsx("div",{className:"scan-area-top"}),R.jsxs("div",{className:"scan-area-middle",children:[R.jsx("div",{className:"scan-area-left"}),R.jsx("div",{className:"scan-area-center",children:R.jsxs("div",{className:"scan-corners",children:[R.jsx("span",{className:"corner top-left"}),R.jsx("span",{className:"corner top-right"}),R.jsx("span",{className:"corner bottom-left"}),R.jsx("span",{className:"corner bottom-right"})]})}),R.jsx("div",{className:"scan-area-right"})]}),R.jsx("div",{className:"scan-area-bottom"})]}),R.jsx("div",{className:"scan-instruction",children:"Pozicionirajte tekst unutar pravougaonika"})]}),R.jsx("div",{className:"camera-actions",children:R.jsx("button",{className:"capture-btn",onClick:V,disabled:!g,children:g?"Snimi":"Uitavanje..."})})]}),R.jsx("canvas",{ref:a,style:{display:"none"}})]})})},W0=["Sirius Medical","S-Life"],HL={dobavljac:"Dobavlja",pib:"PIB",brojFakture:"Broj fakture",iznos:"Iznos",datumPrometa:"Datum prometa",datumDospeca:"Datum dospea",brojRacuna:"Broj rauna"},GL=({invoice:r,onClose:e})=>{const{addInvoice:t,updateInvoice:i,getSupplierSuggestions:a,addOrUpdateSupplier:l,selectedCompany:c}=Fd(),[d,p]=z.useState(null),[g,_]=z.useState(!1),T=c==="all"?W0[0]:c,[b,V]=z.useState({brojFakture:r?.brojFakture||"",dobavljac:r?.dobavljac||"",pibDobavljaca:r?.pibDobavljaca||"",brojRacunaZaUplatu:r?.brojRacunaZaUplatu||"",datumPrometa:r?.datumPrometa||"",datumDospeca:r?.datumDospeca||"",iznosZaPlacanje:r?.iznosZaPlacanje?.toString()||"",valuta:r?.valuta||"RSD",status:r?.status||"neplaceno",kompanija:r?.kompanija||T,notes:r?.notes||""}),[B,L]=z.useState(0),[k,ie]=z.useState(!1),[K,X]=z.useState(!1),[ue,he]=z.useState(""),[oe,C]=z.useState(null),[w,D]=z.useState(r?.imageUrl||null),[P,x]=z.useState(0),U=z.useRef(null),[N,Le]=z.useState([]),[ut,J]=z.useState(!1),fe=z.useRef(null);z.useEffect(()=>{if(b.dobavljac.length>=2){const me=a(b.dobavljac);Le(me),J(me.length>0)}else Le([]),J(!1)},[b.dobavljac,a]),z.useEffect(()=>{const me=Se=>{fe.current&&!fe.current.contains(Se.target)&&J(!1)};return document.addEventListener("mousedown",me),()=>document.removeEventListener("mousedown",me)},[]);const _e=me=>{const{name:Se,value:ye}=me.target;V(Ce=>({...Ce,[Se]:ye}))},re=me=>{V(Se=>({...Se,dobavljac:me.name,pibDobavljaca:me.pib||Se.pibDobavljaca,brojRacunaZaUplatu:me.brojRacuna||Se.brojRacunaZaUplatu})),J(!1)},ee=me=>{p(me),_(!0)},I=async me=>{if(_(!1),!!d){ie(!0),L(0),he("");try{const Se=new File([me],"scan.jpg",{type:"image/jpeg"}),ye=await xL(Se,d,L),Ge={dobavljac:"dobavljac",pib:"pibDobavljaca",brojFakture:"brojFakture",iznos:"iznosZaPlacanje",datumPrometa:"datumPrometa",datumDospeca:"datumDospeca",brojRacuna:"brojRacunaZaUplatu"}[d];Ge&&ye&&V(bt=>({...bt,[Ge]:ye}))}catch{he("Greka pri itanju. Pokuajte ponovo ili unesite runo.")}finally{ie(!1),L(0),p(null)}}},H=()=>{_(!1),p(null)},Z=me=>{const Se=me.target.files?.[0];if(!Se)return;if(!["image/jpeg","image/png","image/gif","image/webp","application/pdf"].includes(Se.type)){he("Dozvoljeni formati: JPG, PNG, GIF, WEBP, PDF");return}if(Se.size>5*1024*1024){he("Maksimalna veliina fajla je 5MB");return}if(C(Se),Se.type.startsWith("image/")){const Ce=new FileReader;Ce.onload=Ge=>{D(Ge.target?.result)},Ce.readAsDataURL(Se)}else D("pdf")},le=()=>{C(null),D(r?.imageUrl||null),U.current&&(U.current.value="")},Ee=async me=>{me.preventDefault(),X(!0),he("");try{let Se=r?.imageUrl||"";if(oe){x(10),await PR(),MR()||await xc();const Ce=r?.id||`temp_${Date.now()}`;Se=await zL(Ce,oe,x),x(100)}const ye={...b,iznosZaPlacanje:parseFloat(b.iznosZaPlacanje.replace(",","."))||0,status:b.status,imageUrl:Se};r?await i(r.id,ye):await t(ye),b.dobavljac&&await l(b.dobavljac,b.pibDobavljaca,b.brojRacunaZaUplatu),e()}catch(Se){console.error("Invoice save error:",Se);const ye=Se instanceof Error?Se.message:"Nepoznata greka";he(`Greka: ${ye}`)}finally{X(!1),x(0)}},ve=me=>R.jsx("button",{type:"button",className:"scan-field-button",onClick:()=>ee(me),disabled:k,title:"Skeniraj kamerom",children:""});return R.jsx("div",{className:"modal-overlay",onClick:e,children:R.jsxs("div",{className:"modal-content",onClick:me=>me.stopPropagation(),children:[R.jsxs("div",{className:"modal-header",children:[R.jsx("h2",{children:r?"Izmeni fakturu":"Nova faktura"}),R.jsx("button",{className:"close-button",onClick:e,children:""})]}),ue&&R.jsx("div",{className:"form-error",children:ue}),k&&R.jsxs("div",{className:"ocr-processing",children:[R.jsxs("div",{className:"processing-text",children:["Skeniram... ",B,"%"]}),R.jsx("div",{className:"progress-bar",children:R.jsx("div",{className:"progress",style:{width:`${B}%`}})})]}),R.jsxs("form",{onSubmit:Ee,children:[R.jsxs("div",{className:"form-row",children:[R.jsxs("div",{className:"form-group",children:[R.jsx("label",{children:"Broj fakture"}),R.jsxs("div",{className:"input-with-scan",children:[R.jsx("input",{type:"text",name:"brojFakture",value:b.brojFakture,onChange:_e,placeholder:"VP2600184",required:!0}),ve("brojFakture")]})]}),R.jsxs("div",{className:"form-group",children:[R.jsx("label",{children:"Kompanija"}),R.jsx("select",{name:"kompanija",value:b.kompanija,onChange:_e,children:W0.map(me=>R.jsx("option",{value:me,children:me},me))})]})]}),R.jsxs("div",{className:"form-group",ref:fe,children:[R.jsx("label",{children:"Dobavlja"}),R.jsxs("div",{className:"input-with-scan",children:[R.jsx("input",{type:"text",name:"dobavljac",value:b.dobavljac,onChange:_e,onFocus:()=>b.dobavljac.length>=2&&J(N.length>0),placeholder:"Naziv dobavljaa",required:!0,autoComplete:"off"}),ve("dobavljac")]}),ut&&R.jsx("ul",{className:"supplier-suggestions",children:N.map(me=>R.jsxs("li",{onClick:()=>re(me),children:[R.jsx("span",{className:"supplier-name",children:me.name}),me.brojRacuna&&R.jsxs("span",{className:"supplier-account",children:["Raun: ",me.brojRacuna]})]},me.id))})]}),R.jsxs("div",{className:"form-group",children:[R.jsx("label",{children:"PIB dobavljaa"}),R.jsxs("div",{className:"input-with-scan",children:[R.jsx("input",{type:"text",name:"pibDobavljaca",value:b.pibDobavljaca,onChange:_e,placeholder:"123456789"}),ve("pib")]})]}),R.jsxs("div",{className:"form-group",children:[R.jsx("label",{children:"Broj rauna za uplatu"}),R.jsxs("div",{className:"input-with-scan",children:[R.jsx("input",{type:"text",name:"brojRacunaZaUplatu",value:b.brojRacunaZaUplatu,onChange:_e,placeholder:"160-0000000123456-12"}),ve("brojRacuna")]})]}),R.jsxs("div",{className:"form-row",children:[R.jsxs("div",{className:"form-group",children:[R.jsx("label",{children:"Datum prometa"}),R.jsxs("div",{className:"input-with-scan",children:[R.jsx("input",{type:"date",name:"datumPrometa",value:b.datumPrometa,onChange:_e}),ve("datumPrometa")]})]}),R.jsxs("div",{className:"form-group",children:[R.jsx("label",{children:"Datum dospea"}),R.jsxs("div",{className:"input-with-scan",children:[R.jsx("input",{type:"date",name:"datumDospeca",value:b.datumDospeca,onChange:_e,required:!0}),ve("datumDospeca")]})]})]}),R.jsxs("div",{className:"form-row",children:[R.jsxs("div",{className:"form-group",children:[R.jsx("label",{children:"Iznos za plaanje"}),R.jsxs("div",{className:"input-with-scan",children:[R.jsx("input",{type:"text",name:"iznosZaPlacanje",value:b.iznosZaPlacanje,onChange:_e,placeholder:"8831.23",required:!0}),ve("iznos")]})]}),R.jsxs("div",{className:"form-group",children:[R.jsx("label",{children:"Valuta"}),R.jsxs("select",{name:"valuta",value:b.valuta,onChange:_e,children:[R.jsx("option",{value:"RSD",children:"RSD"}),R.jsx("option",{value:"EUR",children:"EUR"}),R.jsx("option",{value:"USD",children:"USD"})]})]})]}),R.jsxs("div",{className:"form-group",children:[R.jsx("label",{children:"Status"}),R.jsxs("select",{name:"status",value:b.status,onChange:_e,children:[R.jsx("option",{value:"neplaceno",children:"Neplaeno"}),R.jsx("option",{value:"placeno",children:"Plaeno"})]})]}),R.jsxs("div",{className:"form-group",children:[R.jsx("label",{children:"Napomene"}),R.jsx("textarea",{name:"notes",value:b.notes,onChange:_e,placeholder:"Dodatne napomene...",rows:3})]}),R.jsxs("div",{className:"form-group attachment-group",children:[R.jsx("label",{children:"Prilog (slika ili PDF fakture)"}),R.jsx("input",{type:"file",ref:U,accept:"image/*,application/pdf",onChange:Z,style:{display:"none"}}),w?R.jsxs("div",{className:"attachment-preview",children:[w==="pdf"?R.jsxs("div",{className:"pdf-preview",children:[R.jsx("span",{className:"pdf-icon",children:""}),R.jsx("span",{className:"pdf-name",children:oe?.name||"PDF dokument"})]}):R.jsx("img",{src:w,alt:"Prilog"}),R.jsxs("div",{className:"attachment-actions",children:[R.jsx("button",{type:"button",className:"change-attachment",onClick:()=>U.current?.click(),children:"Promijeni"}),R.jsx("button",{type:"button",className:"remove-attachment",onClick:le,children:"Ukloni"})]})]}):R.jsx("button",{type:"button",className:"attachment-button",onClick:()=>U.current?.click(),children:" Dodaj prilog"}),P>0&&P<100&&R.jsxs("div",{className:"upload-progress",children:[R.jsx("div",{className:"progress-bar",children:R.jsx("div",{className:"progress",style:{width:`${P}%`}})}),R.jsxs("span",{children:["Upload: ",P,"%"]})]})]}),R.jsxs("div",{className:"form-actions",children:[R.jsx("button",{type:"button",onClick:e,className:"cancel-button",children:"Otkai"}),R.jsx("button",{type:"submit",className:"save-button",disabled:K,children:K?"uvanje...":r?"Sauvaj izmene":"Dodaj fakturu"})]})]}),g&&d&&R.jsx(qL,{onCapture:I,onClose:H,fieldLabel:HL[d]})]})})},KL=["Sirius Medical","S-Life"],QL=()=>{const{selectedCompany:r,setSelectedCompany:e}=Fd();return R.jsx("div",{className:"company-selector",children:R.jsxs("select",{value:r,onChange:t=>e(t.target.value),children:[R.jsx("option",{value:"all",children:"Sve kompanije"}),KL.map(t=>R.jsx("option",{value:t,children:t},t))]})})},YL=({value:r,onChange:e})=>R.jsxs("div",{className:"search-bar",children:[R.jsx("span",{className:"search-icon",children:""}),R.jsx("input",{type:"text",placeholder:"Pretrai po dobavljau ili broju fakture...",value:r,onChange:t=>e(t.target.value)}),r&&R.jsx("button",{className:"clear-button",onClick:()=>e(""),children:""})]}),$L=({count:r})=>R.jsxs("div",{className:`due-today-card ${r>0?"has-due":""}`,children:[R.jsx("span",{className:"stat-number",children:r}),R.jsx("span",{className:"stat-label",children:"Dospeva danas"}),r>0&&R.jsx("span",{className:"alert-icon",children:""})]}),XL=({onClose:r})=>{const[e,t]=z.useState(null),[i,a]=z.useState(!0),[l,c]=z.useState(!1),[d,p]=z.useState(!1),[g,_]=z.useState(!1),[T,b]=z.useState(null);z.useEffect(()=>{V()},[]);const V=async()=>{a(!0);try{await PR(),MR()?(_(!0),await L()):_(!1)}catch(K){console.error("Error initializing Google Drive:",K)}finally{a(!1)}},B=async()=>{p(!0);try{await xc(),_(!0),await L()}catch(K){console.error("Error connecting to Google Drive:",K)}finally{p(!1)}},L=async()=>{a(!0);try{const K=await BL();t(K)}catch(K){console.error("Error loading storage stats:",K)}finally{a(!1)}},k=async()=>{if(confirm("Da li ste sigurni da elite obrisati sve priloge starije od 12 mjeseci?")){c(!0),b(null);try{const K=await FL(12);b(K),await L()}catch(K){console.error("Error deleting old attachments:",K)}finally{c(!1)}}},ie=K=>K>=90?"#dc2626":K>=70?"#f59e0b":"#10b981";return R.jsx("div",{className:"modal-overlay",onClick:r,children:R.jsxs("div",{className:"storage-modal",onClick:K=>K.stopPropagation(),children:[R.jsxs("div",{className:"modal-header",children:[R.jsx("h2",{children:"Upravljanje memorijom"}),R.jsx("button",{className:"close-button",onClick:r,children:""})]}),R.jsx("div",{className:"storage-content",children:i?R.jsx("div",{className:"storage-loading",children:"Uitavanje..."}):g?e?R.jsxs(R.Fragment,{children:[R.jsx("div",{className:"storage-connected",children:" Povezano sa Google Drive"}),R.jsxs("div",{className:"storage-stats",children:[R.jsx("div",{className:"storage-bar-container",children:R.jsx("div",{className:"storage-bar-fill",style:{width:`${Math.min(e.percentUsed,100)}%`,backgroundColor:ie(e.percentUsed)}})}),R.jsxs("div",{className:"storage-info",children:[R.jsxs("span",{className:"storage-used",children:[Og(e.totalBytes)," / ",Og(e.limit)]}),R.jsxs("span",{className:"storage-percent",children:[e.percentUsed.toFixed(1),"% iskoriteno"]})]}),R.jsxs("div",{className:"storage-files",children:["Ukupno fajlova u folderu: ",e.totalFiles]})]}),e.percentUsed>=80&&R.jsx("div",{className:"storage-warning",children:" Memorija je skoro puna! Preporuujemo brisanje starih priloga."}),R.jsx("div",{className:"storage-actions",children:R.jsx("button",{className:"delete-old-button",onClick:k,disabled:l,children:l?"Brisanje...":" Obrii priloge starije od 12 mjeseci"})}),T&&R.jsxs("div",{className:"delete-result",children:[" Obrisano ",T.deleted," fajlova (",Og(T.freedBytes)," osloboeno)"]})]}):R.jsx("div",{className:"storage-error",children:"Greka pri uitavanju statistike"}):R.jsxs("div",{className:"storage-connect",children:[R.jsx("p",{children:"Poveite Google Drive nalog da biste koristili memoriju za priloge faktura."}),R.jsx("p",{className:"storage-hint",children:'Prilozi e se uvati u folderu "Fakture-Prilozi" na vaem Google Drive-u.'}),R.jsx("button",{className:"connect-button",onClick:B,disabled:d,children:d?"Povezivanje...":" Povei Google Drive"})]})})]})})},WL=()=>{const{invoices:r,getDueToday:e,getDueTomorrow:t,getOverdue:i,searchInvoices:a,loading:l,selectedCompany:c}=Fd(),{userData:d,signOut:p}=Nc(),[g,_]=z.useState(!1),[T,b]=z.useState(null),[V,B]=z.useState(""),[L,k]=z.useState("all"),[ie,K]=z.useState(!1),X=e(),ue=t(),he=i(),oe=()=>{let P=V?a(V):r;switch(L){case"unpaid":return P.filter(x=>x.status==="neplaceno");case"paid":return P.filter(x=>x.status==="placeno");case"overdue":return he;case"today":return X;case"tomorrow":return ue;default:return P}},C=P=>{b(P),_(!0)},w=()=>{_(!1),b(null)},D=r.filter(P=>P.status==="neplaceno").reduce((P,x)=>P+x.iznosZaPlacanje,0);return l?R.jsx("div",{className:"loading",children:"Uitavanje..."}):R.jsxs("div",{className:"dashboard",children:[R.jsxs("header",{className:"dashboard-header",children:[R.jsxs("div",{className:"header-left",children:[R.jsx("h1",{children:"Fakture"}),R.jsx(QL,{})]}),R.jsxs("div",{className:"header-right",children:[R.jsx("button",{onClick:()=>K(!0),className:"storage-button",title:"Upravljanje memorijom",children:""}),R.jsx("span",{className:"user-name",children:d?.displayName||d?.email}),R.jsx("button",{onClick:p,className:"logout-button",children:"Odjavi se"})]})]}),R.jsxs("div",{className:"dashboard-stats",children:[R.jsx($L,{count:X.length}),R.jsxs("div",{className:`stat-card tomorrow ${ue.length>0?"has-items":""}`,children:[R.jsx("span",{className:"stat-number",children:ue.length}),R.jsx("span",{className:"stat-label",children:"Dospeva sutra"}),ue.length>0&&R.jsx("span",{className:"reminder-icon",children:""})]}),R.jsxs("div",{className:"stat-card overdue",children:[R.jsx("span",{className:"stat-number",children:he.length}),R.jsx("span",{className:"stat-label",children:"Istekle fakture"})]}),R.jsxs("div",{className:"stat-card unpaid",children:[R.jsx("span",{className:"stat-number",children:r.filter(P=>P.status==="neplaceno").length}),R.jsx("span",{className:"stat-label",children:"Neplaene"})]}),R.jsxs("div",{className:"stat-card total",children:[R.jsxs("span",{className:"stat-number",children:[D.toLocaleString("sr-RS")," RSD"]}),R.jsxs("span",{className:"stat-label",children:["Ukupno za plaanje",c!=="all"&&R.jsxs("span",{className:"company-indicator",children:[" (",c,")"]})]})]})]}),R.jsxs("div",{className:"dashboard-actions",children:[R.jsx(YL,{value:V,onChange:B}),R.jsxs("div",{className:"filter-buttons",children:[R.jsx("button",{className:L==="all"?"active":"",onClick:()=>k("all"),children:"Sve"}),R.jsx("button",{className:L==="today"?"active":"",onClick:()=>k("today"),children:"Danas dospevaju"}),R.jsx("button",{className:L==="tomorrow"?"active":"",onClick:()=>k("tomorrow"),children:"Sutra dospevaju"}),R.jsx("button",{className:L==="overdue"?"active":"",onClick:()=>k("overdue"),children:"Istekle"}),R.jsx("button",{className:L==="unpaid"?"active":"",onClick:()=>k("unpaid"),children:"Neplaene"}),R.jsx("button",{className:L==="paid"?"active":"",onClick:()=>k("paid"),children:"Plaene"})]}),R.jsx("button",{className:"add-button",onClick:()=>_(!0),children:"+ Dodaj fakturu"})]}),R.jsx(uL,{invoices:oe(),onEdit:C}),g&&R.jsx(GL,{invoice:T,onClose:w}),ie&&R.jsx(XL,{onClose:()=>K(!1)})]})},JL=({children:r})=>{const{currentUser:e,loading:t}=Nc();return t?R.jsx("div",{className:"loading-screen",children:"Uitavanje..."}):e?R.jsx(R.Fragment,{children:r}):R.jsx(by,{to:"/login",replace:!0})},ZL=({children:r})=>{const{currentUser:e,loading:t}=Nc();return t?R.jsx("div",{className:"loading-screen",children:"Uitavanje..."}):e?R.jsx(by,{to:"/",replace:!0}):R.jsx(R.Fragment,{children:r})};function e4(){return R.jsxs(vD,{children:[R.jsx(_f,{path:"/login",element:R.jsx(ZL,{children:R.jsx(lL,{})})}),R.jsx(_f,{path:"/",element:R.jsx(JL,{children:R.jsx(oL,{children:R.jsx(WL,{})})})}),R.jsx(_f,{path:"*",element:R.jsx(by,{to:"/",replace:!0})})]})}function t4(){return R.jsx(qD,{children:R.jsx(sL,{children:R.jsx(e4,{})})})}bC.createRoot(document.getElementById("root")).render(R.jsx(z.StrictMode,{children:R.jsx(t4,{})}));
